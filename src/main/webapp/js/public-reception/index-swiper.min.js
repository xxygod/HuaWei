if (!window.ol) {
    window.ol = {
        debug: true, isIE:
        /*@cc_on!@*/
            0, isIE6: false, isIE7: false, isIE8: false, domCompleted: false
    }
}
ol.pkg = function (i, h, g) {
    var d, e, b;
    if (arguments.length == 3) {
        d = i;
        e = h;
        b = g
    } else {
        d = window;
        e = i;
        b = h
    }
    if (!e || !e.length) {
        return null
    }
    var l = e.split(".");
    for (var k = d, j = 0; j < l.length - 1; j++) {
        k[l[j]] || (k[l[j]] = {});
        k = k[l[j]]
    }
    k = (k[l[l.length - 1]] = b || k[l[l.length - 1]] || {});
    return k
};
(function () {
    var c = 0, e = [], d = function () {
        for (var f = 0; f < e.length; f++) {
            e[f].call(document)
        }
        e.length = 0
    }, a = function () {
        if (ol.domCompleted) {
            d();
            return
        }
        if (!document.body) {
            setTimeout(arguments.callee, 13);
            return
        }
        ol.domCompleted = true;
        d()
    }, b = {
        DOMContentLoaded: function () {
            if (document.addEventListener) {
                document.removeEventListener("DOMContentLoaded", b.DOMContentLoaded, false);
                a()
            } else {
                if (document.attachEvent) {
                    if (document.readyState === "complete") {
                        document.detachEvent("onreadystatechange", b.DOMContentLoaded);
                        a()
                    }
                }
            }
        }, bindReady: function () {
            var f = b.DOMContentLoaded;
            if (document.readyState === "complete") {
                a();
                return
            }
            if (document.addEventListener) {
                document.addEventListener("DOMContentLoaded", f, false);
                window.addEventListener("load", a, false)
            } else {
                if (document.attachEvent) {
                    document.attachEvent("onreadystatechange", f);
                    window.attachEvent("onload", a);
                    var g = false;
                    try {
                        g = window.frameElement == null
                    } catch (h) {
                    }
                    if (document.documentElement.doScroll && g) {
                        b.doScrollCheck()
                    }
                }
            }
        }, doScrollCheck: function () {
            if (ol.domCompleted) {
                return
            }
            try {
                document.documentElement.doScroll("left")
            } catch (f) {
                setTimeout(b.doScrollCheck, 1);
                return
            }
            a()
        }
    };
    ol.ready = function (f) {
        if (typeof(f) != "function") {
            return
        }
        if (ol.domCompleted) {
            f.call(document);
            return
        } else {
            if (e.length == 0) {
                b.bindReady()
            }
        }
        e.push(f)
    }
})();
(function () {
    var h = document.head || document.getElementsByTagName("head")[0] || document.documentElement, a = 0, e = {},
        b = {}, g = function (j, k) {
            j.onload = j.onerror = j.onreadystatechange = function () {
                if (/loaded|complete|undefined/.test(j.readyState)) {
                    j.onload = j.onerror = j.onreadystatechange = null;
                    if (j.parentNode) {
                        try {
                            if (j.clearAttributes) {
                                j.clearAttributes()
                            } else {
                                for (var m in j) {
                                    delete j[m]
                                }
                            }
                        } catch (l) {
                        }
                        h.removeChild(j)
                    }
                    j = undefined;
                    k()
                }
            }
        }, f = function (l, o) {
            var j = [];
            var n = "jsapi_loader" + (a++);
            j.push("(function(){var time = 0,el = document.getElementById('" + n + "');if(!el || (el.readyState && 'complete' != el.readyState)){ if(time<10){ setTimeout(arguments.callee,30); time++; }else{ logger.error('load the script of id " + n + " fail!');} return; }");
            if (l.onload) {
                j.push("(");
                j.push(l.onload);
                j.push(")();")
            }
            if ("object" == typeof(o)) {
                for (var k = 0; k < o.length; k++) {
                    if ("function" == typeof(o[k])) {
                        j.push("(");
                        j.push(o[k]);
                        j.push(")();")
                    } else {
                        if ("string" == typeof(o[k])) {
                            j.push(o[k])
                        }
                    }
                }
            }
            var m = "";
            if (l.charset) {
                m = 'charset="' + l.charset + '"'
            }
            j.push("})();");
            document.write('<script id="' + n + '" loadType="insert" type="text/javascript" src="' + l.url + '" ' + m + "><\/script>");
            document.write("<script>" + j.join("") + "<\/script>")
        }, d = function (j, m) {
            var l = document.createElement("script");
            l.src = j.url;
            l.async = !j.depend;
            l.type = "text/javascript";
            if (j.charset) {
                l.charset = j.charset
            }
            var k = l;
            h.insertBefore(l, h.firstChild);
            k = null;
            g(l, m)
        }, i = function (j) {
            var k = document.createElement("link");
            k.rel = "stylesheet";
            k.type = "text/css";
            k.href = j.url;
            h.appendChild(k)
        }, c = function (l, k) {
            var j = this;
            this._insertMark = {};
            this._css_queue = [];
            this._js_queue = [];
            this._wait_map = {};
            this._push = function (m) {
                if (!m.mark) {
                    m.mark = (m.uri || m.url)
                }
                if (this._insertMark[m.mark]) {
                    return
                }
                this._insertMark[m.mark] = true;
                ("js" == m.type ? this._js_queue : this._css_queue).push(m)
            };
            this._attach = function (o) {
                if ("string" == typeof(o)) {
                    var m = o;
                    o = e[m];
                    if (!o) {
                        if (ol.debug) {
                            logger.warn("ol.load", m + " is undefined!")
                        }
                        return
                    }
                    this._attach(o);
                    return
                } else {
                    if ("[object Array]" == Object.prototype.toString.apply(o)) {
                        for (var n = 0; n < o.length; n++) {
                            this._attach(o[n])
                        }
                        return
                    }
                }
                this._push(o)
            };
            this._load = function (p) {
                (p.type == "js" ? this._js_queue : this._css_queue).splice(0, 1);
                var o = this._js_queue.length > 0 && this._js_queue[0].depend;
                var n = b[p.mark];
                if (n) {
                    switch (n.status) {
                        case"complete":
                            if (p.onload) {
                                setTimeout(p.onload, 50)
                            }
                            if (!o) {
                                setTimeout(j.success, 50)
                            }
                            return true;
                        case"active":
                            if (!ol.domCompleted) {
                                return true
                            }
                            var r = 1;
                            var q = function () {
                                var m = p;
                                if (b[m.mark].status == "complete") {
                                    delete j._wait_map[m.mark];
                                    if (m.onload) {
                                        m.onload.call(document)
                                    }
                                    if (!o) {
                                        j.success();
                                        return
                                    }
                                    ol.load(j._js_queue, k);
                                    return
                                }
                                r++;
                                if (r <= 20) {
                                    setTimeout(q, 50)
                                }
                            };
                            setTimeout(q, 50);
                            this._wait_map[p.mark] = true;
                            return !o
                    }
                }
                if (ol.domCompleted) {
                    p.loadType = null
                }
                if (p.loadType == "lazy") {
                    ol.ready(function () {
                        j._load(p)
                    });
                    return true
                }
                if (!p.url) {
                    if (p.uri.substr(0, 7) == "http://" || p.uri.substr(0, 8) == "https://") {
                        p.url = p.uri
                    } else {
                        p.url = ol.libPath + p.uri
                    }
                }
                if (p.type == "js") {
                    b[p.mark] = {status: "active"};
                    if (!ol.domCompleted) {
                        var s = [];
                        s.push('ol._setLoadStatus("' + p.mark + '","complete");');
                        if (!o) {
                            s.push(k.callback)
                        }
                        f(p, s)
                    } else {
                        var s = function () {
                            b[p.mark] = {status: "complete"};
                            if (p.onload) {
                                p.onload.call(document)
                            }
                            if (o) {
                                ol.load(j._js_queue, k)
                            } else {
                                j.success()
                            }
                        };
                        d(p, s);
                        return !o
                    }
                } else {
                    i(p)
                }
                return true
            };
            this.success = function () {
                if (j._js_queue.length > 0) {
                    return
                }
                for (var m in j._wait_map) {
                    return
                }
                if (k.onload) {
                    k.onload.call(document)
                }
                if (k.callback) {
                    ol.ready(k.callback)
                }
            };
            this.init = function () {
                if ("[object object]" == Object.prototype.toString.apply(l)) {
                    this._load(l);
                    return
                } else {
                    this._attach(l);
                    this._insertMark = undefined;
                    while (this._css_queue.length > 0) {
                        this._load(this._css_queue[0])
                    }
                    while (this._js_queue.length > 0 && this._load(this._js_queue[0])) {
                    }
                }
            };
            this.init()
        };
    ol.load = function (k, j) {
        if ("function" == typeof(j)) {
            j = {callback: j}
        } else {
            if (!j) {
                j = {}
            }
        }
        if (!ol.domCompleted && j.loadType == "lazy") {
            ol.ready(function () {
                new c(k, j)
            })
        } else {
            new c(k, j)
        }
    };
    ol.load.define = function (j, k) {
        e[j] = k
    };
    ol.load.remove = function (j) {
        delete e[j]
    };
    ol._setLoadStatus = function (k, j) {
        b[k] = {status: j}
    }
})();
var logger = {
    info: function (b, a) {
        if (!ol.debug) {
            return
        }
        if (typeof(console) != "undefined" && console.log) {
            if (a) {
                console.log("[" + b + "]:" + a)
            } else {
                console.log(b)
            }
        }
    }, warn: function (b, a) {
        if (!ol.debug) {
            return
        }
        if (typeof(console) != "undefined" && console.warn) {
            if (a) {
                console.warn("[" + b + "]:" + a)
            } else {
                console.warn(b)
            }
        }
    }, error: function (b, a) {
        if (!ol.debug) {
            return
        }
        if (typeof(console) != "undefined" && console.error) {
            if (a) {
                console.error("[" + b + "]:" + a)
            } else {
                console.error(b)
            }
        }
    }
};

function log(b, a) {
    logger.info(b, a)
}

(function () {
    var a = document.getElementsByTagName("script"), b = a[a.length - 1];
    var f = b.src.lastIndexOf("/");
    if (f > 0) {
        ol.libPath = scriptPath + "/common/"
    }
    var c = b.getAttribute("namespace");
    if (c) {
        window[c] = ol
    }
    b = null;
    try {
        document.write("<!--[if lte IE 6]><script>ol.isIE6=true;<\/script><![endif]--><!--[if IE 7]><script>ol.isIE7=true;<\/script><![endif]--><!--[if IE 8]><script>ol.isIE8=true;<\/script><![endif]-->")
    } catch (d) {
    }
})();
ol.ready(function () {
    ol.domCompleted = true;
    logger.info("Dom", "Load Complete!")
});
/*!
 * jQuery JavaScript Library v1.4.4
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 11 19:04:53 2010 -0500
 */
(function (E, B) {
    function ka(a, b, d) {
        if (d === B && a.nodeType === 1) {
            d = a.getAttribute("data-" + b);
            if (typeof d === "string") {
                try {
                    d = d === "true" ? true : d === "false" ? false : d === "null" ? null : !c.isNaN(d) ? parseFloat(d) : Ja.test(d) ? c.parseJSON(d) : d
                } catch (e) {
                }
                c.data(a, b, d)
            } else d = B
        }
        return d
    }

    function U() {
        return false
    }

    function ca() {
        return true
    }

    function la(a, b, d) {
        d[0].type = a;
        return c.event.handle.apply(b, d)
    }

    function Ka(a) {
        var b, d, e, f, h, l, k, o, x, r, A, C = [];
        f = [];
        h = c.data(this, this.nodeType ? "events" : "__events__");
        if (typeof h === "function") h =
            h.events;
        if (!(a.liveFired === this || !h || !h.live || a.button && a.type === "click")) {
            if (a.namespace) A = RegExp("(^|\\.)" + a.namespace.split(".").join("\\.(?:.*\\.)?") + "(\\.|$)");
            a.liveFired = this;
            var J = h.live.slice(0);
            for (k = 0; k < J.length; k++) {
                h = J[k];
                h.origType.replace(X, "") === a.type ? f.push(h.selector) : J.splice(k--, 1)
            }
            f = c(a.target).closest(f, a.currentTarget);
            o = 0;
            for (x = f.length; o < x; o++) {
                r = f[o];
                for (k = 0; k < J.length; k++) {
                    h = J[k];
                    if (r.selector === h.selector && (!A || A.test(h.namespace))) {
                        l = r.elem;
                        e = null;
                        if (h.preType === "mouseenter" ||
                            h.preType === "mouseleave") {
                            a.type = h.preType;
                            e = c(a.relatedTarget).closest(h.selector)[0]
                        }
                        if (!e || e !== l) C.push({elem: l, handleObj: h, level: r.level})
                    }
                }
            }
            o = 0;
            for (x = C.length; o < x; o++) {
                f = C[o];
                if (d && f.level > d) break;
                a.currentTarget = f.elem;
                a.data = f.handleObj.data;
                a.handleObj = f.handleObj;
                A = f.handleObj.origHandler.apply(f.elem, arguments);
                if (A === false || a.isPropagationStopped()) {
                    d = f.level;
                    if (A === false) b = false;
                    if (a.isImmediatePropagationStopped()) break
                }
            }
            return b
        }
    }

    function Y(a, b) {
        return (a && a !== "*" ? a + "." : "") + b.replace(La,
            "`").replace(Ma, "&")
    }

    function ma(a, b, d) {
        if (c.isFunction(b)) return c.grep(a, function (f, h) {
            return !!b.call(f, h, f) === d
        }); else if (b.nodeType) return c.grep(a, function (f) {
            return f === b === d
        }); else if (typeof b === "string") {
            var e = c.grep(a, function (f) {
                return f.nodeType === 1
            });
            if (Na.test(b)) return c.filter(b, e, !d); else b = c.filter(b, e)
        }
        return c.grep(a, function (f) {
            return c.inArray(f, b) >= 0 === d
        })
    }

    function na(a, b) {
        var d = 0;
        b.each(function () {
            if (this.nodeName === (a[d] && a[d].nodeName)) {
                var e = c.data(a[d++]), f = c.data(this,
                    e);
                if (e = e && e.events) {
                    delete f.handle;
                    f.events = {};
                    for (var h in e) for (var l in e[h]) c.event.add(this, h, e[h][l], e[h][l].data)
                }
            }
        })
    }

    function Oa(a, b) {
        b.src ? c.ajax({
            url: b.src,
            async: false,
            dataType: "script"
        }) : c.globalEval(b.text || b.textContent || b.innerHTML || "");
        b.parentNode && b.parentNode.removeChild(b)
    }

    function oa(a, b, d) {
        var e = b === "width" ? a.offsetWidth : a.offsetHeight;
        if (d === "border") return e;
        c.each(b === "width" ? Pa : Qa, function () {
            d || (e -= parseFloat(c.css(a, "padding" + this)) || 0);
            if (d === "margin") e += parseFloat(c.css(a,
                "margin" + this)) || 0; else e -= parseFloat(c.css(a, "border" + this + "Width")) || 0
        });
        return e
    }

    function da(a, b, d, e) {
        if (c.isArray(b) && b.length) c.each(b, function (f, h) {
            d || Ra.test(a) ? e(a, h) : da(a + "[" + (typeof h === "object" || c.isArray(h) ? f : "") + "]", h, d, e)
        }); else if (!d && b != null && typeof b === "object") c.isEmptyObject(b) ? e(a, "") : c.each(b, function (f, h) {
            da(a + "[" + f + "]", h, d, e)
        }); else e(a, b)
    }

    function S(a, b) {
        var d = {};
        c.each(pa.concat.apply([], pa.slice(0, b)), function () {
            d[this] = a
        });
        return d
    }

    function qa(a) {
        if (!ea[a]) {
            var b = c("<" +
                a + ">").appendTo("body"), d = b.css("display");
            b.remove();
            if (d === "none" || d === "") d = "block";
            ea[a] = d
        }
        return ea[a]
    }

    function fa(a) {
        return c.isWindow(a) ? a : a.nodeType === 9 ? a.defaultView || a.parentWindow : false
    }

    var t = E.document, c = function () {
        function a() {
            if (!b.isReady) {
                try {
                    t.documentElement.doScroll("left")
                } catch (j) {
                    setTimeout(a, 1);
                    return
                }
                b.ready()
            }
        }

        var b = function (j, s) {
                return new b.fn.init(j, s)
            }, d = E.jQuery, e = E.$, f, h = /^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/, l = /\S/, k = /^\s+/, o = /\s+$/,
            x = /\W/, r = /\d/, A = /^<(\w+)\s*\/?>(?:<\/\1>)?$/,
            C = /^[\],:{}\s]*$/, J = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
            w = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, I = /(?:^|:|,)(?:\s*\[)+/g,
            L = /(webkit)[ \/]([\w.]+)/, g = /(opera)(?:.*version)?[ \/]([\w.]+)/, i = /(msie) ([\w.]+)/,
            n = /(mozilla)(?:.*? rv:([\w.]+))?/, m = navigator.userAgent, p = false, q = [], u,
            y = Object.prototype.toString, F = Object.prototype.hasOwnProperty, M = Array.prototype.push,
            N = Array.prototype.slice, O = String.prototype.trim, D = Array.prototype.indexOf, R = {};
        b.fn = b.prototype = {
            init: function (j,
                            s) {
                var v, z, H;
                if (!j) return this;
                if (j.nodeType) {
                    this.context = this[0] = j;
                    this.length = 1;
                    return this
                }
                if (j === "body" && !s && t.body) {
                    this.context = t;
                    this[0] = t.body;
                    this.selector = "body";
                    this.length = 1;
                    return this
                }
                if (typeof j === "string") if ((v = h.exec(j)) && (v[1] || !s)) if (v[1]) {
                    H = s ? s.ownerDocument || s : t;
                    if (z = A.exec(j)) if (b.isPlainObject(s)) {
                        j = [t.createElement(z[1])];
                        b.fn.attr.call(j, s, true)
                    } else j = [H.createElement(z[1])]; else {
                        z = b.buildFragment([v[1]], [H]);
                        j = (z.cacheable ? z.fragment.cloneNode(true) : z.fragment).childNodes
                    }
                    return b.merge(this,
                        j)
                } else {
                    if ((z = t.getElementById(v[2])) && z.parentNode) {
                        if (z.id !== v[2]) return f.find(j);
                        this.length = 1;
                        this[0] = z
                    }
                    this.context = t;
                    this.selector = j;
                    return this
                } else if (!s && !x.test(j)) {
                    this.selector = j;
                    this.context = t;
                    j = t.getElementsByTagName(j);
                    return b.merge(this, j)
                } else return !s || s.jquery ? (s || f).find(j) : b(s).find(j); else if (b.isFunction(j)) return f.ready(j);
                if (j.selector !== B) {
                    this.selector = j.selector;
                    this.context = j.context
                }
                return b.makeArray(j, this)
            }, selector: "", jquery: "1.4.4", length: 0, size: function () {
                return this.length
            },
            toArray: function () {
                return N.call(this, 0)
            }, get: function (j) {
                return j == null ? this.toArray() : j < 0 ? this.slice(j)[0] : this[j]
            }, pushStack: function (j, s, v) {
                var z = b();
                b.isArray(j) ? M.apply(z, j) : b.merge(z, j);
                z.prevObject = this;
                z.context = this.context;
                if (s === "find") z.selector = this.selector + (this.selector ? " " : "") + v; else if (s) z.selector = this.selector + "." + s + "(" + v + ")";
                return z
            }, each: function (j, s) {
                return b.each(this, j, s)
            }, ready: function (j) {
                b.bindReady();
                if (b.isReady) j.call(t, b); else q && q.push(j);
                return this
            }, eq: function (j) {
                return j ===
                -1 ? this.slice(j) : this.slice(j, +j + 1)
            }, first: function () {
                return this.eq(0)
            }, last: function () {
                return this.eq(-1)
            }, slice: function () {
                return this.pushStack(N.apply(this, arguments), "slice", N.call(arguments).join(","))
            }, map: function (j) {
                return this.pushStack(b.map(this, function (s, v) {
                    return j.call(s, v, s)
                }))
            }, end: function () {
                return this.prevObject || b(null)
            }, push: M, sort: [].sort, splice: [].splice
        };
        b.fn.init.prototype = b.fn;
        b.extend = b.fn.extend = function () {
            var j, s, v, z, H, G = arguments[0] || {}, K = 1, Q = arguments.length, ga = false;
            if (typeof G === "boolean") {
                ga = G;
                G = arguments[1] || {};
                K = 2
            }
            if (typeof G !== "object" && !b.isFunction(G)) G = {};
            if (Q === K) {
                G = this;
                --K
            }
            for (; K < Q; K++) if ((j = arguments[K]) != null) for (s in j) {
                v = G[s];
                z = j[s];
                if (G !== z) if (ga && z && (b.isPlainObject(z) || (H = b.isArray(z)))) {
                    if (H) {
                        H = false;
                        v = v && b.isArray(v) ? v : []
                    } else v = v && b.isPlainObject(v) ? v : {};
                    G[s] = b.extend(ga, v, z)
                } else if (z !== B) G[s] = z
            }
            return G
        };
        b.extend({
            noConflict: function (j) {
                E.$ = e;
                if (j) E.jQuery = d;
                return b
            }, isReady: false, readyWait: 1, ready: function (j) {
                j === true && b.readyWait--;
                if (!b.readyWait || j !== true && !b.isReady) {
                    if (!t.body) return setTimeout(b.ready, 1);
                    b.isReady = true;
                    if (!(j !== true && --b.readyWait > 0)) if (q) {
                        var s = 0, v = q;
                        for (q = null; j = v[s++];) j.call(t, b);
                        b.fn.trigger && b(t).trigger("ready").unbind("ready")
                    }
                }
            }, bindReady: function () {
                if (!p) {
                    p = true;
                    if (t.readyState === "complete") return setTimeout(b.ready, 1);
                    if (t.addEventListener) {
                        t.addEventListener("DOMContentLoaded", u, false);
                        E.addEventListener("load", b.ready, false)
                    } else if (t.attachEvent) {
                        t.attachEvent("onreadystatechange", u);
                        E.attachEvent("onload",
                            b.ready);
                        var j = false;
                        try {
                            j = E.frameElement == null
                        } catch (s) {
                        }
                        t.documentElement.doScroll && j && a()
                    }
                }
            }, isFunction: function (j) {
                return b.type(j) === "function"
            }, isArray: Array.isArray || function (j) {
                return b.type(j) === "array"
            }, isWindow: function (j) {
                return j && typeof j === "object" && "setInterval" in j
            }, isNaN: function (j) {
                return j == null || !r.test(j) || isNaN(j)
            }, type: function (j) {
                return j == null ? String(j) : R[y.call(j)] || "object"
            }, isPlainObject: function (j) {
                if (!j || b.type(j) !== "object" || j.nodeType || b.isWindow(j)) return false;
                if (j.constructor &&
                    !F.call(j, "constructor") && !F.call(j.constructor.prototype, "isPrototypeOf")) return false;
                for (var s in j) ;
                return s === B || F.call(j, s)
            }, isEmptyObject: function (j) {
                for (var s in j) return false;
                return true
            }, error: function (j) {
                throw j;
            }, parseJSON: function (j) {
                if (typeof j !== "string" || !j) return null;
                j = b.trim(j);
                if (C.test(j.replace(J, "@").replace(w, "]").replace(I, ""))) return E.JSON && E.JSON.parse ? E.JSON.parse(j) : (new Function("return " + j))(); else b.error("Invalid JSON: " + j)
            }, noop: function () {
            }, globalEval: function (j) {
                if (j &&
                    l.test(j)) {
                    var s = t.getElementsByTagName("head")[0] || t.documentElement, v = t.createElement("script");
                    v.type = "text/javascript";
                    if (b.support.scriptEval) v.appendChild(t.createTextNode(j)); else v.text = j;
                    s.insertBefore(v, s.firstChild);
                    s.removeChild(v)
                }
            }, nodeName: function (j, s) {
                return j.nodeName && j.nodeName.toUpperCase() === s.toUpperCase()
            }, each: function (j, s, v) {
                var z, H = 0, G = j.length, K = G === B || b.isFunction(j);
                if (v) if (K) for (z in j) {
                    if (s.apply(j[z], v) === false) break
                } else for (; H < G;) {
                    if (s.apply(j[H++], v) === false) break
                } else if (K) for (z in j) {
                    if (s.call(j[z],
                        z, j[z]) === false) break
                } else for (v = j[0]; H < G && s.call(v, H, v) !== false; v = j[++H]) ;
                return j
            }, trim: O ? function (j) {
                return j == null ? "" : O.call(j)
            } : function (j) {
                return j == null ? "" : j.toString().replace(k, "").replace(o, "")
            }, makeArray: function (j, s) {
                var v = s || [];
                if (j != null) {
                    var z = b.type(j);
                    j.length == null || z === "string" || z === "function" || z === "regexp" || b.isWindow(j) ? M.call(v, j) : b.merge(v, j)
                }
                return v
            }, inArray: function (j, s) {
                if (s.indexOf) return s.indexOf(j);
                for (var v = 0, z = s.length; v < z; v++) if (s[v] === j) return v;
                return -1
            }, merge: function (j,
                                s) {
                var v = j.length, z = 0;
                if (typeof s.length === "number") for (var H = s.length; z < H; z++) j[v++] = s[z]; else for (; s[z] !== B;) j[v++] = s[z++];
                j.length = v;
                return j
            }, grep: function (j, s, v) {
                var z = [], H;
                v = !!v;
                for (var G = 0, K = j.length; G < K; G++) {
                    H = !!s(j[G], G);
                    v !== H && z.push(j[G])
                }
                return z
            }, map: function (j, s, v) {
                for (var z = [], H, G = 0, K = j.length; G < K; G++) {
                    H = s(j[G], G, v);
                    if (H != null) z[z.length] = H
                }
                return z.concat.apply([], z)
            }, guid: 1, proxy: function (j, s, v) {
                if (arguments.length === 2) if (typeof s === "string") {
                    v = j;
                    j = v[s];
                    s = B
                } else if (s && !b.isFunction(s)) {
                    v =
                        s;
                    s = B
                }
                if (!s && j) s = function () {
                    return j.apply(v || this, arguments)
                };
                if (j) s.guid = j.guid = j.guid || s.guid || b.guid++;
                return s
            }, access: function (j, s, v, z, H, G) {
                var K = j.length;
                if (typeof s === "object") {
                    for (var Q in s) b.access(j, Q, s[Q], z, H, v);
                    return j
                }
                if (v !== B) {
                    z = !G && z && b.isFunction(v);
                    for (Q = 0; Q < K; Q++) H(j[Q], s, z ? v.call(j[Q], Q, H(j[Q], s)) : v, G);
                    return j
                }
                return K ? H(j[0], s) : B
            }, now: function () {
                return (new Date).getTime()
            }, uaMatch: function (j) {
                j = j.toLowerCase();
                j = L.exec(j) || g.exec(j) || i.exec(j) || j.indexOf("compatible") < 0 && n.exec(j) ||
                    [];
                return {browser: j[1] || "", version: j[2] || "0"}
            }, browser: {}
        });
        b.each("Boolean Number String Function Array Date RegExp Object".split(" "), function (j, s) {
            R["[object " + s + "]"] = s.toLowerCase()
        });
        m = b.uaMatch(m);
        if (m.browser) {
            b.browser[m.browser] = true;
            b.browser.version = m.version
        }
        if (b.browser.webkit) b.browser.safari = true;
        if (D) b.inArray = function (j, s) {
            return D.call(s, j)
        };
        if (!/\s/.test("\u00a0")) {
            k = /^[\s\xA0]+/;
            o = /[\s\xA0]+$/
        }
        f = b(t);
        if (t.addEventListener) u = function () {
            t.removeEventListener("DOMContentLoaded", u,
                false);
            b.ready()
        }; else if (t.attachEvent) u = function () {
            if (t.readyState === "complete") {
                t.detachEvent("onreadystatechange", u);
                b.ready()
            }
        };
        return E.jQuery = E.$ = b
    }();
    (function () {
        c.support = {};
        var a = t.documentElement, b = t.createElement("script"), d = t.createElement("div"), e = "script" + c.now();
        d.style.display = "none";
        d.innerHTML = "   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
        var f = d.getElementsByTagName("*"), h = d.getElementsByTagName("a")[0], l = t.createElement("select"),
            k = l.appendChild(t.createElement("option"));
        if (!(!f || !f.length || !h)) {
            c.support = {
                leadingWhitespace: d.firstChild.nodeType === 3,
                tbody: !d.getElementsByTagName("tbody").length,
                htmlSerialize: !!d.getElementsByTagName("link").length,
                style: /red/.test(h.getAttribute("style")),
                hrefNormalized: h.getAttribute("href") === "/a",
                opacity: /^0.55$/.test(h.style.opacity),
                cssFloat: !!h.style.cssFloat,
                checkOn: d.getElementsByTagName("input")[0].value === "on",
                optSelected: k.selected,
                deleteExpando: true,
                optDisabled: false,
                checkClone: false,
                scriptEval: false,
                noCloneEvent: true,
                boxModel: null,
                inlineBlockNeedsLayout: false,
                shrinkWrapBlocks: false,
                reliableHiddenOffsets: true
            };
            l.disabled = true;
            c.support.optDisabled = !k.disabled;
            b.type = "text/javascript";
            try {
                b.appendChild(t.createTextNode("window." + e + "=1;"))
            } catch (o) {
            }
            a.insertBefore(b, a.firstChild);
            if (E[e]) {
                c.support.scriptEval = true;
                delete E[e]
            }
            try {
                delete b.test
            } catch (x) {
                c.support.deleteExpando = false
            }
            a.removeChild(b);
            if (d.attachEvent && d.fireEvent) {
                d.attachEvent("onclick", function r() {
                    c.support.noCloneEvent =
                        false;
                    d.detachEvent("onclick", r)
                });
                d.cloneNode(true).fireEvent("onclick")
            }
            d = t.createElement("div");
            d.innerHTML = "<input type='radio' name='radiotest' checked='checked'/>";
            a = t.createDocumentFragment();
            a.appendChild(d.firstChild);
            c.support.checkClone = a.cloneNode(true).cloneNode(true).lastChild.checked;
            c(function () {
                var r = t.createElement("div");
                r.style.width = r.style.paddingLeft = "1px";
                t.body.appendChild(r);
                c.boxModel = c.support.boxModel = r.offsetWidth === 2;
                if ("zoom" in r.style) {
                    r.style.display = "inline";
                    r.style.zoom =
                        1;
                    c.support.inlineBlockNeedsLayout = r.offsetWidth === 2;
                    r.style.display = "";
                    r.innerHTML = "<div style='width:4px;'></div>";
                    c.support.shrinkWrapBlocks = r.offsetWidth !== 2
                }
                r.innerHTML = "<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";
                var A = r.getElementsByTagName("td");
                c.support.reliableHiddenOffsets = A[0].offsetHeight === 0;
                A[0].style.display = "";
                A[1].style.display = "none";
                c.support.reliableHiddenOffsets = c.support.reliableHiddenOffsets && A[0].offsetHeight === 0;
                r.innerHTML = "";
                t.body.removeChild(r).style.display =
                    "none"
            });
            a = function (r) {
                var A = t.createElement("div");
                r = "on" + r;
                var C = r in A;
                if (!C) {
                    A.setAttribute(r, "return;");
                    C = typeof A[r] === "function"
                }
                return C
            };
            c.support.submitBubbles = a("submit");
            c.support.changeBubbles = a("change");
            a = b = d = f = h = null
        }
    })();
    var ra = {}, Ja = /^(?:\{.*\}|\[.*\])$/;
    c.extend({
        cache: {},
        uuid: 0,
        expando: "jQuery" + c.now(),
        noData: {embed: true, object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000", applet: true},
        data: function (a, b, d) {
            if (c.acceptData(a)) {
                a = a == E ? ra : a;
                var e = a.nodeType, f = e ? a[c.expando] : null, h =
                    c.cache;
                if (!(e && !f && typeof b === "string" && d === B)) {
                    if (e) f || (a[c.expando] = f = ++c.uuid); else h = a;
                    if (typeof b === "object") if (e) h[f] = c.extend(h[f], b); else c.extend(h, b); else if (e && !h[f]) h[f] = {};
                    a = e ? h[f] : h;
                    if (d !== B) a[b] = d;
                    return typeof b === "string" ? a[b] : a
                }
            }
        },
        removeData: function (a, b) {
            if (c.acceptData(a)) {
                a = a == E ? ra : a;
                var d = a.nodeType, e = d ? a[c.expando] : a, f = c.cache, h = d ? f[e] : e;
                if (b) {
                    if (h) {
                        delete h[b];
                        d && c.isEmptyObject(h) && c.removeData(a)
                    }
                } else if (d && c.support.deleteExpando) delete a[c.expando]; else if (a.removeAttribute) a.removeAttribute(c.expando);
                else if (d) delete f[e]; else for (var l in a) delete a[l]
            }
        },
        acceptData: function (a) {
            if (a.nodeName) {
                var b = c.noData[a.nodeName.toLowerCase()];
                if (b) return !(b === true || a.getAttribute("classid") !== b)
            }
            return true
        }
    });
    c.fn.extend({
        data: function (a, b) {
            var d = null;
            if (typeof a === "undefined") {
                if (this.length) {
                    var e = this[0].attributes, f;
                    d = c.data(this[0]);
                    for (var h = 0, l = e.length; h < l; h++) {
                        f = e[h].name;
                        if (f.indexOf("data-") === 0) {
                            f = f.substr(5);
                            ka(this[0], f, d[f])
                        }
                    }
                }
                return d
            } else if (typeof a === "object") return this.each(function () {
                c.data(this,
                    a)
            });
            var k = a.split(".");
            k[1] = k[1] ? "." + k[1] : "";
            if (b === B) {
                d = this.triggerHandler("getData" + k[1] + "!", [k[0]]);
                if (d === B && this.length) {
                    d = c.data(this[0], a);
                    d = ka(this[0], a, d)
                }
                return d === B && k[1] ? this.data(k[0]) : d
            } else return this.each(function () {
                var o = c(this), x = [k[0], b];
                o.triggerHandler("setData" + k[1] + "!", x);
                c.data(this, a, b);
                o.triggerHandler("changeData" + k[1] + "!", x)
            })
        }, removeData: function (a) {
            return this.each(function () {
                c.removeData(this, a)
            })
        }
    });
    c.extend({
        queue: function (a, b, d) {
            if (a) {
                b = (b || "fx") + "queue";
                var e =
                    c.data(a, b);
                if (!d) return e || [];
                if (!e || c.isArray(d)) e = c.data(a, b, c.makeArray(d)); else e.push(d);
                return e
            }
        }, dequeue: function (a, b) {
            b = b || "fx";
            var d = c.queue(a, b), e = d.shift();
            if (e === "inprogress") e = d.shift();
            if (e) {
                b === "fx" && d.unshift("inprogress");
                e.call(a, function () {
                    c.dequeue(a, b)
                })
            }
        }
    });
    c.fn.extend({
        queue: function (a, b) {
            if (typeof a !== "string") {
                b = a;
                a = "fx"
            }
            if (b === B) return c.queue(this[0], a);
            return this.each(function () {
                var d = c.queue(this, a, b);
                a === "fx" && d[0] !== "inprogress" && c.dequeue(this, a)
            })
        }, dequeue: function (a) {
            return this.each(function () {
                c.dequeue(this,
                    a)
            })
        }, delay: function (a, b) {
            a = c.fx ? c.fx.speeds[a] || a : a;
            b = b || "fx";
            return this.queue(b, function () {
                var d = this;
                setTimeout(function () {
                    c.dequeue(d, b)
                }, a)
            })
        }, clearQueue: function (a) {
            return this.queue(a || "fx", [])
        }
    });
    var sa = /[\n\t]/g, ha = /\s+/, Sa = /\r/g, Ta = /^(?:href|src|style)$/, Ua = /^(?:button|input)$/i,
        Va = /^(?:button|input|object|select|textarea)$/i, Wa = /^a(?:rea)?$/i, ta = /^(?:radio|checkbox)$/i;
    c.props = {
        "for": "htmlFor",
        "class": "className",
        readonly: "readOnly",
        maxlength: "maxLength",
        cellspacing: "cellSpacing",
        rowspan: "rowSpan",
        colspan: "colSpan",
        tabindex: "tabIndex",
        usemap: "useMap",
        frameborder: "frameBorder"
    };
    c.fn.extend({
        attr: function (a, b) {
            return c.access(this, a, b, true, c.attr)
        }, removeAttr: function (a) {
            return this.each(function () {
                c.attr(this, a, "");
                this.nodeType === 1 && this.removeAttribute(a)
            })
        }, addClass: function (a) {
            if (c.isFunction(a)) return this.each(function (x) {
                var r = c(this);
                r.addClass(a.call(this, x, r.attr("class")))
            });
            if (a && typeof a === "string") for (var b = (a || "").split(ha), d = 0, e = this.length; d < e; d++) {
                var f = this[d];
                if (f.nodeType ===
                    1) if (f.className) {
                    for (var h = " " + f.className + " ", l = f.className, k = 0, o = b.length; k < o; k++) if (h.indexOf(" " + b[k] + " ") < 0) l += " " + b[k];
                    f.className = c.trim(l)
                } else f.className = a
            }
            return this
        }, removeClass: function (a) {
            if (c.isFunction(a)) return this.each(function (o) {
                var x = c(this);
                x.removeClass(a.call(this, o, x.attr("class")))
            });
            if (a && typeof a === "string" || a === B) for (var b = (a || "").split(ha), d = 0, e = this.length; d < e; d++) {
                var f = this[d];
                if (f.nodeType === 1 && f.className) if (a) {
                    for (var h = (" " + f.className + " ").replace(sa, " "),
                             l = 0, k = b.length; l < k; l++) h = h.replace(" " + b[l] + " ", " ");
                    f.className = c.trim(h)
                } else f.className = ""
            }
            return this
        }, toggleClass: function (a, b) {
            var d = typeof a, e = typeof b === "boolean";
            if (c.isFunction(a)) return this.each(function (f) {
                var h = c(this);
                h.toggleClass(a.call(this, f, h.attr("class"), b), b)
            });
            return this.each(function () {
                if (d === "string") for (var f, h = 0, l = c(this), k = b, o = a.split(ha); f = o[h++];) {
                    k = e ? k : !l.hasClass(f);
                    l[k ? "addClass" : "removeClass"](f)
                } else if (d === "undefined" || d === "boolean") {
                    this.className && c.data(this,
                        "__className__", this.className);
                    this.className = this.className || a === false ? "" : c.data(this, "__className__") || ""
                }
            })
        }, hasClass: function (a) {
            a = " " + a + " ";
            for (var b = 0, d = this.length; b < d; b++) if ((" " + this[b].className + " ").replace(sa, " ").indexOf(a) > -1) return true;
            return false
        }, val: function (a) {
            if (!arguments.length) {
                var b = this[0];
                if (b) {
                    if (c.nodeName(b, "option")) {
                        var d = b.attributes.value;
                        return !d || d.specified ? b.value : b.text
                    }
                    if (c.nodeName(b, "select")) {
                        var e = b.selectedIndex;
                        d = [];
                        var f = b.options;
                        b = b.type === "select-one";
                        if (e < 0) return null;
                        var h = b ? e : 0;
                        for (e = b ? e + 1 : f.length; h < e; h++) {
                            var l = f[h];
                            if (l.selected && (c.support.optDisabled ? !l.disabled : l.getAttribute("disabled") === null) && (!l.parentNode.disabled || !c.nodeName(l.parentNode, "optgroup"))) {
                                a = c(l).val();
                                if (b) return a;
                                d.push(a)
                            }
                        }
                        return d
                    }
                    if (ta.test(b.type) && !c.support.checkOn) return b.getAttribute("value") === null ? "on" : b.value;
                    return (b.value || "").replace(Sa, "")
                }
                return B
            }
            var k = c.isFunction(a);
            return this.each(function (o) {
                var x = c(this), r = a;
                if (this.nodeType === 1) {
                    if (k) r =
                        a.call(this, o, x.val());
                    if (r == null) r = ""; else if (typeof r === "number") r += ""; else if (c.isArray(r)) r = c.map(r, function (C) {
                        return C == null ? "" : C + ""
                    });
                    if (c.isArray(r) && ta.test(this.type)) this.checked = c.inArray(x.val(), r) >= 0; else if (c.nodeName(this, "select")) {
                        var A = c.makeArray(r);
                        c("option", this).each(function () {
                            this.selected = c.inArray(c(this).val(), A) >= 0
                        });
                        if (!A.length) this.selectedIndex = -1
                    } else this.value = r
                }
            })
        }
    });
    c.extend({
        attrFn: {val: true, css: true, html: true, text: true, data: true, width: true, height: true, offset: true},
        attr: function (a, b, d, e) {
            if (!a || a.nodeType === 3 || a.nodeType === 8) return B;
            if (e && b in c.attrFn) return c(a)[b](d);
            e = a.nodeType !== 1 || !c.isXMLDoc(a);
            var f = d !== B;
            b = e && c.props[b] || b;
            var h = Ta.test(b);
            if ((b in a || a[b] !== B) && e && !h) {
                if (f) {
                    b === "type" && Ua.test(a.nodeName) && a.parentNode && c.error("type property can't be changed");
                    if (d === null) a.nodeType === 1 && a.removeAttribute(b); else a[b] = d
                }
                if (c.nodeName(a, "form") && a.getAttributeNode(b)) return a.getAttributeNode(b).nodeValue;
                if (b === "tabIndex") return (b = a.getAttributeNode("tabIndex")) &&
                b.specified ? b.value : Va.test(a.nodeName) || Wa.test(a.nodeName) && a.href ? 0 : B;
                return a[b]
            }
            if (!c.support.style && e && b === "style") {
                if (f) a.style.cssText = "" + d;
                return a.style.cssText
            }
            f && a.setAttribute(b, "" + d);
            if (!a.attributes[b] && a.hasAttribute && !a.hasAttribute(b)) return B;
            a = !c.support.hrefNormalized && e && h ? a.getAttribute(b, 2) : a.getAttribute(b);
            return a === null ? B : a
        }
    });
    var X = /\.(.*)$/, ia = /^(?:textarea|input|select)$/i, La = /\./g, Ma = / /g, Xa = /[^\w\s.|`]/g,
        Ya = function (a) {
            return a.replace(Xa, "\\$&")
        }, ua = {focusin: 0, focusout: 0};
    c.event = {
        add: function (a, b, d, e) {
            if (!(a.nodeType === 3 || a.nodeType === 8)) {
                if (c.isWindow(a) && a !== E && !a.frameElement) a = E;
                if (d === false) d = U; else if (!d) return;
                var f, h;
                if (d.handler) {
                    f = d;
                    d = f.handler
                }
                if (!d.guid) d.guid = c.guid++;
                if (h = c.data(a)) {
                    var l = a.nodeType ? "events" : "__events__", k = h[l], o = h.handle;
                    if (typeof k === "function") {
                        o = k.handle;
                        k = k.events
                    } else if (!k) {
                        a.nodeType || (h[l] = h = function () {
                        });
                        h.events = k = {}
                    }
                    if (!o) h.handle = o = function () {
                        return typeof c !== "undefined" && !c.event.triggered ? c.event.handle.apply(o.elem,
                            arguments) : B
                    };
                    o.elem = a;
                    b = b.split(" ");
                    for (var x = 0, r; l = b[x++];) {
                        h = f ? c.extend({}, f) : {handler: d, data: e};
                        if (l.indexOf(".") > -1) {
                            r = l.split(".");
                            l = r.shift();
                            h.namespace = r.slice(0).sort().join(".")
                        } else {
                            r = [];
                            h.namespace = ""
                        }
                        h.type = l;
                        if (!h.guid) h.guid = d.guid;
                        var A = k[l], C = c.event.special[l] || {};
                        if (!A) {
                            A = k[l] = [];
                            if (!C.setup || C.setup.call(a, e, r, o) === false) if (a.addEventListener) a.addEventListener(l, o, false); else a.attachEvent && a.attachEvent("on" + l, o)
                        }
                        if (C.add) {
                            C.add.call(a, h);
                            if (!h.handler.guid) h.handler.guid =
                                d.guid
                        }
                        A.push(h);
                        c.event.global[l] = true
                    }
                    a = null
                }
            }
        },
        global: {},
        remove: function (a, b, d, e) {
            if (!(a.nodeType === 3 || a.nodeType === 8)) {
                if (d === false) d = U;
                var f, h, l = 0, k, o, x, r, A, C, J = a.nodeType ? "events" : "__events__", w = c.data(a),
                    I = w && w[J];
                if (w && I) {
                    if (typeof I === "function") {
                        w = I;
                        I = I.events
                    }
                    if (b && b.type) {
                        d = b.handler;
                        b = b.type
                    }
                    if (!b || typeof b === "string" && b.charAt(0) === ".") {
                        b = b || "";
                        for (f in I) c.event.remove(a, f + b)
                    } else {
                        for (b = b.split(" "); f = b[l++];) {
                            r = f;
                            k = f.indexOf(".") < 0;
                            o = [];
                            if (!k) {
                                o = f.split(".");
                                f = o.shift();
                                x = RegExp("(^|\\.)" +
                                    c.map(o.slice(0).sort(), Ya).join("\\.(?:.*\\.)?") + "(\\.|$)")
                            }
                            if (A = I[f]) if (d) {
                                r = c.event.special[f] || {};
                                for (h = e || 0; h < A.length; h++) {
                                    C = A[h];
                                    if (d.guid === C.guid) {
                                        if (k || x.test(C.namespace)) {
                                            e == null && A.splice(h--, 1);
                                            r.remove && r.remove.call(a, C)
                                        }
                                        if (e != null) break
                                    }
                                }
                                if (A.length === 0 || e != null && A.length === 1) {
                                    if (!r.teardown || r.teardown.call(a, o) === false) c.removeEvent(a, f, w.handle);
                                    delete I[f]
                                }
                            } else for (h = 0; h < A.length; h++) {
                                C = A[h];
                                if (k || x.test(C.namespace)) {
                                    c.event.remove(a, r, C.handler, h);
                                    A.splice(h--, 1)
                                }
                            }
                        }
                        if (c.isEmptyObject(I)) {
                            if (b =
                                w.handle) b.elem = null;
                            delete w.events;
                            delete w.handle;
                            if (typeof w === "function") c.removeData(a, J); else c.isEmptyObject(w) && c.removeData(a)
                        }
                    }
                }
            }
        },
        trigger: function (a, b, d, e) {
            var f = a.type || a;
            if (!e) {
                a = typeof a === "object" ? a[c.expando] ? a : c.extend(c.Event(f), a) : c.Event(f);
                if (f.indexOf("!") >= 0) {
                    a.type = f = f.slice(0, -1);
                    a.exclusive = true
                }
                if (!d) {
                    a.stopPropagation();
                    c.event.global[f] && c.each(c.cache, function () {
                        this.events && this.events[f] && c.event.trigger(a, b, this.handle.elem)
                    })
                }
                if (!d || d.nodeType === 3 || d.nodeType ===
                    8) return B;
                a.result = B;
                a.target = d;
                b = c.makeArray(b);
                b.unshift(a)
            }
            a.currentTarget = d;
            (e = d.nodeType ? c.data(d, "handle") : (c.data(d, "__events__") || {}).handle) && e.apply(d, b);
            e = d.parentNode || d.ownerDocument;
            try {
                if (!(d && d.nodeName && c.noData[d.nodeName.toLowerCase()])) if (d["on" + f] && d["on" + f].apply(d, b) === false) {
                    a.result = false;
                    a.preventDefault()
                }
            } catch (h) {
            }
            if (!a.isPropagationStopped() && e) c.event.trigger(a, b, e, true); else if (!a.isDefaultPrevented()) {
                var l;
                e = a.target;
                var k = f.replace(X, ""), o = c.nodeName(e, "a") && k ===
                    "click", x = c.event.special[k] || {};
                if ((!x._default || x._default.call(d, a) === false) && !o && !(e && e.nodeName && c.noData[e.nodeName.toLowerCase()])) {
                    try {
                        if (e[k]) {
                            if (l = e["on" + k]) e["on" + k] = null;
                            c.event.triggered = true;
                            e[k]()
                        }
                    } catch (r) {
                    }
                    if (l) e["on" + k] = l;
                    c.event.triggered = false
                }
            }
        },
        handle: function (a) {
            var b, d, e, f;
            d = [];
            var h = c.makeArray(arguments);
            a = h[0] = c.event.fix(a || E.event);
            a.currentTarget = this;
            b = a.type.indexOf(".") < 0 && !a.exclusive;
            if (!b) {
                e = a.type.split(".");
                a.type = e.shift();
                d = e.slice(0).sort();
                e = RegExp("(^|\\.)" +
                    d.join("\\.(?:.*\\.)?") + "(\\.|$)")
            }
            a.namespace = a.namespace || d.join(".");
            f = c.data(this, this.nodeType ? "events" : "__events__");
            if (typeof f === "function") f = f.events;
            d = (f || {})[a.type];
            if (f && d) {
                d = d.slice(0);
                f = 0;
                for (var l = d.length; f < l; f++) {
                    var k = d[f];
                    if (b || e.test(k.namespace)) {
                        a.handler = k.handler;
                        a.data = k.data;
                        a.handleObj = k;
                        k = k.handler.apply(this, h);
                        if (k !== B) {
                            a.result = k;
                            if (k === false) {
                                a.preventDefault();
                                a.stopPropagation()
                            }
                        }
                        if (a.isImmediatePropagationStopped()) break
                    }
                }
            }
            return a.result
        },
        props: "altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
        fix: function (a) {
            if (a[c.expando]) return a;
            var b = a;
            a = c.Event(b);
            for (var d = this.props.length, e; d;) {
                e = this.props[--d];
                a[e] = b[e]
            }
            if (!a.target) a.target = a.srcElement || t;
            if (a.target.nodeType === 3) a.target = a.target.parentNode;
            if (!a.relatedTarget && a.fromElement) a.relatedTarget = a.fromElement === a.target ? a.toElement : a.fromElement;
            if (a.pageX == null && a.clientX != null) {
                b = t.documentElement;
                d = t.body;
                a.pageX = a.clientX + (b && b.scrollLeft || d && d.scrollLeft || 0) - (b && b.clientLeft || d && d.clientLeft || 0);
                a.pageY = a.clientY + (b && b.scrollTop ||
                    d && d.scrollTop || 0) - (b && b.clientTop || d && d.clientTop || 0)
            }
            if (a.which == null && (a.charCode != null || a.keyCode != null)) a.which = a.charCode != null ? a.charCode : a.keyCode;
            if (!a.metaKey && a.ctrlKey) a.metaKey = a.ctrlKey;
            if (!a.which && a.button !== B) a.which = a.button & 1 ? 1 : a.button & 2 ? 3 : a.button & 4 ? 2 : 0;
            return a
        },
        guid: 1E8,
        proxy: c.proxy,
        special: {
            ready: {setup: c.bindReady, teardown: c.noop}, live: {
                add: function (a) {
                    c.event.add(this, Y(a.origType, a.selector), c.extend({}, a, {handler: Ka, guid: a.handler.guid}))
                }, remove: function (a) {
                    c.event.remove(this,
                        Y(a.origType, a.selector), a)
                }
            }, beforeunload: {
                setup: function (a, b, d) {
                    if (c.isWindow(this)) this.onbeforeunload = d
                }, teardown: function (a, b) {
                    if (this.onbeforeunload === b) this.onbeforeunload = null
                }
            }
        }
    };
    c.removeEvent = t.removeEventListener ? function (a, b, d) {
        a.removeEventListener && a.removeEventListener(b, d, false)
    } : function (a, b, d) {
        a.detachEvent && a.detachEvent("on" + b, d)
    };
    c.Event = function (a) {
        if (!this.preventDefault) return new c.Event(a);
        if (a && a.type) {
            this.originalEvent = a;
            this.type = a.type
        } else this.type = a;
        this.timeStamp =
            c.now();
        this[c.expando] = true
    };
    c.Event.prototype = {
        preventDefault: function () {
            this.isDefaultPrevented = ca;
            var a = this.originalEvent;
            if (a) if (a.preventDefault) a.preventDefault(); else a.returnValue = false
        }, stopPropagation: function () {
            this.isPropagationStopped = ca;
            var a = this.originalEvent;
            if (a) {
                a.stopPropagation && a.stopPropagation();
                a.cancelBubble = true
            }
        }, stopImmediatePropagation: function () {
            this.isImmediatePropagationStopped = ca;
            this.stopPropagation()
        }, isDefaultPrevented: U, isPropagationStopped: U, isImmediatePropagationStopped: U
    };
    var va = function (a) {
        var b = a.relatedTarget;
        try {
            for (; b && b !== this;) b = b.parentNode;
            if (b !== this) {
                a.type = a.data;
                c.event.handle.apply(this, arguments)
            }
        } catch (d) {
        }
    }, wa = function (a) {
        a.type = a.data;
        c.event.handle.apply(this, arguments)
    };
    c.each({mouseenter: "mouseover", mouseleave: "mouseout"}, function (a, b) {
        c.event.special[a] = {
            setup: function (d) {
                c.event.add(this, b, d && d.selector ? wa : va, a)
            }, teardown: function (d) {
                c.event.remove(this, b, d && d.selector ? wa : va)
            }
        }
    });
    if (!c.support.submitBubbles) c.event.special.submit = {
        setup: function () {
            if (this.nodeName.toLowerCase() !==
                "form") {
                c.event.add(this, "click.specialSubmit", function (a) {
                    var b = a.target, d = b.type;
                    if ((d === "submit" || d === "image") && c(b).closest("form").length) {
                        a.liveFired = B;
                        return la("submit", this, arguments)
                    }
                });
                c.event.add(this, "keypress.specialSubmit", function (a) {
                    var b = a.target, d = b.type;
                    if ((d === "text" || d === "password") && c(b).closest("form").length && a.keyCode === 13) {
                        a.liveFired = B;
                        return la("submit", this, arguments)
                    }
                })
            } else return false
        }, teardown: function () {
            c.event.remove(this, ".specialSubmit")
        }
    };
    if (!c.support.changeBubbles) {
        var V,
            xa = function (a) {
                var b = a.type, d = a.value;
                if (b === "radio" || b === "checkbox") d = a.checked; else if (b === "select-multiple") d = a.selectedIndex > -1 ? c.map(a.options, function (e) {
                    return e.selected
                }).join("-") : ""; else if (a.nodeName.toLowerCase() === "select") d = a.selectedIndex;
                return d
            }, Z = function (a, b) {
                var d = a.target, e, f;
                if (!(!ia.test(d.nodeName) || d.readOnly)) {
                    e = c.data(d, "_change_data");
                    f = xa(d);
                    if (a.type !== "focusout" || d.type !== "radio") c.data(d, "_change_data", f);
                    if (!(e === B || f === e)) if (e != null || f) {
                        a.type = "change";
                        a.liveFired =
                            B;
                        return c.event.trigger(a, b, d)
                    }
                }
            };
        c.event.special.change = {
            filters: {
                focusout: Z, beforedeactivate: Z, click: function (a) {
                    var b = a.target, d = b.type;
                    if (d === "radio" || d === "checkbox" || b.nodeName.toLowerCase() === "select") return Z.call(this, a)
                }, keydown: function (a) {
                    var b = a.target, d = b.type;
                    if (a.keyCode === 13 && b.nodeName.toLowerCase() !== "textarea" || a.keyCode === 32 && (d === "checkbox" || d === "radio") || d === "select-multiple") return Z.call(this, a)
                }, beforeactivate: function (a) {
                    a = a.target;
                    c.data(a, "_change_data", xa(a))
                }
            }, setup: function () {
                if (this.type ===
                    "file") return false;
                for (var a in V) c.event.add(this, a + ".specialChange", V[a]);
                return ia.test(this.nodeName)
            }, teardown: function () {
                c.event.remove(this, ".specialChange");
                return ia.test(this.nodeName)
            }
        };
        V = c.event.special.change.filters;
        V.focus = V.beforeactivate
    }
    t.addEventListener && c.each({focus: "focusin", blur: "focusout"}, function (a, b) {
        function d(e) {
            e = c.event.fix(e);
            e.type = b;
            return c.event.trigger(e, null, e.target)
        }

        c.event.special[b] = {
            setup: function () {
                ua[b]++ === 0 && t.addEventListener(a, d, true)
            }, teardown: function () {
                --ua[b] ===
                0 && t.removeEventListener(a, d, true)
            }
        }
    });
    c.each(["bind", "one"], function (a, b) {
        c.fn[b] = function (d, e, f) {
            if (typeof d === "object") {
                for (var h in d) this[b](h, e, d[h], f);
                return this
            }
            if (c.isFunction(e) || e === false) {
                f = e;
                e = B
            }
            var l = b === "one" ? c.proxy(f, function (o) {
                c(this).unbind(o, l);
                return f.apply(this, arguments)
            }) : f;
            if (d === "unload" && b !== "one") this.one(d, e, f); else {
                h = 0;
                for (var k = this.length; h < k; h++) c.event.add(this[h], d, l, e)
            }
            return this
        }
    });
    c.fn.extend({
        unbind: function (a, b) {
            if (typeof a === "object" && !a.preventDefault) for (var d in a) this.unbind(d,
                a[d]); else {
                d = 0;
                for (var e = this.length; d < e; d++) c.event.remove(this[d], a, b)
            }
            return this
        }, delegate: function (a, b, d, e) {
            return this.live(b, d, e, a)
        }, undelegate: function (a, b, d) {
            return arguments.length === 0 ? this.unbind("live") : this.die(b, null, d, a)
        }, trigger: function (a, b) {
            return this.each(function () {
                c.event.trigger(a, b, this)
            })
        }, triggerHandler: function (a, b) {
            if (this[0]) {
                var d = c.Event(a);
                d.preventDefault();
                d.stopPropagation();
                c.event.trigger(d, b, this[0]);
                return d.result
            }
        }, toggle: function (a) {
            for (var b = arguments, d =
                1; d < b.length;) c.proxy(a, b[d++]);
            return this.click(c.proxy(a, function (e) {
                var f = (c.data(this, "lastToggle" + a.guid) || 0) % d;
                c.data(this, "lastToggle" + a.guid, f + 1);
                e.preventDefault();
                return b[f].apply(this, arguments) || false
            }))
        }, hover: function (a, b) {
            return this.mouseenter(a).mouseleave(b || a)
        }
    });
    var ya = {focus: "focusin", blur: "focusout", mouseenter: "mouseover", mouseleave: "mouseout"};
    c.each(["live", "die"], function (a, b) {
        c.fn[b] = function (d, e, f, h) {
            var l, k = 0, o, x, r = h || this.selector;
            h = h ? this : c(this.context);
            if (typeof d ===
                "object" && !d.preventDefault) {
                for (l in d) h[b](l, e, d[l], r);
                return this
            }
            if (c.isFunction(e)) {
                f = e;
                e = B
            }
            for (d = (d || "").split(" "); (l = d[k++]) != null;) {
                o = X.exec(l);
                x = "";
                if (o) {
                    x = o[0];
                    l = l.replace(X, "")
                }
                if (l === "hover") d.push("mouseenter" + x, "mouseleave" + x); else {
                    o = l;
                    if (l === "focus" || l === "blur") {
                        d.push(ya[l] + x);
                        l += x
                    } else l = (ya[l] || l) + x;
                    if (b === "live") {
                        x = 0;
                        for (var A = h.length; x < A; x++) c.event.add(h[x], "live." + Y(l, r), {
                            data: e,
                            selector: r,
                            handler: f,
                            origType: l,
                            origHandler: f,
                            preType: o
                        })
                    } else h.unbind("live." + Y(l, r), f)
                }
            }
            return this
        }
    });
    c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "), function (a, b) {
        c.fn[b] = function (d, e) {
            if (e == null) {
                e = d;
                d = null
            }
            return arguments.length > 0 ? this.bind(b, d, e) : this.trigger(b)
        };
        if (c.attrFn) c.attrFn[b] = true
    });
    E.attachEvent && !E.addEventListener && c(E).bind("unload", function () {
        for (var a in c.cache) if (c.cache[a].handle) try {
            c.event.remove(c.cache[a].handle.elem)
        } catch (b) {
        }
    });
    (function () {
        function a(g, i, n, m, p, q) {
            p = 0;
            for (var u = m.length; p < u; p++) {
                var y = m[p];
                if (y) {
                    var F = false;
                    for (y = y[g]; y;) {
                        if (y.sizcache === n) {
                            F = m[y.sizset];
                            break
                        }
                        if (y.nodeType === 1 && !q) {
                            y.sizcache = n;
                            y.sizset = p
                        }
                        if (y.nodeName.toLowerCase() === i) {
                            F = y;
                            break
                        }
                        y = y[g]
                    }
                    m[p] = F
                }
            }
        }

        function b(g, i, n, m, p, q) {
            p = 0;
            for (var u = m.length; p < u; p++) {
                var y = m[p];
                if (y) {
                    var F = false;
                    for (y = y[g]; y;) {
                        if (y.sizcache === n) {
                            F = m[y.sizset];
                            break
                        }
                        if (y.nodeType === 1) {
                            if (!q) {
                                y.sizcache = n;
                                y.sizset = p
                            }
                            if (typeof i !== "string") {
                                if (y === i) {
                                    F = true;
                                    break
                                }
                            } else if (k.filter(i,
                                [y]).length > 0) {
                                F = y;
                                break
                            }
                        }
                        y = y[g]
                    }
                    m[p] = F
                }
            }
        }

        var d = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
            e = 0, f = Object.prototype.toString, h = false, l = true;
        [0, 0].sort(function () {
            l = false;
            return 0
        });
        var k = function (g, i, n, m) {
            n = n || [];
            var p = i = i || t;
            if (i.nodeType !== 1 && i.nodeType !== 9) return [];
            if (!g || typeof g !== "string") return n;
            var q, u, y, F, M, N = true, O = k.isXML(i), D = [], R = g;
            do {
                d.exec("");
                if (q = d.exec(R)) {
                    R = q[3];
                    D.push(q[1]);
                    if (q[2]) {
                        F = q[3];
                        break
                    }
                }
            } while (q);
            if (D.length > 1 && x.exec(g)) if (D.length === 2 && o.relative[D[0]]) u = L(D[0] + D[1], i); else for (u = o.relative[D[0]] ? [i] : k(D.shift(), i); D.length;) {
                g = D.shift();
                if (o.relative[g]) g += D.shift();
                u = L(g, u)
            } else {
                if (!m && D.length > 1 && i.nodeType === 9 && !O && o.match.ID.test(D[0]) && !o.match.ID.test(D[D.length - 1])) {
                    q = k.find(D.shift(), i, O);
                    i = q.expr ? k.filter(q.expr, q.set)[0] : q.set[0]
                }
                if (i) {
                    q = m ? {
                        expr: D.pop(),
                        set: C(m)
                    } : k.find(D.pop(), D.length === 1 && (D[0] === "~" || D[0] === "+") && i.parentNode ? i.parentNode : i, O);
                    u = q.expr ? k.filter(q.expr,
                        q.set) : q.set;
                    if (D.length > 0) y = C(u); else N = false;
                    for (; D.length;) {
                        q = M = D.pop();
                        if (o.relative[M]) q = D.pop(); else M = "";
                        if (q == null) q = i;
                        o.relative[M](y, q, O)
                    }
                } else y = []
            }
            y || (y = u);
            y || k.error(M || g);
            if (f.call(y) === "[object Array]") if (N) if (i && i.nodeType === 1) for (g = 0; y[g] != null; g++) {
                if (y[g] && (y[g] === true || y[g].nodeType === 1 && k.contains(i, y[g]))) n.push(u[g])
            } else for (g = 0; y[g] != null; g++) y[g] && y[g].nodeType === 1 && n.push(u[g]); else n.push.apply(n, y); else C(y, n);
            if (F) {
                k(F, p, n, m);
                k.uniqueSort(n)
            }
            return n
        };
        k.uniqueSort = function (g) {
            if (w) {
                h =
                    l;
                g.sort(w);
                if (h) for (var i = 1; i < g.length; i++) g[i] === g[i - 1] && g.splice(i--, 1)
            }
            return g
        };
        k.matches = function (g, i) {
            return k(g, null, null, i)
        };
        k.matchesSelector = function (g, i) {
            return k(i, null, null, [g]).length > 0
        };
        k.find = function (g, i, n) {
            var m;
            if (!g) return [];
            for (var p = 0, q = o.order.length; p < q; p++) {
                var u, y = o.order[p];
                if (u = o.leftMatch[y].exec(g)) {
                    var F = u[1];
                    u.splice(1, 1);
                    if (F.substr(F.length - 1) !== "\\") {
                        u[1] = (u[1] || "").replace(/\\/g, "");
                        m = o.find[y](u, i, n);
                        if (m != null) {
                            g = g.replace(o.match[y], "");
                            break
                        }
                    }
                }
            }
            m || (m = i.getElementsByTagName("*"));
            return {set: m, expr: g}
        };
        k.filter = function (g, i, n, m) {
            for (var p, q, u = g, y = [], F = i, M = i && i[0] && k.isXML(i[0]); g && i.length;) {
                for (var N in o.filter) if ((p = o.leftMatch[N].exec(g)) != null && p[2]) {
                    var O, D, R = o.filter[N];
                    D = p[1];
                    q = false;
                    p.splice(1, 1);
                    if (D.substr(D.length - 1) !== "\\") {
                        if (F === y) y = [];
                        if (o.preFilter[N]) if (p = o.preFilter[N](p, F, n, y, m, M)) {
                            if (p === true) continue
                        } else q = O = true;
                        if (p) for (var j = 0; (D = F[j]) != null; j++) if (D) {
                            O = R(D, p, j, F);
                            var s = m ^ !!O;
                            if (n && O != null) if (s) q = true; else F[j] = false; else if (s) {
                                y.push(D);
                                q = true
                            }
                        }
                        if (O !==
                            B) {
                            n || (F = y);
                            g = g.replace(o.match[N], "");
                            if (!q) return [];
                            break
                        }
                    }
                }
                if (g === u) if (q == null) k.error(g); else break;
                u = g
            }
            return F
        };
        k.error = function (g) {
            throw"Syntax error, unrecognized expression: " + g;
        };
        var o = k.selectors = {
            order: ["ID", "NAME", "TAG"], match: {
                ID: /#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
                CLASS: /\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
                NAME: /\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,
                ATTR: /\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,
                TAG: /^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
                CHILD: /:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
                POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
                PSEUDO: /:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/
            }, leftMatch: {}, attrMap: {"class": "className", "for": "htmlFor"}, attrHandle: {
                href: function (g) {
                    return g.getAttribute("href")
                }
            }, relative: {
                "+": function (g, i) {
                    var n = typeof i === "string", m = n && !/\W/.test(i);
                    n = n && !m;
                    if (m) i = i.toLowerCase();
                    m = 0;
                    for (var p = g.length, q; m < p; m++) if (q = g[m]) {
                        for (; (q = q.previousSibling) && q.nodeType !== 1;) ;
                        g[m] = n || q && q.nodeName.toLowerCase() ===
                        i ? q || false : q === i
                    }
                    n && k.filter(i, g, true)
                }, ">": function (g, i) {
                    var n, m = typeof i === "string", p = 0, q = g.length;
                    if (m && !/\W/.test(i)) for (i = i.toLowerCase(); p < q; p++) {
                        if (n = g[p]) {
                            n = n.parentNode;
                            g[p] = n.nodeName.toLowerCase() === i ? n : false
                        }
                    } else {
                        for (; p < q; p++) if (n = g[p]) g[p] = m ? n.parentNode : n.parentNode === i;
                        m && k.filter(i, g, true)
                    }
                }, "": function (g, i, n) {
                    var m, p = e++, q = b;
                    if (typeof i === "string" && !/\W/.test(i)) {
                        m = i = i.toLowerCase();
                        q = a
                    }
                    q("parentNode", i, p, g, m, n)
                }, "~": function (g, i, n) {
                    var m, p = e++, q = b;
                    if (typeof i === "string" && !/\W/.test(i)) {
                        m =
                            i = i.toLowerCase();
                        q = a
                    }
                    q("previousSibling", i, p, g, m, n)
                }
            }, find: {
                ID: function (g, i, n) {
                    if (typeof i.getElementById !== "undefined" && !n) return (g = i.getElementById(g[1])) && g.parentNode ? [g] : []
                }, NAME: function (g, i) {
                    if (typeof i.getElementsByName !== "undefined") {
                        for (var n = [], m = i.getElementsByName(g[1]), p = 0, q = m.length; p < q; p++) m[p].getAttribute("name") === g[1] && n.push(m[p]);
                        return n.length === 0 ? null : n
                    }
                }, TAG: function (g, i) {
                    return i.getElementsByTagName(g[1])
                }
            }, preFilter: {
                CLASS: function (g, i, n, m, p, q) {
                    g = " " + g[1].replace(/\\/g,
                        "") + " ";
                    if (q) return g;
                    q = 0;
                    for (var u; (u = i[q]) != null; q++) if (u) if (p ^ (u.className && (" " + u.className + " ").replace(/[\t\n]/g, " ").indexOf(g) >= 0)) n || m.push(u); else if (n) i[q] = false;
                    return false
                }, ID: function (g) {
                    return g[1].replace(/\\/g, "")
                }, TAG: function (g) {
                    return g[1].toLowerCase()
                }, CHILD: function (g) {
                    if (g[1] === "nth") {
                        var i = /(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2] === "even" && "2n" || g[2] === "odd" && "2n+1" || !/\D/.test(g[2]) && "0n+" + g[2] || g[2]);
                        g[2] = i[1] + (i[2] || 1) - 0;
                        g[3] = i[3] - 0
                    }
                    g[0] = e++;
                    return g
                }, ATTR: function (g, i, n,
                                   m, p, q) {
                    i = g[1].replace(/\\/g, "");
                    if (!q && o.attrMap[i]) g[1] = o.attrMap[i];
                    if (g[2] === "~=") g[4] = " " + g[4] + " ";
                    return g
                }, PSEUDO: function (g, i, n, m, p) {
                    if (g[1] === "not") if ((d.exec(g[3]) || "").length > 1 || /^\w/.test(g[3])) g[3] = k(g[3], null, null, i); else {
                        g = k.filter(g[3], i, n, true ^ p);
                        n || m.push.apply(m, g);
                        return false
                    } else if (o.match.POS.test(g[0]) || o.match.CHILD.test(g[0])) return true;
                    return g
                }, POS: function (g) {
                    g.unshift(true);
                    return g
                }
            }, filters: {
                enabled: function (g) {
                    return g.disabled === false && g.type !== "hidden"
                }, disabled: function (g) {
                    return g.disabled ===
                        true
                }, checked: function (g) {
                    return g.checked === true
                }, selected: function (g) {
                    return g.selected === true
                }, parent: function (g) {
                    return !!g.firstChild
                }, empty: function (g) {
                    return !g.firstChild
                }, has: function (g, i, n) {
                    return !!k(n[3], g).length
                }, header: function (g) {
                    return /h\d/i.test(g.nodeName)
                }, text: function (g) {
                    return "text" === g.type
                }, radio: function (g) {
                    return "radio" === g.type
                }, checkbox: function (g) {
                    return "checkbox" === g.type
                }, file: function (g) {
                    return "file" === g.type
                }, password: function (g) {
                    return "password" === g.type
                }, submit: function (g) {
                    return "submit" ===
                        g.type
                }, image: function (g) {
                    return "image" === g.type
                }, reset: function (g) {
                    return "reset" === g.type
                }, button: function (g) {
                    return "button" === g.type || g.nodeName.toLowerCase() === "button"
                }, input: function (g) {
                    return /input|select|textarea|button/i.test(g.nodeName)
                }
            }, setFilters: {
                first: function (g, i) {
                    return i === 0
                }, last: function (g, i, n, m) {
                    return i === m.length - 1
                }, even: function (g, i) {
                    return i % 2 === 0
                }, odd: function (g, i) {
                    return i % 2 === 1
                }, lt: function (g, i, n) {
                    return i < n[3] - 0
                }, gt: function (g, i, n) {
                    return i > n[3] - 0
                }, nth: function (g, i, n) {
                    return n[3] -
                        0 === i
                }, eq: function (g, i, n) {
                    return n[3] - 0 === i
                }
            }, filter: {
                PSEUDO: function (g, i, n, m) {
                    var p = i[1], q = o.filters[p];
                    if (q) return q(g, n, i, m); else if (p === "contains") return (g.textContent || g.innerText || k.getText([g]) || "").indexOf(i[3]) >= 0; else if (p === "not") {
                        i = i[3];
                        n = 0;
                        for (m = i.length; n < m; n++) if (i[n] === g) return false;
                        return true
                    } else k.error("Syntax error, unrecognized expression: " + p)
                }, CHILD: function (g, i) {
                    var n = i[1], m = g;
                    switch (n) {
                        case "only":
                        case "first":
                            for (; m = m.previousSibling;) if (m.nodeType === 1) return false;
                            if (n ===
                                "first") return true;
                            m = g;
                        case "last":
                            for (; m = m.nextSibling;) if (m.nodeType === 1) return false;
                            return true;
                        case "nth":
                            n = i[2];
                            var p = i[3];
                            if (n === 1 && p === 0) return true;
                            var q = i[0], u = g.parentNode;
                            if (u && (u.sizcache !== q || !g.nodeIndex)) {
                                var y = 0;
                                for (m = u.firstChild; m; m = m.nextSibling) if (m.nodeType === 1) m.nodeIndex = ++y;
                                u.sizcache = q
                            }
                            m = g.nodeIndex - p;
                            return n === 0 ? m === 0 : m % n === 0 && m / n >= 0
                    }
                }, ID: function (g, i) {
                    return g.nodeType === 1 && g.getAttribute("id") === i
                }, TAG: function (g, i) {
                    return i === "*" && g.nodeType === 1 || g.nodeName.toLowerCase() ===
                        i
                }, CLASS: function (g, i) {
                    return (" " + (g.className || g.getAttribute("class")) + " ").indexOf(i) > -1
                }, ATTR: function (g, i) {
                    var n = i[1];
                    n = o.attrHandle[n] ? o.attrHandle[n](g) : g[n] != null ? g[n] : g.getAttribute(n);
                    var m = n + "", p = i[2], q = i[4];
                    return n == null ? p === "!=" : p === "=" ? m === q : p === "*=" ? m.indexOf(q) >= 0 : p === "~=" ? (" " + m + " ").indexOf(q) >= 0 : !q ? m && n !== false : p === "!=" ? m !== q : p === "^=" ? m.indexOf(q) === 0 : p === "$=" ? m.substr(m.length - q.length) === q : p === "|=" ? m === q || m.substr(0, q.length + 1) === q + "-" : false
                }, POS: function (g, i, n, m) {
                    var p = o.setFilters[i[2]];
                    if (p) return p(g, n, i, m)
                }
            }
        }, x = o.match.POS, r = function (g, i) {
            return "\\" + (i - 0 + 1)
        }, A;
        for (A in o.match) {
            o.match[A] = RegExp(o.match[A].source + /(?![^\[]*\])(?![^\(]*\))/.source);
            o.leftMatch[A] = RegExp(/(^(?:.|\r|\n)*?)/.source + o.match[A].source.replace(/\\(\d+)/g, r))
        }
        var C = function (g, i) {
            g = Array.prototype.slice.call(g, 0);
            if (i) {
                i.push.apply(i, g);
                return i
            }
            return g
        };
        try {
            Array.prototype.slice.call(t.documentElement.childNodes, 0)
        } catch (J) {
            C = function (g, i) {
                var n = 0, m = i || [];
                if (f.call(g) === "[object Array]") Array.prototype.push.apply(m,
                    g); else if (typeof g.length === "number") for (var p = g.length; n < p; n++) m.push(g[n]); else for (; g[n]; n++) m.push(g[n]);
                return m
            }
        }
        var w, I;
        if (t.documentElement.compareDocumentPosition) w = function (g, i) {
            if (g === i) {
                h = true;
                return 0
            }
            if (!g.compareDocumentPosition || !i.compareDocumentPosition) return g.compareDocumentPosition ? -1 : 1;
            return g.compareDocumentPosition(i) & 4 ? -1 : 1
        }; else {
            w = function (g, i) {
                var n, m, p = [], q = [];
                n = g.parentNode;
                m = i.parentNode;
                var u = n;
                if (g === i) {
                    h = true;
                    return 0
                } else if (n === m) return I(g, i); else if (n) {
                    if (!m) return 1
                } else return -1;
                for (; u;) {
                    p.unshift(u);
                    u = u.parentNode
                }
                for (u = m; u;) {
                    q.unshift(u);
                    u = u.parentNode
                }
                n = p.length;
                m = q.length;
                for (u = 0; u < n && u < m; u++) if (p[u] !== q[u]) return I(p[u], q[u]);
                return u === n ? I(g, q[u], -1) : I(p[u], i, 1)
            };
            I = function (g, i, n) {
                if (g === i) return n;
                for (g = g.nextSibling; g;) {
                    if (g === i) return -1;
                    g = g.nextSibling
                }
                return 1
            }
        }
        k.getText = function (g) {
            for (var i = "", n, m = 0; g[m]; m++) {
                n = g[m];
                if (n.nodeType === 3 || n.nodeType === 4) i += n.nodeValue; else if (n.nodeType !== 8) i += k.getText(n.childNodes)
            }
            return i
        };
        (function () {
            var g = t.createElement("div"),
                i = "script" + (new Date).getTime(), n = t.documentElement;
            g.innerHTML = "<a name='" + i + "'/>";
            n.insertBefore(g, n.firstChild);
            if (t.getElementById(i)) {
                o.find.ID = function (m, p, q) {
                    if (typeof p.getElementById !== "undefined" && !q) return (p = p.getElementById(m[1])) ? p.id === m[1] || typeof p.getAttributeNode !== "undefined" && p.getAttributeNode("id").nodeValue === m[1] ? [p] : B : []
                };
                o.filter.ID = function (m, p) {
                    var q = typeof m.getAttributeNode !== "undefined" && m.getAttributeNode("id");
                    return m.nodeType === 1 && q && q.nodeValue === p
                }
            }
            n.removeChild(g);
            n = g = null
        })();
        (function () {
            var g = t.createElement("div");
            g.appendChild(t.createComment(""));
            if (g.getElementsByTagName("*").length > 0) o.find.TAG = function (i, n) {
                var m = n.getElementsByTagName(i[1]);
                if (i[1] === "*") {
                    for (var p = [], q = 0; m[q]; q++) m[q].nodeType === 1 && p.push(m[q]);
                    m = p
                }
                return m
            };
            g.innerHTML = "<a href='#'></a>";
            if (g.firstChild && typeof g.firstChild.getAttribute !== "undefined" && g.firstChild.getAttribute("href") !== "#") o.attrHandle.href = function (i) {
                return i.getAttribute("href", 2)
            };
            g = null
        })();
        t.querySelectorAll &&
        function () {
            var g = k, i = t.createElement("div");
            i.innerHTML = "<p class='TEST'></p>";
            if (!(i.querySelectorAll && i.querySelectorAll(".TEST").length === 0)) {
                k = function (m, p, q, u) {
                    p = p || t;
                    m = m.replace(/\=\s*([^'"\]]*)\s*\]/g, "='$1']");
                    if (!u && !k.isXML(p)) if (p.nodeType === 9) try {
                        return C(p.querySelectorAll(m), q)
                    } catch (y) {
                    } else if (p.nodeType === 1 && p.nodeName.toLowerCase() !== "object") {
                        var F = p.getAttribute("id"), M = F || "__sizzle__";
                        F || p.setAttribute("id", M);
                        try {
                            return C(p.querySelectorAll("#" + M + " " + m), q)
                        } catch (N) {
                        } finally {
                            F ||
                            p.removeAttribute("id")
                        }
                    }
                    return g(m, p, q, u)
                };
                for (var n in g) k[n] = g[n];
                i = null
            }
        }();
        (function () {
            var g = t.documentElement,
                i = g.matchesSelector || g.mozMatchesSelector || g.webkitMatchesSelector || g.msMatchesSelector,
                n = false;
            try {
                i.call(t.documentElement, "[test!='']:sizzle")
            } catch (m) {
                n = true
            }
            if (i) k.matchesSelector = function (p, q) {
                q = q.replace(/\=\s*([^'"\]]*)\s*\]/g, "='$1']");
                if (!k.isXML(p)) try {
                    if (n || !o.match.PSEUDO.test(q) && !/!=/.test(q)) return i.call(p, q)
                } catch (u) {
                }
                return k(q, null, null, [p]).length > 0
            }
        })();
        (function () {
            var g =
                t.createElement("div");
            g.innerHTML = "<div class='test e'></div><div class='test'></div>";
            if (!(!g.getElementsByClassName || g.getElementsByClassName("e").length === 0)) {
                g.lastChild.className = "e";
                if (g.getElementsByClassName("e").length !== 1) {
                    o.order.splice(1, 0, "CLASS");
                    o.find.CLASS = function (i, n, m) {
                        if (typeof n.getElementsByClassName !== "undefined" && !m) return n.getElementsByClassName(i[1])
                    };
                    g = null
                }
            }
        })();
        k.contains = t.documentElement.contains ? function (g, i) {
            return g !== i && (g.contains ? g.contains(i) : true)
        } : t.documentElement.compareDocumentPosition ?
            function (g, i) {
                return !!(g.compareDocumentPosition(i) & 16)
            } : function () {
                return false
            };
        k.isXML = function (g) {
            return (g = (g ? g.ownerDocument || g : 0).documentElement) ? g.nodeName !== "HTML" : false
        };
        var L = function (g, i) {
            for (var n, m = [], p = "", q = i.nodeType ? [i] : i; n = o.match.PSEUDO.exec(g);) {
                p += n[0];
                g = g.replace(o.match.PSEUDO, "")
            }
            g = o.relative[g] ? g + "*" : g;
            n = 0;
            for (var u = q.length; n < u; n++) k(g, q[n], m);
            return k.filter(p, m)
        };
        c.find = k;
        c.expr = k.selectors;
        c.expr[":"] = c.expr.filters;
        c.unique = k.uniqueSort;
        c.text = k.getText;
        c.isXMLDoc = k.isXML;
        c.contains = k.contains
    })();
    var Za = /Until$/, $a = /^(?:parents|prevUntil|prevAll)/, ab = /,/, Na = /^.[^:#\[\.,]*$/,
        bb = Array.prototype.slice, cb = c.expr.match.POS;
    c.fn.extend({
        find: function (a) {
            for (var b = this.pushStack("", "find", a), d = 0, e = 0, f = this.length; e < f; e++) {
                d = b.length;
                c.find(a, this[e], b);
                if (e > 0) for (var h = d; h < b.length; h++) for (var l = 0; l < d; l++) if (b[l] === b[h]) {
                    b.splice(h--, 1);
                    break
                }
            }
            return b
        }, has: function (a) {
            var b = c(a);
            return this.filter(function () {
                for (var d = 0, e = b.length; d < e; d++) if (c.contains(this, b[d])) return true
            })
        },
        not: function (a) {
            return this.pushStack(ma(this, a, false), "not", a)
        }, filter: function (a) {
            return this.pushStack(ma(this, a, true), "filter", a)
        }, is: function (a) {
            return !!a && c.filter(a, this).length > 0
        }, closest: function (a, b) {
            var d = [], e, f, h = this[0];
            if (c.isArray(a)) {
                var l, k = {}, o = 1;
                if (h && a.length) {
                    e = 0;
                    for (f = a.length; e < f; e++) {
                        l = a[e];
                        k[l] || (k[l] = c.expr.match.POS.test(l) ? c(l, b || this.context) : l)
                    }
                    for (; h && h.ownerDocument && h !== b;) {
                        for (l in k) {
                            e = k[l];
                            if (e.jquery ? e.index(h) > -1 : c(h).is(e)) d.push({selector: l, elem: h, level: o})
                        }
                        h =
                            h.parentNode;
                        o++
                    }
                }
                return d
            }
            l = cb.test(a) ? c(a, b || this.context) : null;
            e = 0;
            for (f = this.length; e < f; e++) for (h = this[e]; h;) if (l ? l.index(h) > -1 : c.find.matchesSelector(h, a)) {
                d.push(h);
                break
            } else {
                h = h.parentNode;
                if (!h || !h.ownerDocument || h === b) break
            }
            d = d.length > 1 ? c.unique(d) : d;
            return this.pushStack(d, "closest", a)
        }, index: function (a) {
            if (!a || typeof a === "string") return c.inArray(this[0], a ? c(a) : this.parent().children());
            return c.inArray(a.jquery ? a[0] : a, this)
        }, add: function (a, b) {
            var d = typeof a === "string" ? c(a, b || this.context) :
                c.makeArray(a), e = c.merge(this.get(), d);
            return this.pushStack(!d[0] || !d[0].parentNode || d[0].parentNode.nodeType === 11 || !e[0] || !e[0].parentNode || e[0].parentNode.nodeType === 11 ? e : c.unique(e))
        }, andSelf: function () {
            return this.add(this.prevObject)
        }
    });
    c.each({
        parent: function (a) {
            return (a = a.parentNode) && a.nodeType !== 11 ? a : null
        }, parents: function (a) {
            return c.dir(a, "parentNode")
        }, parentsUntil: function (a, b, d) {
            return c.dir(a, "parentNode", d)
        }, next: function (a) {
            return c.nth(a, 2, "nextSibling")
        }, prev: function (a) {
            return c.nth(a,
                2, "previousSibling")
        }, nextAll: function (a) {
            return c.dir(a, "nextSibling")
        }, prevAll: function (a) {
            return c.dir(a, "previousSibling")
        }, nextUntil: function (a, b, d) {
            return c.dir(a, "nextSibling", d)
        }, prevUntil: function (a, b, d) {
            return c.dir(a, "previousSibling", d)
        }, siblings: function (a) {
            return c.sibling(a.parentNode.firstChild, a)
        }, children: function (a) {
            return c.sibling(a.firstChild)
        }, contents: function (a) {
            return c.nodeName(a, "iframe") ? a.contentDocument || a.contentWindow.document : c.makeArray(a.childNodes)
        }
    }, function (a,
                 b) {
        c.fn[a] = function (d, e) {
            var f = c.map(this, b, d);
            Za.test(a) || (e = d);
            if (e && typeof e === "string") f = c.filter(e, f);
            f = this.length > 1 ? c.unique(f) : f;
            if ((this.length > 1 || ab.test(e)) && $a.test(a)) f = f.reverse();
            return this.pushStack(f, a, bb.call(arguments).join(","))
        }
    });
    c.extend({
        filter: function (a, b, d) {
            if (d) a = ":not(" + a + ")";
            return b.length === 1 ? c.find.matchesSelector(b[0], a) ? [b[0]] : [] : c.find.matches(a, b)
        }, dir: function (a, b, d) {
            var e = [];
            for (a = a[b]; a && a.nodeType !== 9 && (d === B || a.nodeType !== 1 || !c(a).is(d));) {
                a.nodeType === 1 &&
                e.push(a);
                a = a[b]
            }
            return e
        }, nth: function (a, b, d) {
            b = b || 1;
            for (var e = 0; a; a = a[d]) if (a.nodeType === 1 && ++e === b) break;
            return a
        }, sibling: function (a, b) {
            for (var d = []; a; a = a.nextSibling) a.nodeType === 1 && a !== b && d.push(a);
            return d
        }
    });
    var za = / jQuery\d+="(?:\d+|null)"/g, $ = /^\s+/,
        Aa = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig, Ba = /<([\w:]+)/,
        db = /<tbody/i, eb = /<|&#?\w+;/, Ca = /<(?:script|object|embed|option|style)/i,
        Da = /checked\s*(?:[^=]|=\s*.checked.)/i, fb = /\=([^="'>\s]+\/)>/g, P = {
            option: [1,
                "<select multiple='multiple'>", "</select>"],
            legend: [1, "<fieldset>", "</fieldset>"],
            thead: [1, "<table>", "</table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
            area: [1, "<map>", "</map>"],
            _default: [0, "", ""]
        };
    P.optgroup = P.option;
    P.tbody = P.tfoot = P.colgroup = P.caption = P.thead;
    P.th = P.td;
    if (!c.support.htmlSerialize) P._default = [1, "div<div>", "</div>"];
    c.fn.extend({
        text: function (a) {
            if (c.isFunction(a)) return this.each(function (b) {
                var d =
                    c(this);
                d.text(a.call(this, b, d.text()))
            });
            if (typeof a !== "object" && a !== B) return this.empty().append((this[0] && this[0].ownerDocument || t).createTextNode(a));
            return c.text(this)
        }, wrapAll: function (a) {
            if (c.isFunction(a)) return this.each(function (d) {
                c(this).wrapAll(a.call(this, d))
            });
            if (this[0]) {
                var b = c(a, this[0].ownerDocument).eq(0).clone(true);
                this[0].parentNode && b.insertBefore(this[0]);
                b.map(function () {
                    for (var d = this; d.firstChild && d.firstChild.nodeType === 1;) d = d.firstChild;
                    return d
                }).append(this)
            }
            return this
        },
        wrapInner: function (a) {
            if (c.isFunction(a)) return this.each(function (b) {
                c(this).wrapInner(a.call(this, b))
            });
            return this.each(function () {
                var b = c(this), d = b.contents();
                d.length ? d.wrapAll(a) : b.append(a)
            })
        }, wrap: function (a) {
            return this.each(function () {
                c(this).wrapAll(a)
            })
        }, unwrap: function () {
            return this.parent().each(function () {
                c.nodeName(this, "body") || c(this).replaceWith(this.childNodes)
            }).end()
        }, append: function () {
            return this.domManip(arguments, true, function (a) {
                this.nodeType === 1 && this.appendChild(a)
            })
        },
        prepend: function () {
            return this.domManip(arguments, true, function (a) {
                this.nodeType === 1 && this.insertBefore(a, this.firstChild)
            })
        }, before: function () {
            if (this[0] && this[0].parentNode) return this.domManip(arguments, false, function (b) {
                this.parentNode.insertBefore(b, this)
            }); else if (arguments.length) {
                var a = c(arguments[0]);
                a.push.apply(a, this.toArray());
                return this.pushStack(a, "before", arguments)
            }
        }, after: function () {
            if (this[0] && this[0].parentNode) return this.domManip(arguments, false, function (b) {
                this.parentNode.insertBefore(b,
                    this.nextSibling)
            }); else if (arguments.length) {
                var a = this.pushStack(this, "after", arguments);
                a.push.apply(a, c(arguments[0]).toArray());
                return a
            }
        }, remove: function (a, b) {
            for (var d = 0, e; (e = this[d]) != null; d++) if (!a || c.filter(a, [e]).length) {
                if (!b && e.nodeType === 1) {
                    c.cleanData(e.getElementsByTagName("*"));
                    c.cleanData([e])
                }
                e.parentNode && e.parentNode.removeChild(e)
            }
            return this
        }, empty: function () {
            for (var a = 0, b; (b = this[a]) != null; a++) for (b.nodeType === 1 && c.cleanData(b.getElementsByTagName("*")); b.firstChild;) b.removeChild(b.firstChild);
            return this
        }, clone: function (a) {
            var b = this.map(function () {
                if (!c.support.noCloneEvent && !c.isXMLDoc(this)) {
                    var d = this.outerHTML, e = this.ownerDocument;
                    if (!d) {
                        d = e.createElement("div");
                        d.appendChild(this.cloneNode(true));
                        d = d.innerHTML
                    }
                    return c.clean([d.replace(za, "").replace(fb, '="$1">').replace($, "")], e)[0]
                } else return this.cloneNode(true)
            });
            if (a === true) {
                na(this, b);
                na(this.find("*"), b.find("*"))
            }
            return b
        }, html: function (a) {
            if (a === B) return this[0] && this[0].nodeType === 1 ? this[0].innerHTML.replace(za, "") : null;
            else if (typeof a === "string" && !Ca.test(a) && (c.support.leadingWhitespace || !$.test(a)) && !P[(Ba.exec(a) || ["", ""])[1].toLowerCase()]) {
                a = a.replace(Aa, "<$1></$2>");
                try {
                    for (var b = 0, d = this.length; b < d; b++) if (this[b].nodeType === 1) {
                        c.cleanData(this[b].getElementsByTagName("*"));
                        this[b].innerHTML = a
                    }
                } catch (e) {
                    this.empty().append(a)
                }
            } else c.isFunction(a) ? this.each(function (f) {
                var h = c(this);
                h.html(a.call(this, f, h.html()))
            }) : this.empty().append(a);
            return this
        }, replaceWith: function (a) {
            if (this[0] && this[0].parentNode) {
                if (c.isFunction(a)) return this.each(function (b) {
                    var d =
                        c(this), e = d.html();
                    d.replaceWith(a.call(this, b, e))
                });
                if (typeof a !== "string") a = c(a).detach();
                return this.each(function () {
                    var b = this.nextSibling, d = this.parentNode;
                    c(this).remove();
                    b ? c(b).before(a) : c(d).append(a)
                })
            } else return this.pushStack(c(c.isFunction(a) ? a() : a), "replaceWith", a)
        }, detach: function (a) {
            return this.remove(a, true)
        }, domManip: function (a, b, d) {
            var e, f, h, l = a[0], k = [];
            if (!c.support.checkClone && arguments.length === 3 && typeof l === "string" && Da.test(l)) return this.each(function () {
                c(this).domManip(a,
                    b, d, true)
            });
            if (c.isFunction(l)) return this.each(function (x) {
                var r = c(this);
                a[0] = l.call(this, x, b ? r.html() : B);
                r.domManip(a, b, d)
            });
            if (this[0]) {
                e = l && l.parentNode;
                e = c.support.parentNode && e && e.nodeType === 11 && e.childNodes.length === this.length ? {fragment: e} : c.buildFragment(a, this, k);
                h = e.fragment;
                if (f = h.childNodes.length === 1 ? h = h.firstChild : h.firstChild) {
                    b = b && c.nodeName(f, "tr");
                    f = 0;
                    for (var o = this.length; f < o; f++) d.call(b ? c.nodeName(this[f], "table") ? this[f].getElementsByTagName("tbody")[0] || this[f].appendChild(this[f].ownerDocument.createElement("tbody")) :
                        this[f] : this[f], f > 0 || e.cacheable || this.length > 1 ? h.cloneNode(true) : h)
                }
                k.length && c.each(k, Oa)
            }
            return this
        }
    });
    c.buildFragment = function (a, b, d) {
        var e, f, h;
        b = b && b[0] ? b[0].ownerDocument || b[0] : t;
        if (a.length === 1 && typeof a[0] === "string" && a[0].length < 512 && b === t && !Ca.test(a[0]) && (c.support.checkClone || !Da.test(a[0]))) {
            f = true;
            if (h = c.fragments[a[0]]) if (h !== 1) e = h
        }
        if (!e) {
            e = b.createDocumentFragment();
            c.clean(a, b, e, d)
        }
        if (f) c.fragments[a[0]] = h ? e : 1;
        return {fragment: e, cacheable: f}
    };
    c.fragments = {};
    c.each({
        appendTo: "append",
        prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith"
    }, function (a, b) {
        c.fn[a] = function (d) {
            var e = [];
            d = c(d);
            var f = this.length === 1 && this[0].parentNode;
            if (f && f.nodeType === 11 && f.childNodes.length === 1 && d.length === 1) {
                d[b](this[0]);
                return this
            } else {
                f = 0;
                for (var h = d.length; f < h; f++) {
                    var l = (f > 0 ? this.clone(true) : this).get();
                    c(d[f])[b](l);
                    e = e.concat(l)
                }
                return this.pushStack(e, a, d.selector)
            }
        }
    });
    c.extend({
        clean: function (a, b, d, e) {
            b = b || t;
            if (typeof b.createElement === "undefined") b = b.ownerDocument ||
                b[0] && b[0].ownerDocument || t;
            for (var f = [], h = 0, l; (l = a[h]) != null; h++) {
                if (typeof l === "number") l += "";
                if (l) {
                    if (typeof l === "string" && !eb.test(l)) l = b.createTextNode(l); else if (typeof l === "string") {
                        l = l.replace(Aa, "<$1></$2>");
                        var k = (Ba.exec(l) || ["", ""])[1].toLowerCase(), o = P[k] || P._default, x = o[0],
                            r = b.createElement("div");
                        for (r.innerHTML = o[1] + l + o[2]; x--;) r = r.lastChild;
                        if (!c.support.tbody) {
                            x = db.test(l);
                            k = k === "table" && !x ? r.firstChild && r.firstChild.childNodes : o[1] === "<table>" && !x ? r.childNodes : [];
                            for (o = k.length -
                                1; o >= 0; --o) c.nodeName(k[o], "tbody") && !k[o].childNodes.length && k[o].parentNode.removeChild(k[o])
                        }
                        !c.support.leadingWhitespace && $.test(l) && r.insertBefore(b.createTextNode($.exec(l)[0]), r.firstChild);
                        l = r.childNodes
                    }
                    if (l.nodeType) f.push(l); else f = c.merge(f, l)
                }
            }
            if (d) for (h = 0; f[h]; h++) if (e && c.nodeName(f[h], "script") && (!f[h].type || f[h].type.toLowerCase() === "text/javascript")) e.push(f[h].parentNode ? f[h].parentNode.removeChild(f[h]) : f[h]); else {
                f[h].nodeType === 1 && f.splice.apply(f, [h + 1, 0].concat(c.makeArray(f[h].getElementsByTagName("script"))));
                d.appendChild(f[h])
            }
            return f
        }, cleanData: function (a) {
            for (var b, d, e = c.cache, f = c.event.special, h = c.support.deleteExpando, l = 0, k; (k = a[l]) != null; l++) if (!(k.nodeName && c.noData[k.nodeName.toLowerCase()])) if (d = k[c.expando]) {
                if ((b = e[d]) && b.events) for (var o in b.events) f[o] ? c.event.remove(k, o) : c.removeEvent(k, o, b.handle);
                if (h) delete k[c.expando]; else k.removeAttribute && k.removeAttribute(c.expando);
                delete e[d]
            }
        }
    });
    var Ea = /alpha\([^)]*\)/i, gb = /opacity=([^)]*)/, hb = /-([a-z])/ig, ib = /([A-Z])/g, Fa = /^-?\d+(?:px)?$/i,
        jb = /^-?\d/, kb = {position: "absolute", visibility: "hidden", display: "block"}, Pa = ["Left", "Right"],
        Qa = ["Top", "Bottom"], W, Ga, aa, lb = function (a, b) {
            return b.toUpperCase()
        };
    c.fn.css = function (a, b) {
        if (arguments.length === 2 && b === B) return this;
        return c.access(this, a, b, true, function (d, e, f) {
            return f !== B ? c.style(d, e, f) : c.css(d, e)
        })
    };
    c.extend({
        cssHooks: {
            opacity: {
                get: function (a, b) {
                    if (b) {
                        var d = W(a, "opacity", "opacity");
                        return d === "" ? "1" : d
                    } else return a.style.opacity
                }
            }
        }, cssNumber: {
            zIndex: true, fontWeight: true, opacity: true,
            zoom: true, lineHeight: true
        }, cssProps: {"float": c.support.cssFloat ? "cssFloat" : "styleFloat"}, style: function (a, b, d, e) {
            if (!(!a || a.nodeType === 3 || a.nodeType === 8 || !a.style)) {
                var f, h = c.camelCase(b), l = a.style, k = c.cssHooks[h];
                b = c.cssProps[h] || h;
                if (d !== B) {
                    if (!(typeof d === "number" && isNaN(d) || d == null)) {
                        if (typeof d === "number" && !c.cssNumber[h]) d += "px";
                        if (!k || !("set" in k) || (d = k.set(a, d)) !== B) try {
                            l[b] = d
                        } catch (o) {
                        }
                    }
                } else {
                    if (k && "get" in k && (f = k.get(a, false, e)) !== B) return f;
                    return l[b]
                }
            }
        }, css: function (a, b, d) {
            var e, f = c.camelCase(b),
                h = c.cssHooks[f];
            b = c.cssProps[f] || f;
            if (h && "get" in h && (e = h.get(a, true, d)) !== B) return e; else if (W) return W(a, b, f)
        }, swap: function (a, b, d) {
            var e = {}, f;
            for (f in b) {
                e[f] = a.style[f];
                a.style[f] = b[f]
            }
            d.call(a);
            for (f in b) a.style[f] = e[f]
        }, camelCase: function (a) {
            return a.replace(hb, lb)
        }
    });
    c.curCSS = c.css;
    c.each(["height", "width"], function (a, b) {
        c.cssHooks[b] = {
            get: function (d, e, f) {
                var h;
                if (e) {
                    if (d.offsetWidth !== 0) h = oa(d, b, f); else c.swap(d, kb, function () {
                        h = oa(d, b, f)
                    });
                    if (h <= 0) {
                        h = W(d, b, b);
                        if (h === "0px" && aa) h = aa(d, b, b);
                        if (h != null) return h === "" || h === "auto" ? "0px" : h
                    }
                    if (h < 0 || h == null) {
                        h = d.style[b];
                        return h === "" || h === "auto" ? "0px" : h
                    }
                    return typeof h === "string" ? h : h + "px"
                }
            }, set: function (d, e) {
                if (Fa.test(e)) {
                    e = parseFloat(e);
                    if (e >= 0) return e + "px"
                } else return e
            }
        }
    });
    if (!c.support.opacity) c.cssHooks.opacity = {
        get: function (a, b) {
            return gb.test((b && a.currentStyle ? a.currentStyle.filter : a.style.filter) || "") ? parseFloat(RegExp.$1) / 100 + "" : b ? "1" : ""
        }, set: function (a, b) {
            var d = a.style;
            d.zoom = 1;
            var e = c.isNaN(b) ? "" : "alpha(opacity=" + b * 100 + ")", f =
                d.filter || "";
            d.filter = Ea.test(f) ? f.replace(Ea, e) : d.filter + " " + e
        }
    };
    if (t.defaultView && t.defaultView.getComputedStyle) Ga = function (a, b, d) {
        var e;
        d = d.replace(ib, "-$1").toLowerCase();
        if (!(b = a.ownerDocument.defaultView)) return B;
        if (b = b.getComputedStyle(a, null)) {
            e = b.getPropertyValue(d);
            if (e === "" && !c.contains(a.ownerDocument.documentElement, a)) e = c.style(a, d)
        }
        return e
    };
    if (t.documentElement.currentStyle) aa = function (a, b) {
        var d, e, f = a.currentStyle && a.currentStyle[b], h = a.style;
        if (!Fa.test(f) && jb.test(f)) {
            d = h.left;
            e = a.runtimeStyle.left;
            a.runtimeStyle.left = a.currentStyle.left;
            h.left = b === "fontSize" ? "1em" : f || 0;
            f = h.pixelLeft + "px";
            h.left = d;
            a.runtimeStyle.left = e
        }
        return f === "" ? "auto" : f
    };
    W = Ga || aa;
    if (c.expr && c.expr.filters) {
        c.expr.filters.hidden = function (a) {
            var b = a.offsetHeight;
            return a.offsetWidth === 0 && b === 0 || !c.support.reliableHiddenOffsets && (a.style.display || c.css(a, "display")) === "none"
        };
        c.expr.filters.visible = function (a) {
            return !c.expr.filters.hidden(a)
        }
    }
    var mb = c.now(), nb = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
        ob = /^(?:select|textarea)/i,
        pb = /^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
        qb = /^(?:GET|HEAD)$/, Ra = /\[\]$/, T = /\=\?(&|$)/, ja = /\?/, rb = /([?&])_=[^&]*/,
        sb = /^(\w+:)?\/\/([^\/?#]+)/, tb = /%20/g, ub = /#.*$/, Ha = c.fn.load;
    c.fn.extend({
        load: function (a, b, d) {
            if (typeof a !== "string" && Ha) return Ha.apply(this, arguments); else if (!this.length) return this;
            var e = a.indexOf(" ");
            if (e >= 0) {
                var f = a.slice(e, a.length);
                a = a.slice(0, e)
            }
            e = "GET";
            if (b) if (c.isFunction(b)) {
                d = b;
                b = null
            } else if (typeof b ===
                "object") {
                b = c.param(b, c.ajaxSettings.traditional);
                e = "POST"
            }
            var h = this;
            c.ajax({
                url: a, type: e, dataType: "html", data: b, complete: function (l, k) {
                    if (k === "success" || k === "notmodified") h.html(f ? c("<div>").append(l.responseText.replace(nb, "")).find(f) : l.responseText);
                    d && h.each(d, [l.responseText, k, l])
                }
            });
            return this
        }, serialize: function () {
            return c.param(this.serializeArray())
        }, serializeArray: function () {
            return this.map(function () {
                return this.elements ? c.makeArray(this.elements) : this
            }).filter(function () {
                return this.name &&
                    !this.disabled && (this.checked || ob.test(this.nodeName) || pb.test(this.type))
            }).map(function (a, b) {
                var d = c(this).val();
                return d == null ? null : c.isArray(d) ? c.map(d, function (e) {
                    return {name: b.name, value: e}
                }) : {name: b.name, value: d}
            }).get()
        }
    });
    c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function (a, b) {
        c.fn[b] = function (d) {
            return this.bind(b, d)
        }
    });
    c.extend({
        get: function (a, b, d, e) {
            if (c.isFunction(b)) {
                e = e || d;
                d = b;
                b = null
            }
            return c.ajax({type: "GET", url: a, data: b, success: d, dataType: e})
        },
        getScript: function (a, b) {
            return c.get(a, null, b, "script")
        }, getJSON: function (a, b, d) {
            return c.get(a, b, d, "json")
        }, post: function (a, b, d, e) {
            if (c.isFunction(b)) {
                e = e || d;
                d = b;
                b = {}
            }
            return c.ajax({type: "POST", url: a, data: b, success: d, dataType: e})
        }, ajaxSetup: function (a) {
            c.extend(c.ajaxSettings, a)
        }, ajaxSettings: {
            url: location.href,
            global: true,
            type: "GET",
            contentType: "application/x-www-form-urlencoded",
            processData: true,
            async: true,
            xhr: function () {
                return new E.XMLHttpRequest
            },
            accepts: {
                xml: "application/xml, text/xml",
                html: "text/html",
                script: "text/javascript, application/javascript",
                json: "application/json, text/javascript",
                text: "text/plain",
                _default: "*/*"
            }
        }, ajax: function (a) {
            var b = c.extend(true, {}, c.ajaxSettings, a), d, e, f, h = b.type.toUpperCase(), l = qb.test(h);
            b.url = b.url.replace(ub, "");
            b.context = a && a.context != null ? a.context : b;
            if (b.data && b.processData && typeof b.data !== "string") b.data = c.param(b.data, b.traditional);
            if (b.dataType === "jsonp") {
                if (h === "GET") T.test(b.url) || (b.url += (ja.test(b.url) ? "&" : "?") + (b.jsonp || "callback") + "=?"); else if (!b.data ||
                    !T.test(b.data)) b.data = (b.data ? b.data + "&" : "") + (b.jsonp || "callback") + "=?";
                b.dataType = "json"
            }
            if (b.dataType === "json" && (b.data && T.test(b.data) || T.test(b.url))) {
                d = b.jsonpCallback || "jsonp" + mb++;
                if (b.data) b.data = (b.data + "").replace(T, "=" + d + "$1");
                b.url = b.url.replace(T, "=" + d + "$1");
                b.dataType = "script";
                var k = E[d];
                E[d] = function (m) {
                    if (c.isFunction(k)) k(m); else {
                        E[d] = B;
                        try {
                            delete E[d]
                        } catch (p) {
                        }
                    }
                    f = m;
                    c.handleSuccess(b, w, e, f);
                    c.handleComplete(b, w, e, f);
                    r && r.removeChild(A)
                }
            }
            if (b.dataType === "script" && b.cache === null) b.cache =
                false;
            if (b.cache === false && l) {
                var o = c.now(), x = b.url.replace(rb, "$1_=" + o);
                b.url = x + (x === b.url ? (ja.test(b.url) ? "&" : "?") + "_=" + o : "")
            }
            if (b.data && l) b.url += (ja.test(b.url) ? "&" : "?") + b.data;
            b.global && c.active++ === 0 && c.event.trigger("ajaxStart");
            o = (o = sb.exec(b.url)) && (o[1] && o[1].toLowerCase() !== location.protocol || o[2].toLowerCase() !== location.host);
            if (b.dataType === "script" && h === "GET" && o) {
                var r = t.getElementsByTagName("head")[0] || t.documentElement, A = t.createElement("script");
                if (b.scriptCharset) A.charset = b.scriptCharset;
                A.src = b.url;
                if (!d) {
                    var C = false;
                    A.onload = A.onreadystatechange = function () {
                        if (!C && (!this.readyState || this.readyState === "loaded" || this.readyState === "complete")) {
                            C = true;
                            c.handleSuccess(b, w, e, f);
                            c.handleComplete(b, w, e, f);
                            A.onload = A.onreadystatechange = null;
                            r && A.parentNode && r.removeChild(A)
                        }
                    }
                }
                r.insertBefore(A, r.firstChild);
                return B
            }
            var J = false, w = b.xhr();
            if (w) {
                b.username ? w.open(h, b.url, b.async, b.username, b.password) : w.open(h, b.url, b.async);
                try {
                    if (b.data != null && !l || a && a.contentType) w.setRequestHeader("Content-Type",
                        b.contentType);
                    if (b.ifModified) {
                        c.lastModified[b.url] && w.setRequestHeader("If-Modified-Since", c.lastModified[b.url]);
                        c.etag[b.url] && w.setRequestHeader("If-None-Match", c.etag[b.url])
                    }
                    o || w.setRequestHeader("X-Requested-With", "XMLHttpRequest");
                    w.setRequestHeader("Accept", b.dataType && b.accepts[b.dataType] ? b.accepts[b.dataType] + ", */*; q=0.01" : b.accepts._default)
                } catch (I) {
                }
                if (b.beforeSend && b.beforeSend.call(b.context, w, b) === false) {
                    b.global && c.active-- === 1 && c.event.trigger("ajaxStop");
                    w.abort();
                    return false
                }
                b.global &&
                c.triggerGlobal(b, "ajaxSend", [w, b]);
                var L = w.onreadystatechange = function (m) {
                    if (!w || w.readyState === 0 || m === "abort") {
                        J || c.handleComplete(b, w, e, f);
                        J = true;
                        if (w) w.onreadystatechange = c.noop
                    } else if (!J && w && (w.readyState === 4 || m === "timeout")) {
                        J = true;
                        w.onreadystatechange = c.noop;
                        e = m === "timeout" ? "timeout" : !c.httpSuccess(w) ? "error" : b.ifModified && c.httpNotModified(w, b.url) ? "notmodified" : "success";
                        var p;
                        if (e === "success") try {
                            f = c.httpData(w, b.dataType, b)
                        } catch (q) {
                            e = "parsererror";
                            p = q
                        }
                        if (e === "success" || e === "notmodified") d ||
                        c.handleSuccess(b, w, e, f); else c.handleError(b, w, e, p);
                        d || c.handleComplete(b, w, e, f);
                        m === "timeout" && w.abort();
                        if (b.async) w = null
                    }
                };
                try {
                    var g = w.abort;
                    w.abort = function () {
                        w && Function.prototype.call.call(g, w);
                        L("abort")
                    }
                } catch (i) {
                }
                b.async && b.timeout > 0 && setTimeout(function () {
                    w && !J && L("timeout")
                }, b.timeout);
                try {
                    w.send(l || b.data == null ? null : b.data)
                } catch (n) {
                    c.handleError(b, w, null, n);
                    c.handleComplete(b, w, e, f)
                }
                b.async || L();
                return w
            }
        }, param: function (a, b) {
            var d = [], e = function (h, l) {
                l = c.isFunction(l) ? l() : l;
                d[d.length] =
                    encodeURIComponent(h) + "=" + encodeURIComponent(l)
            };
            if (b === B) b = c.ajaxSettings.traditional;
            if (c.isArray(a) || a.jquery) c.each(a, function () {
                e(this.name, this.value)
            }); else for (var f in a) da(f, a[f], b, e);
            return d.join("&").replace(tb, "+")
        }
    });
    c.extend({
        active: 0, lastModified: {}, etag: {}, handleError: function (a, b, d, e) {
            a.error && a.error.call(a.context, b, d, e);
            a.global && c.triggerGlobal(a, "ajaxError", [b, a, e])
        }, handleSuccess: function (a, b, d, e) {
            a.success && a.success.call(a.context, e, d, b);
            a.global && c.triggerGlobal(a, "ajaxSuccess",
                [b, a])
        }, handleComplete: function (a, b, d) {
            a.complete && a.complete.call(a.context, b, d);
            a.global && c.triggerGlobal(a, "ajaxComplete", [b, a]);
            a.global && c.active-- === 1 && c.event.trigger("ajaxStop")
        }, triggerGlobal: function (a, b, d) {
            (a.context && a.context.url == null ? c(a.context) : c.event).trigger(b, d)
        }, httpSuccess: function (a) {
            try {
                return !a.status && location.protocol === "file:" || a.status >= 200 && a.status < 300 || a.status === 304 || a.status === 1223
            } catch (b) {
            }
            return false
        }, httpNotModified: function (a, b) {
            var d = a.getResponseHeader("Last-Modified"),
                e = a.getResponseHeader("Etag");
            if (d) c.lastModified[b] = d;
            if (e) c.etag[b] = e;
            return a.status === 304
        }, httpData: function (a, b, d) {
            var e = a.getResponseHeader("content-type") || "", f = b === "xml" || !b && e.indexOf("xml") >= 0;
            a = f ? a.responseXML : a.responseText;
            f && a.documentElement.nodeName === "parsererror" && c.error("parsererror");
            if (d && d.dataFilter) a = d.dataFilter(a, b);
            if (typeof a === "string") if (b === "json" || !b && e.indexOf("json") >= 0) a = c.parseJSON(a); else if (b === "script" || !b && e.indexOf("javascript") >= 0) c.globalEval(a);
            return a
        }
    });
    if (E.ActiveXObject) c.ajaxSettings.xhr = function () {
        if (E.location.protocol !== "file:") try {
            return new E.XMLHttpRequest
        } catch (a) {
        }
        try {
            return new E.ActiveXObject("Microsoft.XMLHTTP")
        } catch (b) {
        }
    };
    c.support.ajax = !!c.ajaxSettings.xhr();
    var ea = {}, vb = /^(?:toggle|show|hide)$/, wb = /^([+\-]=)?([\d+.\-]+)(.*)$/, ba,
        pa = [["height", "marginTop", "marginBottom", "paddingTop", "paddingBottom"], ["width", "marginLeft", "marginRight", "paddingLeft", "paddingRight"], ["opacity"]];
    c.fn.extend({
        show: function (a, b, d) {
            if (a || a === 0) return this.animate(S("show",
                3), a, b, d); else {
                d = 0;
                for (var e = this.length; d < e; d++) {
                    a = this[d];
                    b = a.style.display;
                    if (!c.data(a, "olddisplay") && b === "none") b = a.style.display = "";
                    b === "" && c.css(a, "display") === "none" && c.data(a, "olddisplay", qa(a.nodeName))
                }
                for (d = 0; d < e; d++) {
                    a = this[d];
                    b = a.style.display;
                    if (b === "" || b === "none") a.style.display = c.data(a, "olddisplay") || ""
                }
                return this
            }
        }, hide: function (a, b, d) {
            if (a || a === 0) return this.animate(S("hide", 3), a, b, d); else {
                a = 0;
                for (b = this.length; a < b; a++) {
                    d = c.css(this[a], "display");
                    d !== "none" && c.data(this[a], "olddisplay",
                        d)
                }
                for (a = 0; a < b; a++) this[a].style.display = "none";
                return this
            }
        }, _toggle: c.fn.toggle, toggle: function (a, b, d) {
            var e = typeof a === "boolean";
            if (c.isFunction(a) && c.isFunction(b)) this._toggle.apply(this, arguments); else a == null || e ? this.each(function () {
                var f = e ? a : c(this).is(":hidden");
                c(this)[f ? "show" : "hide"]()
            }) : this.animate(S("toggle", 3), a, b, d);
            return this
        }, fadeTo: function (a, b, d, e) {
            return this.filter(":hidden").css("opacity", 0).show().end().animate({opacity: b}, a, d, e)
        }, animate: function (a, b, d, e) {
            var f = c.speed(b,
                d, e);
            if (c.isEmptyObject(a)) return this.each(f.complete);
            return this[f.queue === false ? "each" : "queue"](function () {
                var h = c.extend({}, f), l, k = this.nodeType === 1, o = k && c(this).is(":hidden"), x = this;
                for (l in a) {
                    var r = c.camelCase(l);
                    if (l !== r) {
                        a[r] = a[l];
                        delete a[l];
                        l = r
                    }
                    if (a[l] === "hide" && o || a[l] === "show" && !o) return h.complete.call(this);
                    if (k && (l === "height" || l === "width")) {
                        h.overflow = [this.style.overflow, this.style.overflowX, this.style.overflowY];
                        if (c.css(this, "display") === "inline" && c.css(this, "float") === "none") if (c.support.inlineBlockNeedsLayout) if (qa(this.nodeName) ===
                            "inline") this.style.display = "inline-block"; else {
                            this.style.display = "inline";
                            this.style.zoom = 1
                        } else this.style.display = "inline-block"
                    }
                    if (c.isArray(a[l])) {
                        (h.specialEasing = h.specialEasing || {})[l] = a[l][1];
                        a[l] = a[l][0]
                    }
                }
                if (h.overflow != null) this.style.overflow = "hidden";
                h.curAnim = c.extend({}, a);
                c.each(a, function (A, C) {
                    var J = new c.fx(x, h, A);
                    if (vb.test(C)) J[C === "toggle" ? o ? "show" : "hide" : C](a); else {
                        var w = wb.exec(C), I = J.cur() || 0;
                        if (w) {
                            var L = parseFloat(w[2]), g = w[3] || "px";
                            if (g !== "px") {
                                c.style(x, A, (L || 1) + g);
                                I = (L ||
                                    1) / J.cur() * I;
                                c.style(x, A, I + g)
                            }
                            if (w[1]) L = (w[1] === "-=" ? -1 : 1) * L + I;
                            J.custom(I, L, g)
                        } else J.custom(I, C, "")
                    }
                });
                return true
            })
        }, stop: function (a, b) {
            var d = c.timers;
            a && this.queue([]);
            this.each(function () {
                for (var e = d.length - 1; e >= 0; e--) if (d[e].elem === this) {
                    b && d[e](true);
                    d.splice(e, 1)
                }
            });
            b || this.dequeue();
            return this
        }
    });
    c.each({
        slideDown: S("show", 1),
        slideUp: S("hide", 1),
        slideToggle: S("toggle", 1),
        fadeIn: {opacity: "show"},
        fadeOut: {opacity: "hide"},
        fadeToggle: {opacity: "toggle"}
    }, function (a, b) {
        c.fn[a] = function (d, e, f) {
            return this.animate(b,
                d, e, f)
        }
    });
    c.extend({
        speed: function (a, b, d) {
            var e = a && typeof a === "object" ? c.extend({}, a) : {
                complete: d || !d && b || c.isFunction(a) && a,
                duration: a,
                easing: d && b || b && !c.isFunction(b) && b
            };
            e.duration = c.fx.off ? 0 : typeof e.duration === "number" ? e.duration : e.duration in c.fx.speeds ? c.fx.speeds[e.duration] : c.fx.speeds._default;
            e.old = e.complete;
            e.complete = function () {
                e.queue !== false && c(this).dequeue();
                c.isFunction(e.old) && e.old.call(this)
            };
            return e
        }, easing: {
            linear: function (a, b, d, e) {
                return d + e * a
            }, swing: function (a, b, d, e) {
                return (-Math.cos(a *
                    Math.PI) / 2 + 0.5) * e + d
            }
        }, timers: [], fx: function (a, b, d) {
            this.options = b;
            this.elem = a;
            this.prop = d;
            if (!b.orig) b.orig = {}
        }
    });
    c.fx.prototype = {
        update: function () {
            this.options.step && this.options.step.call(this.elem, this.now, this);
            (c.fx.step[this.prop] || c.fx.step._default)(this)
        }, cur: function () {
            if (this.elem[this.prop] != null && (!this.elem.style || this.elem.style[this.prop] == null)) return this.elem[this.prop];
            var a = parseFloat(c.css(this.elem, this.prop));
            return a && a > -1E4 ? a : 0
        }, custom: function (a, b, d) {
            function e(l) {
                return f.step(l)
            }

            var f = this, h = c.fx;
            this.startTime = c.now();
            this.start = a;
            this.end = b;
            this.unit = d || this.unit || "px";
            this.now = this.start;
            this.pos = this.state = 0;
            e.elem = this.elem;
            if (e() && c.timers.push(e) && !ba) ba = setInterval(h.tick, h.interval)
        }, show: function () {
            this.options.orig[this.prop] = c.style(this.elem, this.prop);
            this.options.show = true;
            this.custom(this.prop === "width" || this.prop === "height" ? 1 : 0, this.cur());
            c(this.elem).show()
        }, hide: function () {
            this.options.orig[this.prop] = c.style(this.elem, this.prop);
            this.options.hide = true;
            this.custom(this.cur(), 0)
        }, step: function (a) {
            var b = c.now(), d = true;
            if (a || b >= this.options.duration + this.startTime) {
                this.now = this.end;
                this.pos = this.state = 1;
                this.update();
                this.options.curAnim[this.prop] = true;
                for (var e in this.options.curAnim) if (this.options.curAnim[e] !== true) d = false;
                if (d) {
                    if (this.options.overflow != null && !c.support.shrinkWrapBlocks) {
                        var f = this.elem, h = this.options;
                        c.each(["", "X", "Y"], function (k, o) {
                            f.style["overflow" + o] = h.overflow[k]
                        })
                    }
                    this.options.hide && c(this.elem).hide();
                    if (this.options.hide ||
                        this.options.show) for (var l in this.options.curAnim) c.style(this.elem, l, this.options.orig[l]);
                    this.options.complete.call(this.elem)
                }
                return false
            } else {
                a = b - this.startTime;
                this.state = a / this.options.duration;
                b = this.options.easing || (c.easing.swing ? "swing" : "linear");
                this.pos = c.easing[this.options.specialEasing && this.options.specialEasing[this.prop] || b](this.state, a, 0, 1, this.options.duration);
                this.now = this.start + (this.end - this.start) * this.pos;
                this.update()
            }
            return true
        }
    };
    c.extend(c.fx, {
        tick: function () {
            for (var a =
                c.timers, b = 0; b < a.length; b++) a[b]() || a.splice(b--, 1);
            a.length || c.fx.stop()
        }, interval: 13, stop: function () {
            clearInterval(ba);
            ba = null
        }, speeds: {slow: 600, fast: 200, _default: 400}, step: {
            opacity: function (a) {
                c.style(a.elem, "opacity", a.now)
            }, _default: function (a) {
                if (a.elem.style && a.elem.style[a.prop] != null) a.elem.style[a.prop] = (a.prop === "width" || a.prop === "height" ? Math.max(0, a.now) : a.now) + a.unit; else a.elem[a.prop] = a.now
            }
        }
    });
    if (c.expr && c.expr.filters) c.expr.filters.animated = function (a) {
        return c.grep(c.timers, function (b) {
            return a ===
                b.elem
        }).length
    };
    var xb = /^t(?:able|d|h)$/i, Ia = /^(?:body|html)$/i;
    c.fn.offset = "getBoundingClientRect" in t.documentElement ? function (a) {
        var b = this[0], d;
        if (a) return this.each(function (l) {
            c.offset.setOffset(this, a, l)
        });
        if (!b || !b.ownerDocument) return null;
        if (b === b.ownerDocument.body) return c.offset.bodyOffset(b);
        try {
            d = b.getBoundingClientRect()
        } catch (e) {
        }
        var f = b.ownerDocument, h = f.documentElement;
        if (!d || !c.contains(h, b)) return d || {top: 0, left: 0};
        b = f.body;
        f = fa(f);
        return {
            top: d.top + (f.pageYOffset || c.support.boxModel &&
                h.scrollTop || b.scrollTop) - (h.clientTop || b.clientTop || 0),
            left: d.left + (f.pageXOffset || c.support.boxModel && h.scrollLeft || b.scrollLeft) - (h.clientLeft || b.clientLeft || 0)
        }
    } : function (a) {
        var b = this[0];
        if (a) return this.each(function (x) {
            c.offset.setOffset(this, a, x)
        });
        if (!b || !b.ownerDocument) return null;
        if (b === b.ownerDocument.body) return c.offset.bodyOffset(b);
        c.offset.initialize();
        var d, e = b.offsetParent, f = b.ownerDocument, h = f.documentElement, l = f.body;
        d = (f = f.defaultView) ? f.getComputedStyle(b, null) : b.currentStyle;
        for (var k = b.offsetTop, o = b.offsetLeft; (b = b.parentNode) && b !== l && b !== h;) {
            if (c.offset.supportsFixedPosition && d.position === "fixed") break;
            d = f ? f.getComputedStyle(b, null) : b.currentStyle;
            k -= b.scrollTop;
            o -= b.scrollLeft;
            if (b === e) {
                k += b.offsetTop;
                o += b.offsetLeft;
                if (c.offset.doesNotAddBorder && !(c.offset.doesAddBorderForTableAndCells && xb.test(b.nodeName))) {
                    k += parseFloat(d.borderTopWidth) || 0;
                    o += parseFloat(d.borderLeftWidth) || 0
                }
                e = b.offsetParent
            }
            if (c.offset.subtractsBorderForOverflowNotVisible && d.overflow !== "visible") {
                k +=
                    parseFloat(d.borderTopWidth) || 0;
                o += parseFloat(d.borderLeftWidth) || 0
            }
            d = d
        }
        if (d.position === "relative" || d.position === "static") {
            k += l.offsetTop;
            o += l.offsetLeft
        }
        if (c.offset.supportsFixedPosition && d.position === "fixed") {
            k += Math.max(h.scrollTop, l.scrollTop);
            o += Math.max(h.scrollLeft, l.scrollLeft)
        }
        return {top: k, left: o}
    };
    c.offset = {
        initialize: function () {
            var a = t.body, b = t.createElement("div"), d, e, f, h = parseFloat(c.css(a, "marginTop")) || 0;
            c.extend(b.style, {
                position: "absolute", top: 0, left: 0, margin: 0, border: 0, width: "1px",
                height: "1px", visibility: "hidden"
            });
            b.innerHTML = "<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
            a.insertBefore(b, a.firstChild);
            d = b.firstChild;
            e = d.firstChild;
            f = d.nextSibling.firstChild.firstChild;
            this.doesNotAddBorder = e.offsetTop !== 5;
            this.doesAddBorderForTableAndCells =
                f.offsetTop === 5;
            e.style.position = "fixed";
            e.style.top = "20px";
            this.supportsFixedPosition = e.offsetTop === 20 || e.offsetTop === 15;
            e.style.position = e.style.top = "";
            d.style.overflow = "hidden";
            d.style.position = "relative";
            this.subtractsBorderForOverflowNotVisible = e.offsetTop === -5;
            this.doesNotIncludeMarginInBodyOffset = a.offsetTop !== h;
            a.removeChild(b);
            c.offset.initialize = c.noop
        }, bodyOffset: function (a) {
            var b = a.offsetTop, d = a.offsetLeft;
            c.offset.initialize();
            if (c.offset.doesNotIncludeMarginInBodyOffset) {
                b += parseFloat(c.css(a,
                    "marginTop")) || 0;
                d += parseFloat(c.css(a, "marginLeft")) || 0
            }
            return {top: b, left: d}
        }, setOffset: function (a, b, d) {
            var e = c.css(a, "position");
            if (e === "static") a.style.position = "relative";
            var f = c(a), h = f.offset(), l = c.css(a, "top"), k = c.css(a, "left"),
                o = e === "absolute" && c.inArray("auto", [l, k]) > -1;
            e = {};
            var x = {};
            if (o) x = f.position();
            l = o ? x.top : parseInt(l, 10) || 0;
            k = o ? x.left : parseInt(k, 10) || 0;
            if (c.isFunction(b)) b = b.call(a, d, h);
            if (b.top != null) e.top = b.top - h.top + l;
            if (b.left != null) e.left = b.left - h.left + k;
            "using" in b ? b.using.call(a,
                e) : f.css(e)
        }
    };
    c.fn.extend({
        position: function () {
            if (!this[0]) return null;
            var a = this[0], b = this.offsetParent(), d = this.offset(),
                e = Ia.test(b[0].nodeName) ? {top: 0, left: 0} : b.offset();
            d.top -= parseFloat(c.css(a, "marginTop")) || 0;
            d.left -= parseFloat(c.css(a, "marginLeft")) || 0;
            e.top += parseFloat(c.css(b[0], "borderTopWidth")) || 0;
            e.left += parseFloat(c.css(b[0], "borderLeftWidth")) || 0;
            return {top: d.top - e.top, left: d.left - e.left}
        }, offsetParent: function () {
            return this.map(function () {
                for (var a = this.offsetParent || t.body; a && !Ia.test(a.nodeName) &&
                c.css(a, "position") === "static";) a = a.offsetParent;
                return a
            })
        }
    });
    c.each(["Left", "Top"], function (a, b) {
        var d = "scroll" + b;
        c.fn[d] = function (e) {
            var f = this[0], h;
            if (!f) return null;
            if (e !== B) return this.each(function () {
                if (h = fa(this)) h.scrollTo(!a ? e : c(h).scrollLeft(), a ? e : c(h).scrollTop()); else this[d] = e
            }); else return (h = fa(f)) ? "pageXOffset" in h ? h[a ? "pageYOffset" : "pageXOffset"] : c.support.boxModel && h.document.documentElement[d] || h.document.body[d] : f[d]
        }
    });
    c.each(["Height", "Width"], function (a, b) {
        var d = b.toLowerCase();
        c.fn["inner" + b] = function () {
            return this[0] ? parseFloat(c.css(this[0], d, "padding")) : null
        };
        c.fn["outer" + b] = function (e) {
            return this[0] ? parseFloat(c.css(this[0], d, e ? "margin" : "border")) : null
        };
        c.fn[d] = function (e) {
            var f = this[0];
            if (!f) return e == null ? null : this;
            if (c.isFunction(e)) return this.each(function (l) {
                var k = c(this);
                k[d](e.call(this, l, k[d]()))
            });
            if (c.isWindow(f)) return f.document.compatMode === "CSS1Compat" && f.document.documentElement["client" + b] || f.document.body["client" + b]; else if (f.nodeType === 9) return Math.max(f.documentElement["client" +
            b], f.body["scroll" + b], f.documentElement["scroll" + b], f.body["offset" + b], f.documentElement["offset" + b]); else if (e === B) {
                f = c.css(f, d);
                var h = parseFloat(f);
                return c.isNaN(h) ? f : h
            } else return this.css(d, typeof e === "string" ? e : e + "px")
        }
    })
})(window);
window.ec || (window.ec = {});
ol.pkg = function (j, h, g) {
    var b, d, u;
    if (arguments.length == 3) {
        b = j;
        d = h;
        u = g
    } else {
        b = window;
        d = j;
        u = h
    }
    if (!d || !d.length) {
        return null
    }
    var m = d.split(".");
    for (var l = b, k = 0; k < m.length - 1; k++) {
        l[m[k]] || (l[m[k]] = {});
        l = l[m[k]]
    }
    l = (l[m[m.length - 1]] = u || l[m[m.length - 1]] || {});
    return l
};
ol.define = function (a, l, k) {
    var m = window, j, d;
    if (arguments.length == 3) {
        m = a;
        j = l;
        d = k
    } else {
        j = a;
        d = l
    }
    var g = j.split("."), y, h;
    for (var b = m, n = 0; n < g.length - 1; n++) {
        b[g[n]] || (b[g[n]] = {});
        b = b[g[n]]
    }
    h = g[g.length - 1];
    y = b[h];
    if (!y) {
        y = b[h] = function () {
            var p = arguments.callee, o = p._define, q;
            for (var c = arguments.length, f = c + 10; c < f; c++) {
                q = o[h + "_" + c];
                if (q) {
                    o[h + "_" + arguments.length] = o[h + "_" + c];
                    break
                }
            }
            if (!q) {
                q = o[h + "_0"]
            }
            if (!q) {
                if (logger && logger.error) {
                    logger.error(j, "function is undefined.")
                }
                return
            }
            q.apply(p, arguments)
        };
        y._define = {}
    }
    y._define[h + "_" + d.length] = d
};
ol.Cache = {
    _cache: {}, _size: 0, set: function (b, a) {
        if (!ol.Cache.contains(b)) {
            ol.Cache._size++
        }
        ol.Cache._cache[b] = a;
        return a
    }, get: function (d, a) {
        var b = ol.Cache;
        var c = b._cache[d];
        if (c) {
            return c
        }
        if (typeof(a) == "function") {
            c = a();
            b._cache[d] = c
        } else {
            if (a) {
                c = a;
                b._cache[d] = c
            } else {
                c = jQuery(d);
                b._cache[d] = c
            }
        }
        b._size++;
        return c
    }, remove: function (a) {
        ol.Cache._size--;
        ol.Cache._cache[a] = null
    }, contains: function (a) {
        return ol.Cache._cache[a]
    }
};
ol.Plugin = {
    if_jquery: function (a, b) {
        try {
            var c = arguments.callee;
            b = b || 2;
            if (typeof(jQuery) != "undefined") {
                a(jQuery)
            } else {
                if (b == 0) {
                    return
                }
                setTimeout(function () {
                    c(a, b - 1)
                }, 1000)
            }
        } catch (d) {
            if (ol.debug) {
                throw d
            }
        }
    }, if_jsapi: function (a) {
        try {
            if (typeof(ol) != "undefined" && typeof(ol.ready) != "undefined") {
                a(ol)
            }
        } catch (b) {
            if (ol.debug) {
                throw b
            }
        }
    }
};
if (ol.isIE6 || ol.isIE7) {
    document.nativeGetElementById = document.getElementById;
    document.getElementById = function (a) {
        var c = document.nativeGetElementById(a);
        if (c) {
            if (c.attributes.id.value == a) {
                return c
            } else {
                for (var b = 1; b < document.all[a].length; b++) {
                    if (document.all[a][b].attributes.id.value == a) {
                        return document.all[a][b]
                    }
                }
            }
        }
        return null
    }
}
if (ol.isIE6) {
    try {
        document.execCommand("BackgroundImageCache", false, true)
    } catch (e) {
    }
}
ol.pkg("ol.ui");
(function () {
    var b = function () {
        var c = {};
        c.width = ol.ui.masker._bwidth;
        c.height = ol.ui.masker._bheight;
        ol.Cache.get("ec_mask").css(c)
    };
    var a = {css: {opacity: 0.2, background: "#000"}};
    ol.ui.masker = {
        isShown: false, mask: function (d) {
            var j = jQuery;
            var f = ol.ui.masker;
            if (f.isShown) {
                return
            }
            d = j.extend(true, {}, a, d);
            var c = ol.Cache.get("ec_mask", function () {
                j(window).resize(function () {
                    if (ol.ui.masker.isShown) {
                        return
                    }
                    ol.Cache.get("ec_mask").css({width: f._bwidth(), height: f._bheight()})
                });
                return j("<div id='ec_mask' class='ec_mask'></div>").appendTo("body").bgiframe()
            });
            f.isShown = true;
            d.css.width = f._bwidth();
            d.css.height = f._bheight();
            d.css.visibility = "visible";
            c.css(d.css);
            j(window).bind("resize", b)
        }, unmask: function () {
            ol.ui.masker.isShown = false;
            ol.Cache.get("ec_mask").css({visibility: "hidden", width: 0, height: 0});
            jQuery(window).unbind("resize", b)
        }, _bheight: function () {
            var d = jQuery;
            if (d.browser.msie && d.browser.version < 7) {
                var c = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);
                var g = Math.max(document.documentElement.offsetHeight, document.body.offsetHeight);
                if (c < g) {
                    return d(window).height()
                } else {
                    return c
                }
            } else {
                return d(document).height()
            }
        }, _bwidth: function () {
            var d = jQuery;
            if (d.browser.msie && d.browser.version < 7) {
                var g = Math.max(document.documentElement.scrollWidth, document.body.scrollWidth);
                var c = Math.max(document.documentElement.offsetWidth, document.body.offsetWidth);
                if (g < c) {
                    return d(window).width()
                } else {
                    return g
                }
            } else {
                return d(document).width()
            }
        }
    }
})();
(function () {
    var a = {event: "hover", menu: null};
    ol.ui.dropdown = function (b, d) {
        var c = this;
        c.hideTimer = null;
        c._objItem;
        c._menuItem;
        c._onMenu = false;
        c._events = {};
        c._isShow = false;
        c._hideMenu = function () {
            c.hideTimer = setTimeout(c.hide, 100)
        };
        c.init = function () {
            var f = jQuery;
            d = f.extend({}, a, d);
            if (d.event == "hover") {
                d.event = "mouseover"
            } else {
                d.event = "click"
            }
            c._objItem = f(b);
            c._menuItem = d.menu ? f(d.menu) : c._objItem.next();
            c._objItem.unbind(d.event).bind(d.event, function (g) {
                clearTimeout(c.hideTimer);
                c.show()
            });
            c._menuItem.find(".dropdown_item").bind("click", function () {
                setTimeout(c.hide)
            })
        };
        c.bind = function (f, j, g) {
            c._menuItem.find(f).bind(j, g)
        };
        c.show = function () {
            switch (d.event) {
                case"mouseover":
                    c._objItem.unbind("mouseout").bind("mouseout", function (f) {
                        c._hideMenu();
                        c._objItem.addClass("hover")
                    });
                    c._menuItem.unbind("mouseover").bind("mouseover", function () {
                        clearTimeout(c.hideTimer);
                        c._menuItem.css("display", "block")
                    }).unbind("mouseout").bind("mouseout", function () {
                        c._hideMenu()
                    });
                    break;
                case"click":
                    if (c._isShow) {
                        c.hide();
                        return
                    } else {
                        c._events.menu_click = function () {
                            c._onMenu = true
                        };
                        c._events.document_click = function (f) {
                            if (f.button != 0) {
                                return true
                            }
                            if (c._onMenu === false) {
                                c.hide()
                            }
                            c._onMenu = false
                        };
                        setTimeout(function () {
                            c._menuItem.bind("click", c._events.menu_click);
                            jQuery(document).bind("click", c._events.document_click)
                        }, 1)
                    }
                    break
            }
            c._objItem.addClass("hover");
            c._menuItem.css("display", "block");
            c._isShow = true
        };
        c.hide = function () {
            if (c._events.document_click) {
                jQuery(document).unbind("click", c._events.document_click)
            }
            if (c._events.menu_click) {
                c._menuItem.unbind("click", c._events.menu_click)
            }
            c._objItem.removeClass("hover");
            c._menuItem.hide();
            c._isShow = false;
            c._onMenu = false
        };
        this.init()
    }
})();
ol.ui.scrollTo = function (p, d) {
    d = d || {offsetY: 45};
    if (typeof(p) != "object") {
        var h = p.toString().substr(0, 1);
        if (!(h == "#" || h == ".")) {
            p = "#" + p
        }
        p = jQuery(p)
    }
    if (p.length == 0) {
        return
    }
    var g = p.offset().top;
    var f = (document.documentElement && !/webkit/ig.test(navigator.userAgent) ? document.documentElement : document.body);
    var b = jQuery(window).height();
    var a = f.scrollTop;
    if (!(a < g && g < a + b)) {
        f.scrollTop = g - d.offsetY
    }
};
(function () {
    var b = {white: {opacity: 0.55, background: "#fff"}, black: {opacity: 0.2, background: "#000"}};
    var a = {selector: "#ec_ui_loading", css: null, modal: true, maskConfig: null};
    ol.ui.loading = {
        options: null, show: function (g) {
            var h = ol.ui.loading;
            if (typeof(g) == "string") {
                g = {maskConfig: {css: b[g]}}
            }
            h.options = jQuery.extend(true, {}, a, g);
            if (h.options.modal) {
                ol.ui.masker.mask(h.options.maskConfig)
            }
            var d = jQuery(h.options.selector);
            if (d.length == 0) {
                d = jQuery('<div id="ec_ui_loading" class="ec_ui_loading"></div>').appendTo("body")
            }
            d.css(h.options.css);
            if (ol.isIE6 || ol.isIE && document.compatMode === "BackCompat") {
                var c = jQuery(window), n = c.scrollTop(), f = c.scrollLeft();
                n += (c.height() - d.height()) / 2;
                f += (c.width() - d.width()) / 2;
                d.css({top: n, left: f})
            }
            d.show();
            d = null;
            h = null
        }, hide: function () {
            var c = ol.ui.loading.options;
            if (c) {
                if (c.modal) {
                    ol.ui.masker.unmask()
                }
                jQuery(c.selector).hide()
            }
        }
    }
})();
(function () {
    var a = {row: "tr", colors: ["#fff", "#f7f7f7"], hover: "#e3f3bf", index: 1, remain: 0, alterNum: 1};
    ol.ui.alternation = function (b, c) {
        var d = jQuery;

        function j(h, g) {
            var f = this;
            this.container = d(h);
            this.data = {};
            this.rows = null;
            this.init = function () {
                this.rows = this.container.find(g.row);
                var k;
                var p;
                for (var l = 0; l < this.rows.length; l++) {
                    k = this.rows[l];
                    k.setAttribute("alternation", l);
                    p = k.getAttribute("group");
                    this.data[l] = {group: p, backgroundColor: ""}
                }
            };
            this.bindColor = function () {
                if (!g.colors) {
                    return
                }
                var k = this.rows.length - g.remain;
                for (var m = g.index; m < k;) {
                    for (var l = 0; l < g.colors.length && m < k; l++) {
                        row = this.rows[m];
                        row.style.backgroundColor = g.colors[l];
                        this.data[m].backgroundColor = g.colors[l];
                        m = m + g.alterNum
                    }
                }
            };
            this.bindEvent = function () {
                this.rows.unbind("mouseover").bind("mouseover", function () {
                    var k = d(this);
                    var p = k.attr("alternation");
                    var o = f.data[p];
                    if (g.hover) {
                        k.css("backgroundColor", g.hover)
                    }
                    if (o.group) {
                        f.container.find(g.row + "[group=" + o.group + "]").addClass("hover")
                    }
                }).unbind("mouseout").bind("mouseout", function () {
                    var k = d(this);
                    var p = k.attr("alternation");
                    var o = f.data[p];
                    if (g.hover) {
                        k.css("backgroundColor", o.backgroundColor)
                    }
                    if (o.group) {
                        f.container.find(g.row + "[group=" + o.group + "]").removeClass("hover")
                    }
                })
            };
            this.init();
            this.bindColor();
            this.bindEvent()
        }

        c = d.extend({}, a, c);
        d(b).each(function () {
            new j(this, c)
        })
    }
})();
(function () {
    var a = function (u, k, h, g) {
        if (u.nodeType === 3) {
            var d = u.data.match(k);
            if (d) {
                var b = document.createElement(h || "span");
                b.className = g || "ec_ui_highlight highlight";
                var j = u.splitText(d.index);
                j.splitText(d[0].length);
                var f = j.cloneNode(true);
                b.appendChild(f);
                j.parentNode.replaceChild(b, j);
                return 1
            }
        } else {
            if ((u.nodeType === 1 && u.childNodes) && !/(script|style)/i.test(u.tagName) && !(u.tagName === h.toUpperCase() && u.className === g)) {
                for (var c = 0; c < u.childNodes.length; c++) {
                    c += a(u.childNodes[c], k, h, g)
                }
            }
        }
        return 0
    };
    ol.ui.highlight = function (j, d, h) {
        var t = {className: null, element: "span", caseSensitive: false, wordsOnly: false};
        jQuery.extend(t, h);
        if (d.constructor === String) {
            d = [d]
        }
        d = jQuery.grep(d, function (l, k) {
            return l != ""
        });
        if (d.length == 0) {
            return this
        }
        var f = d.join("|");
        f = f.replace(/([\\\$\{\}\(\)\[\]\+\?\-\>\<\^\!\.\*])/g, "\\$1");
        var c = t.caseSensitive ? "" : "i";
        var b = "(" + f + ")";
        if (t.wordsOnly) {
            b = "\\b" + b + "\\b"
        }
        var g = new RegExp(b, c);
        var u = j;
        if (typeof(j) == "string") {
            u = ol.Cache.get(j)
        }
        return u.each(function () {
            a(this, g, t.element, t.className)
        })
    }
})();
(function () {
    var a = {
        _ec_ui_alert: {
            _default: {
                title: "\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02be",
                zIndex: 399,
                showCancel: false,
                modal: false,
                draggable: false,
                focus: ".box-ok:first",
                width: 300,
                clickOut: function (d) {
                    d.close()
                }
            }
        }, _ec_ui_info: {}, _ec_ui_warn: {}, _ec_ui_error: {}
    };

    function c(g, h, f) {
        var d = ol.Cache.get;
        var l = d(h.boxid, function () {
            return new ol.box(null, h)
        });
        l.open(g);
        if (f.timeout) {
            if (a[h.boxid].timer) {
                clearTimeout(a[h.boxid].timer)
            }
            a[h.boxid].timer = setTimeout(function () {
                if (ol.isIE6) {
                    l.close()
                } else {
                    l.fadeOut(800)
                }
            }, f.timeout);
            d("#" + h.boxid).unbind("mouseover").bind("mouseover", function () {
                clearTimeout(a[h.boxid].timer)
            }).unbind("mouseout").bind("mouseout", function () {
                a[h.boxid].timer = setTimeout(function () {
                    if (ol.isIE6) {
                        l.close()
                    } else {
                        l.fadeOut(800)
                    }
                }, f.timeout / 2)
            })
        }
    }

    var b = {
        title: "\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02be",
        zIndex: 399,
        showButton: false,
        modal: false,
        draggable: false,
        focus: ".box-close",
        width: 300
    };
    ol.ui.warn = function (f, g) {
        g = jQuery.extend({}, b, g);
        g.boxid = "_ec_ui_warn";
        g.boxclass = "ec_ui_warn";
        var d = {timeout: g.timeout};
        delete g.timeout;
        c(f, g, d)
    };
    ol.ui.info = function (f, g) {
        g = jQuery.extend({}, b, g);
        g.boxid = "_ec_ui_info";
        g.boxclass = "ec_ui_info";
        var d = {timeout: g.timeout};
        delete g.timeout;
        c(f, g, d)
    };
    ol.ui.error = function (f, g) {
        g = jQuery.extend({}, b, g);
        g.boxid = "_ec_ui_error";
        g.boxclass = "ec_ui_error";
        var d = {timeout: g.timeout};
        delete g.timeout;
        c(f, g, d)
    };
    ol.ui.alert = function (f, g) {
        g = jQuery.extend({}, a._ec_ui_alert._default, g);
        g.boxid = "_ec_ui_alert";
        g.boxclass = "ec_ui_alert";
        var d = ol.Cache.get(g.boxid, function () {
            return new ol.box(null, g)
        });
        d.setTitle(g.title);
        d.open(f)
    }
})();
(function () {
    var a = {style: "style1", offsetX: 0, offsetY: 0},
        b = '<div class="ec_ui_ballon"><div id="ballon_header"></div><div id="ballon_body"></div><div id="ballon_footer"></div></div>';
    ol.ui.ballon = function (d, g, h) {
        h = jQuery.extend({}, a, h);
        var n = jQuery(d);
        var c = jQuery(b);
        var f;
        c.find("#ballon_body").html(g || "");
        n.mouseover(function () {
            f = setTimeout(function () {
                var j = h.offsetX || 0;
                var m = h.offsetY || 0;
                var l = n.offset().top + n.height();
                var k = n.offset().left;
                k = Math.max(k + j, 0);
                l = Math.max(l + m, 0);
                c.css({display: "block", top: l, left: k}).addClass(h.style);
                c.appendTo("body").bgiframe()
            }, 250)
        }).mouseout(function () {
            clearTimeout(f);
            c.remove()
        });
        return ol.ui
    }
})();
(function () {
    var a = {css: null, captureInput: false};
    ol.ui.hover = function (c, b) {
        var d = jQuery;
        b = d.extend(true, {}, a, b);
        d(c).each(function () {
            var h = null;
            var j = false;
            var g = false;
            var f = d(this);
            var p = function () {
                if (j || g) {
                    return
                }
                if (b.css) {
                    h = f.attr("style");
                    f.css(b.css)
                } else {
                    f.addClass("hover")
                }
            };
            var o = function () {
                if (j || g) {
                    return
                }
                if (b.css) {
                    f.attr("style", h)
                } else {
                    f.removeClass("hover")
                }
            };
            f.mouseover(function () {
                p();
                g = true
            }).mouseout(function () {
                g = false;
                o()
            });
            if (this.tagName == "INPUT" || this.tagName == "TEXTAREA") {
                f.focus(function () {
                    p();
                    j = true
                }).blur(function () {
                    j = false;
                    o()
                })
            } else {
                if (b.captureInput) {
                    f.find("input[type=text],textarea").bind("focus", function () {
                        p();
                        j = true
                    }).bind("blur", function () {
                        j = false;
                        o()
                    })
                }
            }
        });
        return ol.ui
    }
})();
ol.pkg("ol.lang");
if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function (p, h) {
        if (!ol.util.isArray(this)) {
            return -1
        }
        var c, a, g = "\0";
        if (h != null) {
            c = this.slice(h);
            a = h
        } else {
            c = this;
            a = 0
        }
        var f = g + c.join(g) + g, b = f.indexOf(g + p + g);
        if (b == -1) {
            return -1
        }
        a += f.slice(0, b).replace(/[^\0]/g, "").length;
        return a
    }
}
Array.prototype.clone = function () {
    return this.slice(0)
};
String.prototype.endWith = function (a) {
    if (a == null || a == "" || this.length == 0 || a.length > this.length) {
        return false
    }
    if (this.substring(this.length - a.length) == a) {
        return true
    } else {
        return false
    }
    return true
};
String.prototype.startWith = function (a) {
    if (a == null || a == "" || this.length == 0 || a.length > this.length) {
        return false
    }
    if (this.substr(0, a.length) == a) {
        return true
    } else {
        return false
    }
    return true
};
if (!String.prototype.trim) {
    String.prototype.trim = function () {
        return this.replace(/^\s+/, "").replace(/\s+$/, "")
    }
}
String.prototype.len = function () {
    return this.replace(/[^\x00-\xff]/g, "aa").length
};
String.prototype.replaceAll = function (b, a) {
    return this.replace(new RegExp(b, "gm"), a)
};
String.prototype.parseDate = function (c) {
    var j = {
        "\\.": {v: "\\."},
        "\\?": {v: "\\?"},
        "M+": {v: "(0[1-9]|1[0-2]|[1-9])", k: "MM"},
        "d+": {v: "(3[01]|[12][0-9]|0[1-9]|[1-9])", k: "dd"},
        "y+": {v: "(\\d{4})", k: "yyyy"},
        "H+": {v: "(2[0-3]|[01][0-9]|[0-9])", k: "HH"},
        "m+": {v: "([0-5][0-9]|[0-9])", k: "mm"},
        "s+": {v: "([0-5][0-9]|[0-9])", k: "ss"},
        S: {v: "(\\d+)", k: "S"}
    };
    var b = [];
    var l = c;
    var m;
    var n;
    for (var a in j) {
        if ((m = c.search(new RegExp("(" + a + ")"))) != -1) {
            n = j[a];
            l = l.replace(RegExp.$1, n.v);
            if (n.k) {
                b.push({n: n.k, order: m})
            }
        }
    }
    b.sort(function (k, d) {
        return k.order - d.order
    });
    n = {};
    for (var y = 0; y < b.length; y++) {
        n[b[y].n] = y + 1
    }
    var h = this.match(new RegExp(l));
    if (!h) {
        throw"Invalid String for parse to Date!"
    }
    var f = new Date();
    if (n.yyyy) {
        f.setFullYear(h[n.yyyy])
    }
    if (n.dd) {
        var g = h[n.dd];
        f.setDate(g);
        f.setDate(g)
    } else {
        f.setDate(1);
        f.setDate(1)
    }
    if (n.MM) {
        f.setMonth(h[n.MM] - 1)
    }
    if (n.HH) {
        f.setHours(h[n.HH])
    } else {
        f.setHours(0)
    }
    if (n.mm) {
        f.setMinutes(h[n.mm])
    } else {
        f.setMinutes(0)
    }
    if (n.ss) {
        f.setSeconds(h[n.ss])
    } else {
        f.setSeconds(0)
    }
    if (n.S) {
        f.setMilliseconds(h[n.S])
    } else {
        f.setMilliseconds(0)
    }
    return f
};
Date.prototype.format = function (a) {
    var d = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours() % 12 == 0 ? 12 : this.getHours() % 12,
        "H+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        S: this.getMilliseconds()
    };
    var c = {"0": "\u65e5", "1": "\u4e00", "2": "\u4e8c", "3": "\u4e09", "4": "\u56db", "5": "\u4e94", "6": "\u516d"};
    if (/(y+)/.test(a)) {
        a = a.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length))
    }
    if (/(E+)/.test(a)) {
        a = a.replace(RegExp.$1, ((RegExp.$1.length > 1) ? (RegExp.$1.length > 2 ? "\u661f\u671f" : "\u5468") : "") + c[this.getDay() + ""])
    }
    for (var b in d) {
        if (new RegExp("(" + b + ")").test(a)) {
            a = a.replace(RegExp.$1, (RegExp.$1.length == 1) ? (d[b]) : (("00" + d[b]).substr(("" + d[b]).length)))
        }
    }
    return a
};
if (!
    /*@cc_on!@*/
    0 && window.JSON && window.JSON.parse && window.JSON.stringify) {
    ol.lang.json = (function () {
        var a = /___$/;
        return {
            parse: function (c) {
                try {
                    return window.JSON.parse(c)
                } catch (b) {
                    return false
                }
            }, stringify: function (c) {
                try {
                    return window.JSON.stringify(c, function (d, g) {
                        return !a.test(d) ? g : null
                    })
                } catch (b) {
                    return null
                }
            }
        }
    })()
} else {
    ol.lang.json = function () {
        function f(n) {
            return n < 10 ? "0" + n : n
        }

        Date.prototype.toJSON = function () {
            return [this.getUTCFullYear(), "-", f(this.getUTCMonth() + 1), "-", f(this.getUTCDate()), "T", f(this.getUTCHours()), ":", f(this.getUTCMinutes()), ":", f(this.getUTCSeconds()), "Z"].join("")
        };
        var m = {"\b": "\\b", "\t": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", '"': '\\"', "\\": "\\\\"};

        function stringify(value) {
            var a, i, k, l, r = /["\\\x00-\x1f\x7f-\x9f]/g, v;
            switch (typeof value) {
                case"string":
                    return r.test(value) ? '"' + value.replace(r, function (a) {
                        var c = m[a];
                        if (c) {
                            return c
                        }
                        c = a.charCodeAt();
                        return "\\u00" + Math.floor(c / 16).toString(16) + (c % 16).toString(16)
                    }) + '"' : '"' + value + '"';
                case"number":
                    return isFinite(value) ? String(value) : "null";
                case"boolean":
                case"null":
                    return String(value);
                case"object":
                    if (!value) {
                        return "null"
                    }
                    a = [];
                    if (typeof value.length === "number" && !value.propertyIsEnumerable("length")) {
                        l = value.length;
                        for (i = 0; i < l; i += 1) {
                            a.push(stringify(value[i]) || "null")
                        }
                        return "[" + a.join(",") + "]"
                    }
                    for (k in value) {
                        if (k.match("___$")) {
                            continue
                        }
                        if (value.hasOwnProperty(k)) {
                            if (typeof k === "string") {
                                v = stringify(value[k]);
                                if (v) {
                                    a.push(stringify(k) + ":" + v)
                                }
                            }
                        }
                    }
                    return "{" + a.join(",") + "}"
            }
        }

        return {
            stringify: stringify, parse: function (text) {
                if (/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) {
                    return eval("(" + text + ")")
                }
                return false
            }
        }
    }()
}
ol.pkg("ol.util");
ol.util.trim = function (a) {
    if (a == null) {
        return ""
    }
    if (typeof(a) != "string") {
        return a
    }
    return a.trim()
};
ol.util.left = function (a, c, d) {
    if (a.len() < c) {
        return a
    }
    var b = 0;
    for (var l = 0; l < a.length; l++) {
        if (a.charCodeAt(l) > 128) {
            b = b + 2
        } else {
            b = b + 1
        }
        if (b > c) {
            return a.substring(0, l) + (d ? d : "")
        }
    }
    return a
};
ol.util.isEmpty = function (a) {
    if (ol.util.trim(a) == "") {
        return true
    }
    return false
};
ol.util.isDate = function (a) {
    if (a == null || a == "") {
        return false
    }
    re = /\d{4}-{1}\d{2}-{1}\d{2}$/;
    return a.match(re)
};
ol.util.isNumeric = function (a) {
    strRef = "1234567890";
    if (a == "") {
        return false
    }
    for (i = 0; i < a.length; i++) {
        tempChar = a.substring(i, i + 1);
        if (strRef.indexOf(tempChar, 0) == -1) {
            return false
        }
    }
    return true
};
ol.util.isFloat = function (b) {
    var a = /^[0-9]+.?[0-9]*$/;
    return a.test(s)
};
ol.util.isEmail = function (d, f) {
    if (!d) {
        return false
    }
    var c = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/i;
    var n = new RegExp(c);
    var a;
    if (f) {
        a = d.split(f)
    } else {
        a = [d]
    }
    for (var b = 0; b < a.length; b++) {
        if (a[b].match(n) == null) {
            return false
        }
    }
    return true
};
ol.util.escapeHtml = function (a) {
    if (typeof(a) != "string") {
        return a
    }
    if (ol.util.isEmpty(a)) {
        return ""
    }
    a = a.replaceAll("&", "&amp;");
    a = a.replaceAll('"', "&quot;");
    a = a.replaceAll(" ", "&nbsp;");
    a = a.replaceAll("<", "&lt;");
    a = a.replaceAll(">", "&gt;");
    a = a.replaceAll("'", "&#039;");
    a = a.replaceAll("\r\n", "<br/>");
    a = a.replaceAll("\n", "<br/>");
    a = a.replaceAll("\r", "<br/>");
    return a
};
ol.util.unescapeHtml = function (a) {
    if (typeof(a) != "string") {
        return a
    }
    if (ol.util.isEmpty(a)) {
        return ""
    }
    a = a.replaceAll("&quot;", '"');
    a = a.replaceAll("&nbsp;", " ");
    a = a.replaceAll("&lt;", "<");
    a = a.replaceAll("&gt;", ">");
    a = a.replaceAll("&#039;", "'");
    a = a.replaceAll("<br>", "\n");
    a = a.replaceAll("<br/>", "\n");
    a = a.replaceAll("&#61;", "=");
    a = a.replaceAll("&amp;", "&");
    return a
};
ol.util.isFunction = function (a) {
    if (!a) {
        return false
    }
    return Object.prototype.toString.call(a) === "[object Function]"
};
ol.util.isArray = function (a) {
    if (!a) {
        return false
    }
    return Object.prototype.toString.call(a) === "[object Array]"
};
ol.util.isObject = function (a) {
    if (!a) {
        return false
    }
    return Object.prototype.toString.call(a) === "[object Object]"
};
ol.util.cookie = {
    get: function (a) {
        var f = null;
        if (document.cookie && document.cookie != "") {
            var n = document.cookie.split(";");
            for (var c = 0; c < n.length; c++) {
                var d = (n[c] || "").replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g, "");
                if (d.substring(0, a.length + 1) == (a + "=")) {
                    var b = function (h) {
                        h = h.replace(/\+/g, " ");
                        var g = '()<>@,;:\\"/[]?={}';
                        for (var j = 0; j < g.length; j++) {
                            if (h.indexOf(g.charAt(j)) != -1) {
                                if (h.startWith('"')) {
                                    h = h.substring(1)
                                }
                                if (h.endWith('"')) {
                                    h = h.substring(0, h.length - 1)
                                }
                                break
                            }
                        }
                        return decodeURIComponent(h)
                    };
                    f = b(d.substring(a.length + 1));
                    break
                }
            }
        }
        return f
    }, set: function (r, f, d) {
        d = d || {};
        if (f === null) {
            f = "";
            d.expires = -1
        }
        var b = "";
        if (d.expires && (typeof d.expires == "number" || d.expires.toUTCString)) {
            var c;
            if (typeof d.expires == "number") {
                c = new Date();
                c.setTime(c.getTime() + (d.expires * 24 * 60 * 60 * 1000))
            } else {
                c = d.expires
            }
            b = "; expires=" + c.toUTCString()
        }
        var a = "; path=" + (d.path || "/");
        var g = d.domain ? "; domain=" + (d.domain) : "";
        var h = d.secure ? "; secure" : "";
        document.cookie = [r, "=", encodeURIComponent(f), b, a, g, h].join("")
    }, remove: function (a) {
        this.set(a, null)
    }
};
ol.Plugin.if_jquery(function (a) {
    ol.Plugin.if_jsapi(function (c) {
        ol._setLoadStatus("jquery.bgiframe", "complete")
    });
    a.fn.bgiframe = (a.browser.msie && /msie 6\.0/i.test(navigator.userAgent) ? function (d) {
        d = a.extend({
            top: "auto",
            left: "auto",
            width: "auto",
            height: "auto",
            opacity: true,
            src: "javascript:false;"
        }, d);
        var c = '<iframe class="bgiframe"frameborder="0"tabindex="-1"src="' + d.src + '"style="display:block;position:absolute;z-index:-1;' + (d.opacity !== false ? "filter:Alpha(Opacity='0');" : "") + "top:" + (d.top == "auto" ? "expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')" : b(d.top)) + ";left:" + (d.left == "auto" ? "expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')" : b(d.left)) + ";width:" + (d.width == "auto" ? "expression(this.parentNode.offsetWidth+'px')" : b(d.width)) + ";height:" + (d.height == "auto" ? "expression(this.parentNode.offsetHeight+'px')" : b(d.height)) + ';"/>';
        return this.each(function () {
            if (a(this).children("iframe.bgiframe").length === 0) {
                this.insertBefore(document.createElement(c), this.firstChild)
            }
        })
    } : function () {
        return this
    });
    a.fn.bgIframe = a.fn.bgiframe;

    function b(c) {
        return c && c.constructor === Number ? c + "px" : c
    }
});
ol.Plugin.if_jquery(function (a) {
    a.fn.check = function (b) {
        switch (b) {
            case true:
                return this.each(function () {
                    this.checked = true
                });
                break;
            case false:
                return this.each(function () {
                    this.checked = false
                });
                break;
            default:
                return this.each(function () {
                    this.checked = !this.checked
                })
        }
    };
    a.fn.select = function (b) {
        return this.each(function () {
            a(this).val(b)
        })
    }
});
ol.pkg("ol.form.input");
(function () {
    var a = 0;
    ol.form.input.label = function (b, j, c) {
        if (!j) {
            throw ("Please set label text!");
            return ol.form.input
        }
        var d = jQuery;
        c = d.extend({}, ol.form.input.label.defaults, c);
        d(b).each(function () {
            var q = d(this), k = q.attr("id"), g = Number(q.css("z-index")) || 1,
                A = parseInt(q.css("margin-top"), 10) + parseInt(q.css("border-top-width"), 10),
                p = parseInt(q.css("margin-left"), 10) + parseInt(q.css("border-left-width"), 10),
                h = d('<label style="display:none;position:absolute;cursor:text;float:left;z-index:' + (g + 1) + '">' + j + "</label>").attr("class", q.attr("class")),
                f = d('<input style="border:none;background:transparent;cursor:text;margin:0;" value="' + j + '" tabindex=-1 readonly>');
            if ("TEXTAREA" == q.attr("tagName")) {
                f.css("height", "auto")
            }
            if (!k && c.autoId) {
                k = "input_label_" + (a++);
                q.attr("id", k)
            }
            var l = {color: c.color};
            h.attr("for", k).css(l);
            q.css("z-index", g).before(h);
            var o = q.parents("form");
            if (o.length > 0) {
                o.bind("reset", function () {
                    setTimeout(function () {
                        n()
                    }, 150)
                })
            }
            var n = function () {
                if (q.attr("value").length == 0) {
                    h.css("display", "block")
                }
            }, m = function () {
                h.css("display", "none")
            };
            q.bind("blur", n).bind("focus", m);
            if (document.activeElement != q[0]) {
                n()
            }
        });
        return ol.form.input
    }
})();
ol.form.input.label.defaults = {color: "#999", autoId: true};
(function () {
    var b = {max: Number.MAX_VALUE, exceedCallback: null}, a = function (j) {
        var d = j.length, f = j.replace(/[^\x00-\xff]/g, "").length,
            c = (f % 2 == 0 ? f / 2 : parseInt(f / 2) + 1) + (d - f);
        return c
    };
    ol.form.input.wordCount = function (g, c) {
        var d = jQuery;
        opt = d.extend({}, b, c);
        d(g).each(function (j) {
            if (typeof(opt.callback) == "function") {
                var f = a(this.value);
                opt.callback.call(this, f);
                if (f > opt.max && opt.exceedCallback) {
                    opt.exceedCallback.call(this, f)
                }
            }
            d(this).bind("keyup", function () {
                var h = a(this.value);
                if (typeof(opt.callback) == "function") {
                    opt.callback.call(this, h)
                }
                if (h > opt.max && opt.exceedCallback) {
                    opt.exceedCallback.call(this, h)
                }
            })
        })
    }
})();
ol.pkg("ol.form.validator");
(function () {
    var g = function (m, l) {
        if (logger && logger.warn) {
            logger.warn(m, l)
        }
    }, a = function (m, l) {
        if (logger && logger.error) {
            logger.error(m, l)
        }
    }, j = {
        trim: true,
        validOnChange: false,
        allowEmpty: true,
        async: true,
        errorClass: null,
        successFunction: null,
        errorFunction: null
    };
    var b = {};
    var k = {};
    var x = function (q, t, m, n, r, l) {
        jQuery.extend(l, m);
        if (n) {
            r = k[n];
            if (!r) {
                g(n + " rule is undefined!");
                return true
            }
        }
        var o;
        if (n) {
            l.type = n
        }
        if (r.length == 3) {
            o = r(q, t, l)
        } else {
            o = r(q, l)
        }
        if (!o) {
            if (l.errorFunction) {
                var p = function () {
                    if (m.errorClass && t) {
                        t.addClass(m.errorClass)
                    }
                    l.errorFunction(t || q, l)
                };
                if (m.async) {
                    setTimeout(p, 1)
                } else {
                    p()
                }
            }
            return false
        }
        return true
    };
    var c = function (q, r, n, l) {
        if (!n.type) {
            if (!x(q, r, n, null, n.rule, l)) {
                return false
            }
        } else {
            var o = n.type;
            if (typeof(n.type) == "string") {
                o = [n.type]
            }
            var p = {};
            for (var m = 0; m < o.length; m++) {
                if (!p[o[m]]) {
                    if (!x(q, r, n, o[m], null, l)) {
                        return false
                    }
                    p[o[m]] = 1
                }
            }
        }
        return true
    };
    var d = function (l) {
        var o = l.attr("validator");
        if (!o) {
            return true
        }
        var w = b[o];
        var u;
        switch (l.attr("tagName")) {
            case"SELECT":
                u = l.val();
                break;
            default:
                u = l[0].value
        }
        var t = {};
        var q = [];
        for (var m = 0; m < w.length; m++) {
            var p = {};
            if (w[m].trim) {
                u = $.trim(u)
            }
            if (!c(u, l, w[m], p)) {
                return false
            }
            q.push(p)
        }
        for (var m = 0; m < w.length; m++) {
            var r = w[m];
            if (r.successFunction) {
                var v = q[m];
                var n = function () {
                    if (r.errorClass && l) {
                        l.removeClass(r.errorClass)
                    }
                    r.successFunction(l || u, v)
                };
                if (r.async) {
                    setTimeout(n, 1)
                } else {
                    n()
                }
            }
        }
        return true
    };
    ol.form.validator = function (n, l) {
        if (typeof(l) == "object") {
            var o = {};
            if (c(n, null, l, o) && l.successFunction) {
                if (l.async) {
                    setTimeout(function () {
                        l.successFunction(n, o)
                    }, 1)
                } else {
                    l.successFunction(n, o)
                }
            }
            return
        }
        var v = n, m = l;
        var r = jQuery(v);
        var t = r.attr("tagName");
        m = (typeof(m) == "boolean" ? m : true);
        switch (t) {
            case"SELECT":
            case"INPUT":
            case"TEXTAREA":
                return d(r)
        }
        var q = r.find("select[validator],input[validator],textarea[validator]");
        var p = true;
        for (var u = 0; u < q.length; u++) {
            if (!d(jQuery(q[u]))) {
                if (m) {
                    return false
                } else {
                    p = false
                }
            }
        }
        return p
    };
    ol.form.validator.register = function (m, l) {
        k[m] = l
    };
    ol.form.validator.get = function (l) {
        return k[l]
    };
    var f = 0;
    ol.form.validator.bind = function (m, o) {
        var n = [];
        var r = jQuery(m);
        o = jQuery.extend({}, j, o);
        if (o.validOnChange) {
            r.unbind("change").bind("change", function (t) {
                ol.form.filter(this);
                ol.form.validator(this, true)
            })
        }
        for (var p = 0; p < r.length; p++) {
            var q = jQuery(r[p]);
            var l = q.attr("validator");
            if (!l) {
                l = "validator" + (++f) + (new Date()).getTime();
                q.attr("validator", l)
            }
            if (!b[l]) {
                b[l] = []
            }
            b[l].push(o);
            n.push(l)
        }
        return n
    };
    ol.form.filter = function (n) {
        if ($(n).attr("name") == "consignee" || $(n).attr("id") == "vatInvoice-consignee" || $(n).attr("id") == "contactBy") {
            var q = /[^a-zA-Z\u4E00-\u9FA5\uFF21-\uFF3A\uFF41-\uFF5A]/g;
            var l = $("#" + $(n).attr("name") + "-msg");
            if (q.test($(n).val())) {
                $(n).val(function () {
                    return $(n).val().replace(q, "")
                });
                if (l.length) {
                    l.addClass("report-errors filter  label-error").text("\u4e3a\u4e86\u66f4\u597d\u7684\u9001\u8fbe\uff0c\u5df2\u5e2e\u4f60\u8fc7\u6ee4\u4e0d\u80fd\u8bc6\u522b\u7684\u5b57\u7b26")
                } else {
                    $(n).next().addClass("report-errors   filter").text("\u4e3a\u4e86\u66f4\u597d\u7684\u9001\u8fbe\uff0c\u5df2\u5e2e\u4f60\u8fc7\u6ee4\u4e0d\u80fd\u8bc6\u522b\u7684\u5b57\u7b26")
                }
            } else {
                if (l.length) {
                    l.removeClass("filter report-errors icon-error label-error")
                } else {
                    $(n).next().removeClass("report-errors icon-error  filter")
                }
            }
        }
        if ($(n).attr("name") == "customerName" || $(n).attr("name") == "customerNameNoEncrypt") {
            var q = /[^a-zA-Z\u4E00-\u9FA5\uFF21-\uFF3A\uFF41-\uFF5A]/g;
            var l = $("#" + $(n).attr("name") + "-msg");
            if (q.test($(n).val())) {
                $(n).val(function () {
                    return $(n).val().replace(q, "")
                });
                if ($(n).val() != "") {
                    $(n).nextAll("span").remove();
                    $(n).parent().append("<span class='vam icon-warn'>\u4e3a\u4e86\u66f4\u597d\u7684\u9001\u8fbe,\u5df2\u5e2e\u4f60\u8fc7\u6ee4\u4e0d\u80fd\u8bc6\u522b\u7684\u5b57\u7b26</span>")
                } else {
                    $(n).nextAll("span").remove()
                }
            } else {
                $(n).nextAll("span").remove()
            }
        }
        if ($(n).attr("name") == "address" || $(n).attr("id") == "vatInvoice-address" || $(n).attr("id") == "contactAddress") {
            var l = $("#" + $(n).attr("name") + "-msg");
            addressFrontRegex = addressFrontRegex.replaceAll("&amp;", "&");
            addressFrontRegex = addressFrontRegex.replaceAll("&#034;", '"');
            addressFrontRegex = addressFrontRegex.replaceAll("&lt;", "<");
            addressFrontRegex = addressFrontRegex.replaceAll("&gt;", ">");
            addressFrontRegex = addressFrontRegex.replaceAll("&#039;", "'");
            var o = new RegExp(addressFrontRegex);
            var m = false;
            $.each($(n).val().split(""), function (t, r) {
                if (!o.test(r)) {
                    m = true
                }
            });
            var p = $(n).val().split("").filter(function (r) {
                return o.test(r)
            }).join("");
            if (m) {
                $(n).val(p);
                if ($(n).val() != "") {
                    if (l.length) {
                        l.addClass("report-errors filter label-error").text("\u4e3a\u4e86\u66f4\u597d\u7684\u9001\u8fbe\uff0c\u5df2\u5e2e\u4f60\u8fc7\u6ee4\u4e0d\u80fd\u8bc6\u522b\u7684\u5b57\u7b26")
                    } else {
                        $(n).next().addClass("report-errors  filter").text("\u4e3a\u4e86\u66f4\u597d\u7684\u9001\u8fbe\uff0c\u5df2\u5e2e\u4f60\u8fc7\u6ee4\u4e0d\u80fd\u8bc6\u522b\u7684\u5b57\u7b26")
                    }
                } else {
                    l.removeClass("filter")
                }
            } else {
                if (l.length) {
                    l.removeClass("filter report-errors icon-error label-error").text("")
                } else {
                    $(n).next().removeClass("report-errors icon-error  filter")
                }
            }
        }
    };
    ol.form.getStrLeng = function (o) {
        var p = 0;
        var l = o.length;
        var m = -1;
        for (var n = 0; n < l; n++) {
            m = o.charCodeAt(n);
            if (m >= 0 && m <= 128) {
                p += 1
            } else {
                p += 2
            }
        }
        return p
    };
    ol.form.validator.defaults = j;
    var h = ol.form.validator, y = function (m, l) {
        return !m
    };
    h.register("regex", function (m, l) {
        if (l.allowEmpty && y(m)) {
            return true
        }
        if (!l.regex) {
            a("regex", "need parameter of 'regex'!");
            return false
        }
        return l.regex.test(m)
    });
    h.register("require", function (m, l) {
        l.allowEmpty = false;
        return !y(m)
    });
    h.register("email", function (m, l) {
        if (l.allowEmpty && y(m)) {
            return true
        }
        var n = null;
        if (l.separater) {
            n = l.separater
        }
        return ol.util.isEmail(m, n)
    });
    h.register("eq", function (o, l) {
        if (!l.compareTo) {
            a("eq", "need parameter of 'compareTo'!");
            return false
        }
        var m = jQuery(l.compareTo).val();
        if (!l.format) {
            return o == m
        }
        var n = h.get("date");
        if (!(n(o, l) && n(m, l))) {
            return false
        }
        return o.parseDate(l.format).getTime() == m.parseDate(l.format).getTime()
    });
    h.register("lt", function (p, m) {
        if (m.allowEmpty && y(p)) {
            return true
        }
        if (!m.compareTo) {
            a("lt", "need parameter of 'compareTo'!");
            return false
        }
        var n = jQuery(m.compareTo).val();
        if (!m.format) {
            m.negative = true;
            var l = h.get("float");
            if (!l(p, m)) {
                return false
            }
            if (!l(n, m)) {
                return false
            }
            p = parseFloat(p);
            n = parseFloat(n);
            return p < n
        }
        var o = h.get("date");
        if (!(o(p, m) && o(n, m))) {
            return false
        }
        return p.parseDate(m.format) < n.parseDate(m.format)
    });
    h.register("le", function (o, n) {
        var m = h.get("eq");
        var l = h.get("lt");
        return m(o, n) || l(o, n)
    });
    h.register("gt", function (p, m) {
        if (m.allowEmpty && y(p)) {
            return true
        }
        if (!m.compareTo) {
            a("gt", "need parameter of 'compareTo'!");
            return false
        }
        var n = jQuery(m.compareTo).val();
        if (!m.format) {
            m.negative = true;
            var l = h.get("float");
            if (!l(p, m)) {
                return false
            }
            if (!l(n, m)) {
                return false
            }
            p = parseFloat(p);
            n = parseFloat(n);
            return p > n
        }
        var o = h.get("date");
        if (!(o(p, m) && o(n, m))) {
            return false
        }
        return p.parseDate(m.format) > n.parseDate(m.format)
    });
    h.register("ge", function (o, n) {
        var l = h.get("eq");
        var m = h.get("gt");
        return l(o, n) || m(o, n)
    });
    h.register("length", function (n, m) {
        if (m.allowEmpty && y(n)) {
            return true
        }
        if (!(m.min || m.max)) {
            a("length", "need parameter of 'min' or 'max'!");
            return false
        }
        var l = ol.form.getStrLeng(n);
        if (m.min && l < m.min) {
            return false
        }
        if (m.max && l > m.max) {
            return false
        }
        return true
    });
    h.register("range", function (o, n) {
        if (n.allowEmpty && y(o)) {
            return true
        }
        if (!(n.min || n.max)) {
            a("range", "need parameter of 'min' or 'max'!");
            return false
        }
        n.negative = true;
        var m = h.get("float");
        if (!m(o, n)) {
            return false
        }
        var l = parseFloat(o);
        if (n.min && l < n.min) {
            return false
        }
        if (n.max && l > n.max) {
            return false
        }
        return true
    });
    h.register("chinese", function (m, l) {
        if (l.allowEmpty && y(m)) {
            return true
        }
        l.regex = /^[\u4E00-\u9FA5]$/;
        return h.get("regex")(m, l)
    });
    h.register("int", function (m, l) {
        if (l.allowEmpty && y(m)) {
            return true
        }
        if (l.negative) {
            l.regex = /^[-]?\d+$/
        } else {
            l.regex = /^\d+$/
        }
        return h.get("regex")(m, l)
    });
    h.register("float", function (m, l) {
        if (l.allowEmpty && y(m)) {
            return true
        }
        if (l.negative) {
            l.regex = /^[-]?\d+(\.\d+)?$/
        } else {
            l.regex = /^\d+(\.\d+)?$/
        }
        return h.get("regex")(m, l)
    });
    h.register("date", function (p, n) {
        if (n.allowEmpty && y(p)) {
            return true
        }
        if (!n.format) {
            g("date", "need parameter of 'format'!");
            return false
        }
        var o = {
            "\\.": "\\.",
            "M+": "(0[1-9]|[1-9]|1[0-2])",
            "d+": "(0[1-9]|[1-9]|[12][0-9]|3[01])",
            "y+": "(\\d{4})",
            "H+": "([0-9]|[01][0-9]|2[0-3])",
            "m+": "([0-9]|[0-5][0-9])",
            "s+": "([0-9]|[0-5][0-9])",
            S: "(\\d+)"
        };
        var l = n.format;
        for (var m in o) {
            if (new RegExp("(" + m + ")").test(n.format)) {
                l = l.replace(RegExp.$1, o[m])
            }
        }
        n.regex = new RegExp("^" + l + "$");
        if (!h.get("regex")(p, n)) {
            return false
        }
        return p == p.parseDate(n.format).format(n.format)
    });
    h.register("url", function (m, l) {
        if (l.allowEmpty && y(m)) {
            return true
        }
        if (m.startWith("http://")) {
            m = m.substring(7)
        } else {
            if (m.startWith("https://")) {
                m = m.substring(8)
            } else {
                if (l.requireProtocol) {
                    return false
                }
            }
        }
        if (!m) {
            return false
        }
        l.regex = /^[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/;
        return h.get("regex")(m, l)
    })
})();
(function () {
    var r = ol.template = function (j) {
        this.init = function () {
            j = d(j);
            var l;
            for (var k = 0; k < j.length; k++) {
                l = f(j[k]);
                h[l[0]] = b(l)
            }
        };
        this.parse = function (k, l) {
            if (!k || !(k = h[k])) {
                return ""
            }
            return g(k, l)
        };
        this.init()
    };
    r.parse = function (j, k) {
        var l = g(b(f(j)), k);
        return l
    };
    r.startDelimiter = "<!--";
    r.endDelimiter = "-->";
    var h = {},
        a = new RegExp(r.startDelimiter + "#macro \\S+\\s*\\w*" + r.endDelimiter + "[\\s\\S]*?" + r.startDelimiter + "/#macro" + r.endDelimiter, "g"),
        d = function (j) {
            return j.match(a)
        },
        c = new RegExp("(" + r.startDelimiter + "(/?)#([\\s\\S]*?)" + r.endDelimiter + ")|(')|([\r\n\t])|({#([^}]*?)})", "g"),
        f = function (l) {
            var q = l.replace(c, function (x, I, t, H, J, K, w, y) {
                if (I) {
                    return "\n" + (t ? "-" : "+") + H.replace(/[\r\n\t]/g, "") + "\n"
                }
                if (J) {
                    return "\\'"
                }
                if (K) {
                    return ""
                }
                if (w) {
                    var C = y.indexOf("?");
                    if (C != 0) {
                        switch (y.substring(C + 1)) {
                            case"html":
                                y = "ol.util.escapeHtml(" + y.substring(0, C) + ")";
                                break;
                            case"js_string":
                                y = y.replace(/\"/g, '\\"').replace(/\r\n/g, "\\r\\n").replace(/\n/g, "\\n");
                                break
                        }
                    }
                    y = y.replace(/\'/g, "\\'");
                    return "'+(" + y + ")+'"
                }
            });
            q = q.split(/\n/);
            var u, m, o, v, k, n = ["var f=[];"];
            for (var z = 0; z < q.length; z++) {
                u = q[z];
                if (!u) {
                    continue
                }
                m = u.charAt(0);
                if (m !== "+" && m !== "-") {
                    n.push("f.push('" + u + "');");
                    continue
                }
                o = u.split(/\s/);
                switch (o[0]) {
                    case"+macro":
                        v = o[1];
                        k = o[2];
                        n.push('f.push("<!--' + v + ' start-->");');
                        break;
                    case"-macro":
                        n.push('f.push("<!--' + v + ' end-->");');
                        break;
                    case"+elseif":
                        o.splice(0, 1);
                        n.push("}else if" + o.join(" ") + "{");
                        break;
                    case"+else":
                        n.push("}else{");
                        break;
                    case"+if":
                    case"+for":
                    case"+switch":
                        o[0] = o[0].substr(1);
                        n.push(o.join(" ") + "{");
                        break;
                    case"+case":
                    case"+default":
                        o[0] = o[0].substr(1);
                        n.push(o.join(" ") + ":");
                        break;
                    case"-switch":
                    case"-for":
                    case"-if":
                        n.push("}");
                        break;
                    case"+list":
                        if (o.length != 4) {
                            throw v + ": list command error!"
                        }
                        var p = o[3] + "_index", A = o[3] + "_length", j = o[3] + "_num";
                        n.push("if(" + o[1] + ".constructor === Array){");
                        n.push("var " + o[3] + ";");
                        n.push("var " + A + "=" + o[1] + ".length;");
                        n.push("var " + p + ";");
                        n.push("for(var " + j + "=" + A + ";" + j + "--;){");
                        n.push(p + "=" + A + "-" + j + "-1;");
                        n.push(o[3] + "=" + o[1] + "[" + p + "];");
                        break;
                    case"-list":
                        n.push("}}");
                        break;
                    case"+break":
                        n.push("break;");
                        break;
                    case"-list":
                        n.push("}}}");
                        break;
                    case"+eval":
                        o.splice(0, 1);
                        n.push(o.join(" "));
                        break;
                    case"+var":
                        o[0] = o[0].substr(1);
                        n.push(o.join(" ") + ";");
                        break;
                    default:
                        break
                }
            }
            n.push("return f.join('');");
            return [v, k || "data", n.join("")]
        }, b = function (j) {
            try {
                return new Function(j[1], j[2])
            } catch (k) {
                logger.error("template:" + j[0], k)
            }
        }, g = function (j, k) {
            return j(k)
        }
})();
window.ol || (window.ol = {});
(function () {
    var $, $win, $doc, isIE6 = true, _defaults = {
        boxid: "ol_box",
        boxclass: "ol_box",
        type: "dialog",
        title: "",
        width: 0,
        height: 0,
        showTitle: true,
        showButton: true,
        showCancel: true,
        showOk: true,
        okBtnName: "",
        cancelBtnName: "",
        timeout: 0,
        draggable: true,
        modal: true,
        zIndex: 5e3,
        remember: false,
        position: "center",
        clickOut: null,
        onclose: null,
        onopen: null,
        oncancel: null,
        onok: null,
        blur: null,
        focus: null,
        autoHeight: true,
        autoPosition: true,
        cache: false
    };
    var _getDoc = function () {
        return document.compatMode == "CSS1Compat" ? document.documentElement : document.body
    };
    var _getWinSize = function () {
        var doc = _getDoc();
        return {
            width: Math.max(doc.scrollWidth, doc.clientWidth || 0) - 1,
            height: Math.max(doc.scrollHeight, doc.clientHeight || 0) - 1
        }
    };
    var type = {};
    type.dialog = {
        html: "<div>" + '<div class="box-ct">' + '\t<div class="box-header">' + '\t\t<div class="box-tl"></div>' + '\t\t<div class="box-tc">' + '\t\t\t<div class="box-tc1"></div>' + '\t\t\t<div class="box-tc2"><a href="javascript:;" onclick="return false;" title="" class="box-close"></a><span class="box-title"></span></div>' + "\t\t</div>" + '\t\t<div class="box-tr"></div>' + "\t</div>" + '\t<table width="100%" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed;background:#fff;">' + "\t\t<tr>" + '\t\t\t<td class="box-cl"></td>' + '\t\t\t<td class="box-cc">' + '\t\t\t\t<div class="box-content"></div>' + '\t\t\t\t<div class="box-button">' + '\t\t\t\t\t<a class="box-cancel" href="javascript:;"><span></span></a>' + '\t\t\t\t\t<a class="box-ok" href="javascript:;"><span></span></a>' + "\t\t\t\t</div>" + "\t\t\t</td>" + '\t\t\t<td class="box-cr"></td>' + "\t\t</tr>" + "\t</table>" + '\t<div class="box-bottom">' + '\t\t<div class="box-bl"></div>' + '\t\t<div class="box-bc"></div>' + '\t\t<div class="box-br"></div>' + "\t</div>" + "</div>" + "</div>",
        initContent: function (self) {
            self.setContent(self.content)
        },
        setContent: function (self, content, callback) {
            self.content = content || self.content;
            self.setContent(self.content);
            if (typeof callback == "function") callback()
        }
    };
    type.ajax = {
        initContent: function (self) {
        }, setContent: function (self, content, callback) {
            self._b_button.hide();
            self.setContent('<div class="box-loading"></div>');
            if (self._b_content.height() < 90) self._b_content.height(Math.max(90, self.options.height));
            if (self._box.width() < 200) self._box.width(Math.max(200, self.options.width));
            var ajaxurl = content || self.content;
            if (typeof ajaxurl != "string") {
                alert("please set ajax url.");
                return
            }
            self.content = ajaxurl;
            if (self.options.cache == false) {
                if (ajaxurl.indexOf("?") == -1) {
                    ajaxurl += "?_t=" + Math.random()
                } else {
                    ajaxurl += "&_t=" + Math.random()
                }
            }
            $.get(ajaxurl, function (data) {
                if (self.options.showButton) self._b_button.show();
                self.setContent(data);
                if (typeof callback == "function") callback()
            })
        }
    };
    type.iframe = {
        initContent: function (self) {
        }, setContent: function (self, content, callback) {
            var url = content || self.content;
            if (typeof url != "string") {
                alert("please set iframe url.");
                return
            }
            self.content = url;
            var name = "box-iframe-" + (new Date).getTime();
            self.setContent('<iframe class="boxIframe" width="100%" height="100%" frameborder="0" name="' + name + '"></iframe><script>window["' + name + '"].location.href="' + url + '";<\/script>');
            if (typeof callback == "function") callback()
        }, closeEvent: function (self) {
            if (!self.options.remember) {
                self.find("iframe").each(function () {
                    this.contentWindow.close();
                    jQuery(this).remove()
                })
            }
        }
    };
    ol.box = function (content, options) {
        this.options = null;
        this._type = null;
        this._mask = null;
        this._events = {};
        this._box = null;
        this._b_content = null;
        this._b_button = null;
        this.content = content;
        this._initedContent = false;
        this._onbox = false;
        this._isOpen = false;
        $ = jQuery;
        $win = $(window);
        $doc = $(document);
        isIE6 = $.browser.msie && $.browser.version == "6.0", this.options = $.extend({}, _defaults, options);
        this.init()
    };
    ol.box.prototype = {
        init: function () {
            this.initConfig();
            if (this.options.modal) this.initMask();
            this.initBox();
            this.initEvent()
        }, initBox: function () {
            $("#" + this.options.boxid).remove();
            this._box = $(this._type.html).css({
                visibility: "hidden",
                position: "absolute",
                top: 0,
                left: 0,
                zIndex: this.options.zIndex
            }).bgiframe();
            this._b_button = this._box.find(".box-button");
            this._b_content = this._box.find(".box-content");
            this.renderBox(this.options);
            this._box.appendTo("body");
            this._type.initContent(this)
        }, initConfig: function () {
            switch (this.options.type) {
                case"ajax":
                    this._type = type.ajax;
                    break;
                case"iframe":
                    this._type = type.iframe;
                    break;
                default:
                    this._type = type.dialog;
                    break
            }
            this._type = $.extend({}, type.dialog, this._type)
        }, initEvent: function () {
            var thix = this;
            if (this.options.draggable && this.options.showTitle) {
                this._box.find(".box-header").mousedown(function (event) {
                    var h = this;
                    o = document, ox = parseInt(thix._box.css("left"), 10), oy = parseInt(thix._box.css("top"), 10), mx = event.clientX, my = event.clientY, size = _getWinSize(), box_w = thix._box.outerWidth(true), box_h = thix._box.outerHeight(true);
                    if (h.setCapture) h.setCapture();
                    var mousemove = function (event) {
                        if (window.getSelection) {
                            window.getSelection().removeAllRanges()
                        } else {
                            document.selection.empty()
                        }
                        var left = Math.max(ox + event.clientX - mx, 0), top = Math.max(oy + event.clientY - my, 0);
                        left = Math.min(left, size.width - box_w);
                        top = Math.min(top, size.height - box_h);
                        thix._box.css({left: left, top: top})
                    };
                    var mouseup = function () {
                        if (h.releaseCapture) h.releaseCapture();
                        $doc.unbind("mousemove", mousemove);
                        $doc.unbind("mouseup", mouseup)
                    };
                    $doc.mousemove(mousemove).mouseup(mouseup)
                })
            } else {
                this._box.find(".box-header").css("cursor", "default")
            }
        }, renderBox: function (options) {
            var css = {zIndex: options.zIndex, position: "absolute"};
            if (options.boxid) this._box.attr("id", options.boxid);
            if (options.boxclass) this._box.attr("class", options.boxclass);
            if (!options.showTitle) {
                this._box.find(".box-header").hide()
            } else {
                this.setTitle(options.title)
            }
            if (!options.showButton) {
                this._b_button.hide()
            } else {
                if (!options.showCancel) {
                    this._b_button.find(".box-cancel").hide()
                }
                if (!options.showOk) {
                    this._b_button.find(".box-ok").hide()
                }
            }
            this._b_button.find(".box-ok span").html(options.okBtnName);
            this._b_button.find(".box-cancel span").html(options.cancelBtnName);
            this._box.css(css)
        }, setTitle: function (title) {
            if (title.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g, "") == "") {
                this._box.find(".box-title").remove();
                return this
            }
            this._box.find(".box-title").html(title);
            return this
        }, setContent: function (content) {
            if (typeof content == "undefined" || content == null) return;
            this._initedContent = true;
            this._b_content.empty().html(content);
            var thix = this;
            if (this.options.width > 0) {
                this._box.css("width", this.options.width)
            } else {
                this._box.css("width", null)
            }
            if (this.options.height > 0) {
                var css = {height: this.options.height};
                this.options.autoHeight || (css["overflow-y"] = "auto");
                this._b_content.css(css)
            } else {
                this._b_content.css("height", "auto")
            }
            this.setPosition();
            this._box.find(".box-close, .box-cancel, .box-ok").unbind("click").click(function () {
                thix.close()
            });
            if (typeof this.options.onok == "function") {
                this._box.find(".box-ok").unbind("click").click(function () {
                    thix.options.onok.call(this, thix)
                })
            }
            if (typeof this.options.oncancel == "function") {
                this._box.find(".box-cancel").unbind("click").click(function () {
                    thix.options.oncancel.call(this, thix)
                })
            }
            this._box.find(".box-close, .box-cancel, .box-ok").unbind("keypress").bind("keypress", function (e) {
                e = e || window.event;
                var key = e.which || e.charCode || e.keyCode;
                switch (key) {
                    case 27:
                        thix.close();
                        return false;
                    case 32:
                    case 13:
                        $(document.activeElement).trigger("click");
                        return false
                }
            })
        }, openEvent: function () {
            if (this._isOpen) return;
            var thix = this;
            if (this.options.autoPosition) {
                if (this.options.position != "center") {
                    var timer;
                    this._events["scroll"] = function () {
                        clearTimeout(timer);
                        timer = setTimeout(function () {
                            thix.setPosition()
                        }, 300)
                    };
                    $win.scroll(this._events["scroll"])
                }
                this._events["resize"] = function () {
                    thix.setPosition()
                };
                $win.resize(this._events["resize"])
            }
            if (this.options.timeout > 0) {
                this._events["timeout"] = setTimeout(function () {
                    thix.close()
                }, this.options.timeout)
            }
            this._onbox = true;
            if (this.options.clickOut) {
                this._events["box_click"] = function (event) {
                    thix._onbox = true
                };
                this._events["document_click"] = function (event) {
                    if (event.button != 0) return true;
                    if (thix._onbox === false) {
                        thix.options.clickOut(thix)
                    }
                    thix._onbox = false
                };
                this._box.bind("click", this._events["box_click"]);
                $doc.bind("click", this._events["document_click"])
            }
            if (this.options.modal) {
                this.showMask()
            }
            if (this.options.onopen) this.options.onopen(this);
            if (this.options.focus) {
                $(this.options.focus).focus()
            }
            this._isOpen = true
        }, closeEvent: function () {
            clearTimeout(this._events["timeout"]);
            if (this._events["scroll"]) $win.unbind("scroll", this._events["scroll"]);
            if (this._events["resize"]) $win.unbind("resize", this._events["resize"]);
            if (this._events["box_click"]) this._box.unbind("click", this._events["box_click"]);
            if (this._events["document_click"]) $doc.unbind("click", this._events["document_click"]);
            if (this.options.modal) {
                this.hideMask()
            }
            if (this.options.onclose) this.options.onclose(this);
            if (this.options.blur) {
                $(this.options.blur).focus()
            }
            this._isOpen = false;
            if (this._type.closeEvent) this._type.closeEvent(this)
        }, setPosition: function () {
            if (this.options.position == "center") {
                var w_h = $win.height();
                var w_w = $win.width();
                var box_w = this._box.outerWidth(true);
                var box_c_h = this._b_content.outerHeight(true);
                var box_h_h = this._box.find(".box-header:first").outerHeight(true);
                var box_h_b = this._box.find(".box-bottom:first").outerHeight(true);
                var box_h = box_c_h + box_h_h + box_h_b;
                var offset = {x: (w_w - box_w) / 2, y: (w_h - box_h) / 2};
                var css = {position: "fixed"};
                if (offset.x < 0) {
                    css.width = w_w;
                    offset.x = 0
                }
                if (offset.y < 0) {
                    css.height = w_h;
                    offset.y = 0
                }
                css.top = offset.y;
                css.left = offset.x;
                if (isIE6) {
                    css.position = "absolute";
                    var h = $("html");
                    if (!h.css("background-image") || h.css("background-image") == "none") h.css("background-image", "url(about:blank)");
                    this._box[0].style.setExpression("left", "(document.documentElement || document.body).scrollLeft+" + css.left + '+"px"');
                    this._box[0].style.setExpression("top", "(document.documentElement || document.body).scrollTop+" + css.top + '+"px"');
                    delete css["top"];
                    delete css["left"]
                }
                this._box.css(css);
                return
            } else if (Object.prototype.toString.call(this.options.position) === "[object Object]") {
                var top = this.options.position.top || 0;
                var left = this.options.position.left || 0;
                if (this.options.position.ref) {
                    var ref = $(this.options.position.ref);
                    var offset = ref.offset();
                    top += offset.top;
                    top += ref.outerHeight(true);
                    left += offset.left
                }
                this._box.css({top: top, left: left})
            }
        }, renderContent: function (content, callback) {
            if (typeof content != "undefined" && content != null) this._initedContent = false;
            if (!this._initedContent || !this.options.remember) {
                this._type.setContent(this, content, callback)
            } else {
                this.setPosition();
                this.openEvent()
            }
        }, open: function (content, options) {
            if (this._isOpen) {
                this.closeEvent()
            }
            this.options = $.extend({}, this.options, options);
            var thix = this;
            this.renderContent(content, function () {
                thix.openEvent()
            });
            this._box.stop().css({visibility: "visible", opacity: null});
            return this
        }, close: function () {
            this.closeEvent();
            this._box.css("visibility", "hidden")
        }, isOpen: function () {
            return this._isOpen
        }, fadeIn: function (content, options, ms) {
            this.options = $.extend({}, this.options, options);
            this.renderContent(content);
            var opacity = this._box.css("opacity") || 1;
            this._box.css({opacity: 0, visibility: "visible"}).stop().animate({opacity: opacity}, ms);
            this.openEvent()
        }, fadeOut: function (ms) {
            var thix = this;
            this.closeEvent();
            this._box.stop().animate({opacity: 0}, ms, function () {
                thix._box.css({visibility: "hidden", opacity: null})
            })
        }, find: function (selector) {
            return this._b_content.find(selector)
        }, getBox: function () {
            return this._box
        }, initMask: function () {
            if ($(".ol_box_mask")) {
                $(".ol_box_mask").remove()
            }
            this._mask = $("<div class='ol_box_mask'></div>").css({
                visibility: "hidden",
                width: 0,
                height: 0,
                zIndex: this.options.zIndex
            }).appendTo("body").bgiframe();
            var thix = this;
            this._events["masker_resize"] = function () {
                thix._mask.css(_getWinSize())
            }
        }, showMask: function () {
            var css = _getWinSize();
            css.visibility = "visible";
            this._mask.css(css);
            $win.bind("resize", this._events["masker_resize"])
        }, hideMask: function () {
            this._mask.css({visibility: "hidden", width: 0, height: 0});
            $win.unbind("resize", this._events["masker_resize"])
        }
    }
})();
(function () {
    ec.encodeInit = function (a) {
        org.owasp.esapi.ESAPI.initialize()
    };
    ec.encodeForJS = function (a) {
        if ($ESAPI == null) {
            org.owasp.esapi.ESAPI.initialize()
        }
        return $ESAPI.encoder().encodeForJavaScript(a)
    };
    ec.encodeForHTML = function (a) {
        if ($ESAPI == null) {
            org.owasp.esapi.ESAPI.initialize()
        }
        return $ESAPI.encoder().encodeForHTML(a)
    }
})();
var $namespace = function (d, g, b) {
    var f = d.split(g || "."), h = b || window, e, a;
    for (e = 0, a = f.length; e < a; e++) {
        h = h[f[e]] = h[f[e]] || {}
    }
    return h
};
var $type = function (a, b) {
    if (!a instanceof b) {
        throw new SyntaxError()
    }
};
if (!$) {
    var $ = function (a) {
        return document.getElementById(a)
    }
}
if (!Array.prototype.each) {
    Array.prototype.each = function (a) {
        if (typeof a != "function") {
            throw"Illegal Argument for Array.each"
        }
        for (var b = 0; b < this.length; b++) {
            a(this[b])
        }
    }
}
if (!Array.prototype.contains) {
    Array.prototype.contains = function (b) {
        var a = false;
        this.each(function (d) {
            if ((b.equals && b.equals(d)) || d == b) {
                a = true;
                return
            }
        });
        return a
    }
}
if (!Array.prototype.containsKey) {
    Array.prototype.containsKey = function (b) {
        for (var a in this) {
            if (a.toLowerCase() == b.toLowerCase()) {
                return true
            }
        }
        return false
    }
}
if (!Array.prototype.getCaseInsensitive) {
    Array.prototype.getCaseInsensitive = function (b) {
        for (var a in this) {
            if (a.toLowerCase() == b.toLowerCase()) {
                return this[a]
            }
        }
        return null
    }
}
if (!String.prototype.charCodeAt) {
    String.prototype.charCodeAt = function (a) {
        var e = this.charAt(a);
        for (var b = 0; b < 65536; b++) {
            var d = String.fromCharCode(b);
            if (d == e) {
                return b
            }
        }
        return 0
    }
}
if (!String.prototype.endsWith) {
    String.prototype.endsWith = function (a) {
        return this.substr((this.length - a.length), a.length) == a
    }
}
if (!Exception) {
    var Exception = function (a, b) {
        this.cause = b;
        this.errorMessage = a
    };
    Exception.prototype = Error.prototype;
    Exception.prototype.getCause = function () {
        return this.cause
    };
    Exception.prototype.getMessage = function () {
        return this.message
    };
    Exception.prototype.getStackTrace = function () {
        if (this.callstack) {
            return this.callstack
        }
        if (this.stack) {
            var b = stack.split("\n");
            for (var d = 0, a = b.length; d < a; d++) {
                if (b[d].match(/^\s*[A-Za-z0-9\=+\$]+\(/)) {
                    this.callstack.push(b[d])
                }
            }
            this.callstack.shift();
            return this.callstack
        } else {
            if (window.opera && this.message) {
                var b = this.message.split("\n");
                for (var d = 0, a = b.length; d < a; d++) {
                    if (b[d].match(/^\s*[A-Za-z0-9\=+\$]+\(/)) {
                        var f = b[d];
                        if (b[d + 1]) {
                            f += " at " + b[d + 1];
                            d++
                        }
                        this.callstack.push(f)
                    }
                }
                this.callstack.shift();
                return this.callstack
            } else {
                var g = arguments.callee.caller;
                while (g) {
                    var e = g.toString();
                    var h = e.substring(e.indexOf("function") + 8, e.indexOf("(")) || "anonymous";
                    this.callstack.push(h);
                    g = g.caller
                }
                return this.callstack
            }
        }
    };
    Exception.prototype.printStackTrace = function (b) {
        var a = this.getMessage() + "|||" + this.getStackTrace().join("|||");
        if (this.cause) {
            if (this.cause.printStackTrace) {
                a += "||||||Caused by " + this.cause.printStackTrace().replace("\n", "|||")
            }
        }
        if (!b) {
            return b.replace("|||", "\n")
        } else {
            if (b.value) {
                b.value = a.replace("|||", "\n")
            } else {
                if (b.writeln) {
                    b.writeln(a.replace("|||", "\n"))
                } else {
                    if (b.innerHTML) {
                        b.innerHTML = a.replace("|||", "<br/>")
                    } else {
                        if (b.innerText) {
                            b.innerText = a.replace("|||", "<br/>")
                        } else {
                            if (b.append) {
                                b.append(a.replace("|||", "\n"))
                            } else {
                                if (b instanceof Function) {
                                    b(a.replace("|||", "\n"))
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
if (!RuntimeException) {
    var RuntimeException = Exception
}
if (!IllegalArgumentException) {
    var IllegalArgumentException = Exception
}
if (!DateFormat) {
    var DateFormat = function (d) {
        var b = d;
        var a = {
            longMonths: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            longDays: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            d: function (e) {
                return (e.getDate() < 10 ? "0" : "") + e.getDate()
            },
            D: function (e) {
                return a.shortDays[e.getDay()]
            },
            j: function (e) {
                return e.getDate()
            },
            l: function (e) {
                return a.longDays[e.getDay()]
            },
            N: function (e) {
                return e.getDay() + 1
            },
            S: function (e) {
                return (e.getDate() % 10 == 1 && e.getDate() != 11 ? "st" : (e.getDate() % 10 == 2 && e.getDate() != 12 ? "nd" : (e.getDate() % 10 == 3 && e.getDate() != 13 ? "rd" : "th")))
            },
            w: function (e) {
                return e.getDay()
            },
            z: function (e) {
                return "Not Yet Supported"
            },
            W: function (e) {
                return "Not Yet Supported"
            },
            F: function (e) {
                return a.longMonths[e.getMonth()]
            },
            m: function (e) {
                return (e.getMonth() < 9 ? "0" : "") + (e.getMonth() + 1)
            },
            M: function (e) {
                return a.shortMonths[e.getMonth()]
            },
            n: function (e) {
                return e.getMonth() + 1
            },
            t: function (e) {
                return "Not Yet Supported"
            },
            L: function (e) {
                return (((e.getFullYear() % 4 == 0) && (e.getFullYear() % 100 != 0)) || (e.getFullYear() % 400 == 0)) ? "1" : "0"
            },
            o: function (e) {
                return "Not Supported"
            },
            Y: function (e) {
                return e.getFullYear()
            },
            y: function (e) {
                return ("" + e.getFullYear()).substr(2)
            },
            a: function (e) {
                return e.getHours() < 12 ? "am" : "pm"
            },
            A: function (e) {
                return e.getHours() < 12 ? "AM" : "PM"
            },
            B: function (e) {
                return "Not Yet Supported"
            },
            g: function (e) {
                return e.getHours() % 12 || 12
            },
            G: function (e) {
                return e.getHours()
            },
            h: function (e) {
                return ((e.getHours() % 12 || 12) < 10 ? "0" : "") + (e.getHours() % 12 || 12)
            },
            H: function (e) {
                return (e.getHours() < 10 ? "0" : "") + e.getHours()
            },
            i: function (e) {
                return (e.getMinutes() < 10 ? "0" : "") + e.getMinutes()
            },
            s: function (e) {
                return (e.getSeconds() < 10 ? "0" : "") + e.getSeconds()
            },
            e: function (e) {
                return "Not Yet Supported"
            },
            I: function (e) {
                return "Not Supported"
            },
            O: function (e) {
                return (-e.getTimezoneOffset() < 0 ? "-" : "+") + (Math.abs(e.getTimezoneOffset() / 60) < 10 ? "0" : "") + (Math.abs(e.getTimezoneOffset() / 60)) + "00"
            },
            P: function (e) {
                return (-e.getTimezoneOffset() < 0 ? "-" : "+") + (Math.abs(e.getTimezoneOffset() / 60) < 10 ? "0" : "") + (Math.abs(e.getTimezoneOffset() / 60)) + ":" + (Math.abs(e.getTimezoneOffset() % 60) < 10 ? "0" : "") + (Math.abs(e.getTimezoneOffset() % 60))
            },
            T: function (g) {
                var f = g.getMonth();
                g.setMonth(0);
                var e = g.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/, "$1");
                g.setMonth(f);
                return e
            },
            Z: function (e) {
                return -e.getTimezoneOffset() * 60
            },
            c: function (e) {
                return e.format("Y-m-d") + "T" + e.format("H:i:sP")
            },
            r: function (e) {
                return e.toString()
            },
            U: function (e) {
                return e.getTime() / 1000
            }
        };
        return {
            format: function (g) {
                var e = "";
                for (var f = 0; f < b.length; f++) {
                    var h = b.charAt(f);
                    if (a[h]) {
                        e += a[h].call(g)
                    } else {
                        e += h
                    }
                }
                return e
            }
        }
    };
    DateFormat.getDateInstance = function () {
        return new DateFormat("M/d/y h:i a")
    }
}
$namespace("org.owasp.esapi");
org.owasp.esapi.ESAPI = function (g) {
    var b = g;
    if (!b) {
        throw new RuntimeException("Configuration Error - Unable to load $ESAPI_Properties Object")
    }
    var a = null;
    var e = null;
    var d = null;
    var f = null;
    var h = null;
    return {
        properties: b, encoder: function () {
            if (!a) {
                if (!b.encoder.Implementation) {
                    throw new RuntimeException("Configuration Error - $ESAPI.properties.encoder.Implementation object not found.")
                }
                a = new b.encoder.Implementation()
            }
            return a
        }, logFactory: function () {
            if (!d) {
                if (!b.logging.Implementation) {
                    throw new RuntimeException("Configuration Error - $ESAPI.properties.logging.Implementation object not found.")
                }
                d = new b.logging.Implementation()
            }
            return d
        }, logger: function (i) {
            return this.logFactory().getLogger(i)
        }, locale: function () {
            return org.owasp.esapi.i18n.Locale.getLocale(b.localization.DefaultLocale)
        }, resourceBundle: function () {
            if (!f) {
                if (!b.localization.StandardResourceBundle) {
                    throw new RuntimeException("Configuration Error - $ESAPI.properties.localization.StandardResourceBundle not found.")
                }
                f = new org.owasp.esapi.i18n.ObjectResourceBundle(b.localization.StandardResourceBundle)
            }
            return f
        }, validator: function () {
            if (!e) {
                if (!b.validation.Implementation) {
                    throw new RuntimeException("Configuration Error - $ESAPI.properties.validation.Implementation object not found.")
                }
                e = new b.validation.Implementation()
            }
            return e
        }, httpUtilities: function () {
            if (!h) {
                h = new org.owasp.esapi.HTTPUtilities()
            }
            return h
        }
    }
};
var $ESAPI = null;
org.owasp.esapi.ESAPI.initialize = function () {
    $ESAPI = new org.owasp.esapi.ESAPI(Base.esapi.properties)
};
$namespace("org.owasp.esapi");
org.owasp.esapi.Encoder = function () {
};
$namespace("org.owasp.esapi");
org.owasp.esapi.EncoderConstants = {
    CHAR_LOWERS: ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"],
    CHAR_UPPERS: ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"],
    CHAR_DIGITS: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
    CHAR_SPECIALS: ["!", "$", "*", "+", "-", ".", "=", "?", "@", "^", "_", "|", "~"],
    CHAR_LETTERS: ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"],
    CHAR_ALNUM: ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"]
};
$namespace("org.owasp.esapi");
org.owasp.esapi.EnterpriseSecurityException = function (b, a, e) {
    var f = a;
    var d = new Exception(b, e);
    return {
        getMessage: d.getMessage, getUserMessage: d.getMessage, getLogMessage: function () {
            return f
        }, getStackTrace: d.getStackTrace, printStackTrace: d.printStackTrace
    }
};
$namespace("org.owasp.esapi");
org.owasp.esapi.HTTPUtilities = function () {
    var b = $ESAPI.logger("HTTPUtilities");
    var d = $ESAPI.resourceBundle();
    var a = org.owasp.esapi.Logger.EventType;
    return {
        addCookie: function (h) {
            $type(h, org.owasp.esapi.net.Cookie);
            if (window.top.location.protocol != "http:" || window.top.location.protocol != "https:") {
                throw new RuntimeException(d.getString("HTTPUtilities.Cookie.Protocol", {protocol: window.top.location.protocol}))
            }
            var f = h.getName(), m = h.getValue(), k = h.getMaxAge(), i = h.getDomain(), p = h.getPath(),
                e = h.getSecure();
            var n = new org.owasp.esapi.ValidationErrorList();
            var l = $ESAPI.validator().getValidInput("cookie name", f, "HttpCookieName", 50, false, n);
            var g = $ESAPI.validator().getValidInput("cookie value", m, "HttpCookieValue", 5000, false, n);
            if (n.size() == 0) {
                var j = f + "=" + escape(m);
                j += k ? ";expires=" + (new Date((new Date()).getTime() + (1000 * k)).toGMTString()) : "";
                j += p ? ";path=" + p : "";
                j += i ? ";domain=" + i : "";
                j += e || $ESAPI.properties.httputilities.cookies.ForceSecure ? ";secure" : "";
                document.cookie = j
            } else {
                b.warning(a.SECURITY_FAILURE, d.getString("HTTPUtilities.Cookie.UnsafeData", {name: f, value: m}))
            }
        }, getCookie: function (j) {
            var f = document.cookie.split("; ");
            for (var h = 0, e = f.length; h < e; h++) {
                var g = f[h].split("=");
                if (g[0] == escape(j)) {
                    return new org.owasp.esapi.net.Cookie(j, g[1] ? unescape(g[1]) : "")
                }
            }
            return null
        }, killAllCookies: function () {
            var f = document.cookie.split("; ");
            for (var j = 0, e = f.length; j < e; j++) {
                var h = f[j].split("=");
                var g = unescape(h[0]);
                if (!this.killCookie(g)) {
                    throw new RuntimeException(d.getString("HTTPUtilities.Cookie.CantKill", {name: g}))
                }
            }
        }, killCookie: function (e) {
            var f = this.getCookie(e);
            if (f) {
                f.setMaxAge(-10);
                this.addCookie(f);
                if (this.getCookie(e)) {
                    throw new RuntimeException(d.getString("HTTPUtilities.Cookie.CantKill", {name: e}))
                }
                return true
            }
            return false
        }, getRequestParameter: function (f) {
            var e = window.top.location.search.substring(1);
            var g = e.indexOf(f);
            if (g < 0) {
                return null
            }
            g = g + f.length;
            var h = e.indexOf("&", g);
            if (h < 0) {
                h = e.length
            }
            return unescape(e.substring(g, h))
        }
    }
};
$namespace("org.owasp.esapi");
org.owasp.esapi.IntrusionException = function (d, b, a) {
    var e = new org.owasp.esapi.EnterpriseSecurityException(d, b, a);
    return {
        getMessage: e.getMessage,
        getUserMessage: e.getMessage,
        getLogMessage: e.getLogMessage,
        getStackTrace: e.getStackTrace,
        printStackTrace: e.printStackTrace
    }
};
$namespace("org.owasp.esapi");
org.owasp.esapi.LogFactory = function () {
    return {getLogger: false}
};
$namespace("org.owasp.esapi");
org.owasp.esapi.Logger = function () {
    return {
        setLevel: false,
        fatal: false,
        error: false,
        isErrorEnabled: false,
        warning: false,
        isWarningEnabled: false,
        info: false,
        isInfoEnabled: false,
        debug: false,
        isDebugEnabled: false,
        trace: false,
        isTraceEnabled: false
    }
};
org.owasp.esapi.Logger.EventType = function (d, b) {
    var a = d;
    var e = b;
    return {
        isSuccess: function () {
            return e
        }, toString: function () {
            return a
        }
    }
};
with (org.owasp.esapi.Logger) {
    EventType.SECURITY_SUCCESS = new EventType("SECURITY SUCCESS", true);
    EventType.SECURITY_FAILURE = new EventType("SECURITY FAILURE", false);
    EventType.EVENT_SUCCESS = new EventType("EVENT SUCCESS", true);
    EventType.EVENT_FAILURE = new EventType("EVENT FAILURE", false);
    OFF = Number.MAX_VALUE;
    FATAL = 1000;
    ERROR = 800;
    WARNING = 600;
    INFO = 400;
    DEBUG = 200;
    TRACE = 100;
    ALL = Number.MIN_VALUE
}
$namespace("org.owasp.esapi");
org.owasp.esapi.PreparedString = function (d, a, g) {
    var f = [];
    var e = [];

    function b(k) {
        var h = 0, l = 0;
        for (var j = 0; j < k.length; j++) {
            if (k.charAt(j) == g) {
                l++;
                f.push(k.substr(h, j));
                h = j + 1
            }
        }
        f.push(k.substr(h));
        e = new Array(l)
    }

    if (!g) {
        g = "?"
    }
    b(d);
    return {
        set: function (h, j, i) {
            if (h < 1 || h > e.length) {
                throw new IllegalArgumentException("Attempt to set parameter: " + h + " on a PreparedString with only " + e.length + " placeholders")
            }
            if (!i) {
                i = a
            }
            e[h - 1] = i.encode([], j)
        }, toString: function () {
            for (var h = 0; h < e.length; h++) {
                if (e[h] == null) {
                    throw new RuntimeException("Attempt to render PreparedString without setting parameter " + (h + 1))
                }
            }
            var j = "", k = 0;
            for (var l = 0; l < f.length; l++) {
                j += f[l];
                if (k < e.length) {
                    j += e[k++]
                }
            }
            return j
        }
    }
};
$namespace("org.owasp.esapi");
org.owasp.esapi.ValidationErrorList = function () {
    var a = Array();
    return {
        addError: function (b, d) {
            if (b == null) {
                throw new RuntimeException("Context cannot be null: " + d.getLogMessage(), d)
            }
            if (d == null) {
                throw new RuntimeException("Context (" + b + ") - Error cannot be null")
            }
            if (a[b]) {
                throw new RuntimeException("Context (" + b + ") already exists. must be unique.")
            }
            a[b] = d
        }, errors: function () {
            return a
        }, isEmpty: function () {
            return a.length == 0
        }, size: function () {
            return a.length
        }
    }
};
$namespace("org.owasp.esapi");
org.owasp.esapi.ValidationRule = function () {
    return {
        getValid: false,
        setAllowNull: false,
        getTypeName: false,
        setTypeName: false,
        setEncoder: false,
        assertValid: false,
        getSafe: false,
        isValid: false,
        whitelist: false
    }
};
$namespace("org.owasp.esapi");
org.owasp.esapi.Validator = function () {
    return {
        addRule: false,
        getRule: false,
        getValidInput: false,
        isValidDate: false,
        getValidDate: false,
        isValidSafeHTML: false,
        getValidSafeHTML: false,
        isValidCreditCard: false,
        getValidCreditCard: false,
        isValidFilename: false,
        getValidFilename: false,
        isValidNumber: false,
        getValidNumber: false,
        isValidPrintable: false,
        getValidPrintable: false
    }
};
$namespace("org.owasp.esapi.codecs.Base64");
org.owasp.esapi.codecs.Base64 = {
    _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
    encode: function (h) {
        if (!h) {
            return null
        }
        var e = "";
        var d, b, a, m, l, k, j;
        var f = 0;
        var g = org.owasp.esapi.codecs.UTF8.encode(h);
        while (f < g.length) {
            d = g.charCodeAt(f++);
            b = g.charCodeAt(f++);
            a = g.charCodeAt(f++);
            m = d >> 2;
            l = ((d & 3) << 4) | (b >> 4);
            k = ((b & 15) << 2) | (a >> 6);
            j = a & 63;
            if (isNaN(b)) {
                k = j = 64
            } else {
                if (isNaN(a)) {
                    j = 64
                }
            }
            e += this._keyStr.charAt(m) + this._keyStr.charAt(l) + this._keyStr.charAt(k) + this._keyStr.charAt(j)
        }
        return e
    },
    decode: function (h) {
        if (!h) {
            return null
        }
        var e = "";
        var d, b, a, m, l, k, j;
        var f = 0;
        var g = h.replace(/[^A-Za-z0-9\+\/\=]/g, "");
        while (f < g.length) {
            m = this._keyStr.indexOf(g.charAt(f++));
            l = this._keyStr.indexOf(g.charAt(f++));
            k = this._keyStr.indexOf(g.charAt(f++));
            j = this._keyStr.indexOf(g.charAt(f++));
            d = (m << 2) | (l >> 4);
            b = ((l & 15) << 4) | (k >> 2);
            a = ((k & 3) << 6) | j;
            e += String.fromCharCode(d);
            if (k != 64) {
                e += String.fromCharCode(b)
            }
            if (j != 64) {
                e += String.fromCharCode(a)
            }
        }
        e = org.owasp.esapi.codecs.UTF8.decode(e);
        return e
    }
};
$namespace("org.owasp.esapi.codecs");
org.owasp.esapi.codecs.CSSCodec = function () {
    var a = new org.owasp.esapi.codecs.Codec();
    return {
        encode: a.encode, decode: a.decode, encodeCharacter: function (b, e) {
            if (b.contains(e)) {
                return e
            }
            var d = org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric(e);
            if (d == null) {
                return e
            }
            return "\\" + d + " "
        }, decodeCharacter: function (l) {
            l.mark();
            var h = l.next();
            if (h == null) {
                l.reset();
                return null
            }
            if (h != "\\") {
                l.reset();
                return null
            }
            var d = l.next();
            if (d == null) {
                l.reset();
                return null
            }
            if (l.isHexDigit(d)) {
                var b = d;
                for (var f = 0; f < 6; f++) {
                    var k = l.next();
                    if (k == null || k.charCodeAt(0) == 32) {
                        break
                    }
                    if (l.isHexDigit(k)) {
                        b += k
                    } else {
                        input.pushback(k);
                        break
                    }
                }
                try {
                    var j = parseInt(b, 16);
                    return String.fromCharCode(j)
                } catch (g) {
                    l.reset();
                    return null
                }
            }
            return d
        }
    }
};
$namespace("org.owasp.esapi.codecs");
org.owasp.esapi.codecs.Codec = function () {
    return {
        encode: function (d, e) {
            var a = "";
            for (var b = 0; b < e.length; b++) {
                var f = e.charAt(b);
                a += this.encodeCharacter(d, f)
            }
            return a
        }, encodeCharacter: function (a, b) {
            return b
        }, decode: function (b) {
            var a = "";
            var d = new org.owasp.esapi.codecs.PushbackString(b);
            while (d.hasNext()) {
                var e = this.decodeCharacter(d);
                if (e != null) {
                    a += e
                } else {
                    a += d.next()
                }
            }
            return a
        }, decodeCharacter: function (a) {
            return a.next()
        }
    }
};
org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric = function (a) {
    if (a.charCodeAt(0) < 256) {
        return org.owasp.esapi.codecs.Codec.hex[a.charCodeAt(0)]
    }
    return a.charCodeAt(0).toString(16)
};
org.owasp.esapi.codecs.Codec.hex = [];
for (var c = 0; c < 255; c++) {
    if (c >= 48 && c <= 57 || c >= 65 && c <= 90 || c >= 97 && c <= 122) {
        org.owasp.esapi.codecs.Codec.hex[c] = null
    } else {
        org.owasp.esapi.codecs.Codec.hex[c] = c.toString(16)
    }
}
var entityToCharacterMap = [];
entityToCharacterMap["&quot"] = "34";
entityToCharacterMap["&amp"] = "38";
entityToCharacterMap["&lt"] = "60";
entityToCharacterMap["&gt"] = "62";
entityToCharacterMap["&nbsp"] = "160";
entityToCharacterMap["&iexcl"] = "161";
entityToCharacterMap["&cent"] = "162";
entityToCharacterMap["&pound"] = "163";
entityToCharacterMap["&curren"] = "164";
entityToCharacterMap["&yen"] = "165";
entityToCharacterMap["&brvbar"] = "166";
entityToCharacterMap["&sect"] = "167";
entityToCharacterMap["&uml"] = "168";
entityToCharacterMap["&copy"] = "169";
entityToCharacterMap["&ordf"] = "170";
entityToCharacterMap["&laquo"] = "171";
entityToCharacterMap["&not"] = "172";
entityToCharacterMap["&shy"] = "173";
entityToCharacterMap["&reg"] = "174";
entityToCharacterMap["&macr"] = "175";
entityToCharacterMap["&deg"] = "176";
entityToCharacterMap["&plusmn"] = "177";
entityToCharacterMap["&sup2"] = "178";
entityToCharacterMap["&sup3"] = "179";
entityToCharacterMap["&acute"] = "180";
entityToCharacterMap["&micro"] = "181";
entityToCharacterMap["&para"] = "182";
entityToCharacterMap["&middot"] = "183";
entityToCharacterMap["&cedil"] = "184";
entityToCharacterMap["&sup1"] = "185";
entityToCharacterMap["&ordm"] = "186";
entityToCharacterMap["&raquo"] = "187";
entityToCharacterMap["&frac14"] = "188";
entityToCharacterMap["&frac12"] = "189";
entityToCharacterMap["&frac34"] = "190";
entityToCharacterMap["&iquest"] = "191";
entityToCharacterMap["&Agrave"] = "192";
entityToCharacterMap["&Aacute"] = "193";
entityToCharacterMap["&Acirc"] = "194";
entityToCharacterMap["&Atilde"] = "195";
entityToCharacterMap["&Auml"] = "196";
entityToCharacterMap["&Aring"] = "197";
entityToCharacterMap["&AElig"] = "198";
entityToCharacterMap["&Ccedil"] = "199";
entityToCharacterMap["&Egrave"] = "200";
entityToCharacterMap["&Eacute"] = "201";
entityToCharacterMap["&Ecirc"] = "202";
entityToCharacterMap["&Euml"] = "203";
entityToCharacterMap["&Igrave"] = "204";
entityToCharacterMap["&Iacute"] = "205";
entityToCharacterMap["&Icirc"] = "206";
entityToCharacterMap["&Iuml"] = "207";
entityToCharacterMap["&ETH"] = "208";
entityToCharacterMap["&Ntilde"] = "209";
entityToCharacterMap["&Ograve"] = "210";
entityToCharacterMap["&Oacute"] = "211";
entityToCharacterMap["&Ocirc"] = "212";
entityToCharacterMap["&Otilde"] = "213";
entityToCharacterMap["&Ouml"] = "214";
entityToCharacterMap["&times"] = "215";
entityToCharacterMap["&Oslash"] = "216";
entityToCharacterMap["&Ugrave"] = "217";
entityToCharacterMap["&Uacute"] = "218";
entityToCharacterMap["&Ucirc"] = "219";
entityToCharacterMap["&Uuml"] = "220";
entityToCharacterMap["&Yacute"] = "221";
entityToCharacterMap["&THORN"] = "222";
entityToCharacterMap["&szlig"] = "223";
entityToCharacterMap["&agrave"] = "224";
entityToCharacterMap["&aacute"] = "225";
entityToCharacterMap["&acirc"] = "226";
entityToCharacterMap["&atilde"] = "227";
entityToCharacterMap["&auml"] = "228";
entityToCharacterMap["&aring"] = "229";
entityToCharacterMap["&aelig"] = "230";
entityToCharacterMap["&ccedil"] = "231";
entityToCharacterMap["&egrave"] = "232";
entityToCharacterMap["&eacute"] = "233";
entityToCharacterMap["&ecirc"] = "234";
entityToCharacterMap["&euml"] = "235";
entityToCharacterMap["&igrave"] = "236";
entityToCharacterMap["&iacute"] = "237";
entityToCharacterMap["&icirc"] = "238";
entityToCharacterMap["&iuml"] = "239";
entityToCharacterMap["&eth"] = "240";
entityToCharacterMap["&ntilde"] = "241";
entityToCharacterMap["&ograve"] = "242";
entityToCharacterMap["&oacute"] = "243";
entityToCharacterMap["&ocirc"] = "244";
entityToCharacterMap["&otilde"] = "245";
entityToCharacterMap["&ouml"] = "246";
entityToCharacterMap["&divide"] = "247";
entityToCharacterMap["&oslash"] = "248";
entityToCharacterMap["&ugrave"] = "249";
entityToCharacterMap["&uacute"] = "250";
entityToCharacterMap["&ucirc"] = "251";
entityToCharacterMap["&uuml"] = "252";
entityToCharacterMap["&yacute"] = "253";
entityToCharacterMap["&thorn"] = "254";
entityToCharacterMap["&yuml"] = "255";
entityToCharacterMap["&OElig"] = "338";
entityToCharacterMap["&oelig"] = "339";
entityToCharacterMap["&Scaron"] = "352";
entityToCharacterMap["&scaron"] = "353";
entityToCharacterMap["&Yuml"] = "376";
entityToCharacterMap["&fnof"] = "402";
entityToCharacterMap["&circ"] = "710";
entityToCharacterMap["&tilde"] = "732";
entityToCharacterMap["&Alpha"] = "913";
entityToCharacterMap["&Beta"] = "914";
entityToCharacterMap["&Gamma"] = "915";
entityToCharacterMap["&Delta"] = "916";
entityToCharacterMap["&Epsilon"] = "917";
entityToCharacterMap["&Zeta"] = "918";
entityToCharacterMap["&Eta"] = "919";
entityToCharacterMap["&Theta"] = "920";
entityToCharacterMap["&Iota"] = "921";
entityToCharacterMap["&Kappa"] = "922";
entityToCharacterMap["&Lambda"] = "923";
entityToCharacterMap["&Mu"] = "924";
entityToCharacterMap["&Nu"] = "925";
entityToCharacterMap["&Xi"] = "926";
entityToCharacterMap["&Omicron"] = "927";
entityToCharacterMap["&Pi"] = "928";
entityToCharacterMap["&Rho"] = "929";
entityToCharacterMap["&Sigma"] = "931";
entityToCharacterMap["&Tau"] = "932";
entityToCharacterMap["&Upsilon"] = "933";
entityToCharacterMap["&Phi"] = "934";
entityToCharacterMap["&Chi"] = "935";
entityToCharacterMap["&Psi"] = "936";
entityToCharacterMap["&Omega"] = "937";
entityToCharacterMap["&alpha"] = "945";
entityToCharacterMap["&beta"] = "946";
entityToCharacterMap["&gamma"] = "947";
entityToCharacterMap["&delta"] = "948";
entityToCharacterMap["&epsilon"] = "949";
entityToCharacterMap["&zeta"] = "950";
entityToCharacterMap["&eta"] = "951";
entityToCharacterMap["&theta"] = "952";
entityToCharacterMap["&iota"] = "953";
entityToCharacterMap["&kappa"] = "954";
entityToCharacterMap["&lambda"] = "955";
entityToCharacterMap["&mu"] = "956";
entityToCharacterMap["&nu"] = "957";
entityToCharacterMap["&xi"] = "958";
entityToCharacterMap["&omicron"] = "959";
entityToCharacterMap["&pi"] = "960";
entityToCharacterMap["&rho"] = "961";
entityToCharacterMap["&sigmaf"] = "962";
entityToCharacterMap["&sigma"] = "963";
entityToCharacterMap["&tau"] = "964";
entityToCharacterMap["&upsilon"] = "965";
entityToCharacterMap["&phi"] = "966";
entityToCharacterMap["&chi"] = "967";
entityToCharacterMap["&psi"] = "968";
entityToCharacterMap["&omega"] = "969";
entityToCharacterMap["&thetasym"] = "977";
entityToCharacterMap["&upsih"] = "978";
entityToCharacterMap["&piv"] = "982";
entityToCharacterMap["&ensp"] = "8194";
entityToCharacterMap["&emsp"] = "8195";
entityToCharacterMap["&thinsp"] = "8201";
entityToCharacterMap["&zwnj"] = "8204";
entityToCharacterMap["&zwj"] = "8205";
entityToCharacterMap["&lrm"] = "8206";
entityToCharacterMap["&rlm"] = "8207";
entityToCharacterMap["&ndash"] = "8211";
entityToCharacterMap["&mdash"] = "8212";
entityToCharacterMap["&lsquo"] = "8216";
entityToCharacterMap["&rsquo"] = "8217";
entityToCharacterMap["&sbquo"] = "8218";
entityToCharacterMap["&ldquo"] = "8220";
entityToCharacterMap["&rdquo"] = "8221";
entityToCharacterMap["&bdquo"] = "8222";
entityToCharacterMap["&dagger"] = "8224";
entityToCharacterMap["&Dagger"] = "8225";
entityToCharacterMap["&bull"] = "8226";
entityToCharacterMap["&hellip"] = "8230";
entityToCharacterMap["&permil"] = "8240";
entityToCharacterMap["&prime"] = "8242";
entityToCharacterMap["&Prime"] = "8243";
entityToCharacterMap["&lsaquo"] = "8249";
entityToCharacterMap["&rsaquo"] = "8250";
entityToCharacterMap["&oline"] = "8254";
entityToCharacterMap["&frasl"] = "8260";
entityToCharacterMap["&euro"] = "8364";
entityToCharacterMap["&image"] = "8365";
entityToCharacterMap["&weierp"] = "8472";
entityToCharacterMap["&real"] = "8476";
entityToCharacterMap["&trade"] = "8482";
entityToCharacterMap["&alefsym"] = "8501";
entityToCharacterMap["&larr"] = "8592";
entityToCharacterMap["&uarr"] = "8593";
entityToCharacterMap["&rarr"] = "8594";
entityToCharacterMap["&darr"] = "8595";
entityToCharacterMap["&harr"] = "8596";
entityToCharacterMap["&crarr"] = "8629";
entityToCharacterMap["&lArr"] = "8656";
entityToCharacterMap["&uArr"] = "8657";
entityToCharacterMap["&rArr"] = "8658";
entityToCharacterMap["&dArr"] = "8659";
entityToCharacterMap["&hArr"] = "8660";
entityToCharacterMap["&forall"] = "8704";
entityToCharacterMap["&part"] = "8706";
entityToCharacterMap["&exist"] = "8707";
entityToCharacterMap["&empty"] = "8709";
entityToCharacterMap["&nabla"] = "8711";
entityToCharacterMap["&isin"] = "8712";
entityToCharacterMap["&notin"] = "8713";
entityToCharacterMap["&ni"] = "8715";
entityToCharacterMap["&prod"] = "8719";
entityToCharacterMap["&sum"] = "8721";
entityToCharacterMap["&minus"] = "8722";
entityToCharacterMap["&lowast"] = "8727";
entityToCharacterMap["&radic"] = "8730";
entityToCharacterMap["&prop"] = "8733";
entityToCharacterMap["&infin"] = "8734";
entityToCharacterMap["&ang"] = "8736";
entityToCharacterMap["&and"] = "8743";
entityToCharacterMap["&or"] = "8744";
entityToCharacterMap["&cap"] = "8745";
entityToCharacterMap["&cup"] = "8746";
entityToCharacterMap["&int"] = "8747";
entityToCharacterMap["&there4"] = "8756";
entityToCharacterMap["&sim"] = "8764";
entityToCharacterMap["&cong"] = "8773";
entityToCharacterMap["&asymp"] = "8776";
entityToCharacterMap["&ne"] = "8800";
entityToCharacterMap["&equiv"] = "8801";
entityToCharacterMap["&le"] = "8804";
entityToCharacterMap["&ge"] = "8805";
entityToCharacterMap["&sub"] = "8834";
entityToCharacterMap["&sup"] = "8835";
entityToCharacterMap["&nsub"] = "8836";
entityToCharacterMap["&sube"] = "8838";
entityToCharacterMap["&supe"] = "8839";
entityToCharacterMap["&oplus"] = "8853";
entityToCharacterMap["&otimes"] = "8855";
entityToCharacterMap["&perp"] = "8869";
entityToCharacterMap["&sdot"] = "8901";
entityToCharacterMap["&lceil"] = "8968";
entityToCharacterMap["&rceil"] = "8969";
entityToCharacterMap["&lfloor"] = "8970";
entityToCharacterMap["&rfloor"] = "8971";
entityToCharacterMap["&lang"] = "9001";
entityToCharacterMap["&rang"] = "9002";
entityToCharacterMap["&loz"] = "9674";
entityToCharacterMap["&spades"] = "9824";
entityToCharacterMap["&clubs"] = "9827";
entityToCharacterMap["&hearts"] = "9829";
entityToCharacterMap["&diams"] = "9830";
var characterToEntityMap = [];
for (var entity in entityToCharacterMap) {
    characterToEntityMap[entityToCharacterMap[entity]] = entity
}
$namespace("org.owasp.esapi.codecs");
org.owasp.esapi.codecs.HTMLEntityCodec = function () {
    var f = new org.owasp.esapi.codecs.Codec();
    var a = function (g) {
        var h = g.peek();
        if (h == null) {
            return null
        }
        if (h == "x" || h == "X") {
            g.next();
            return d(g)
        }
        return e(g)
    };
    var e = function (g) {
        var h = "";
        while (g.hasNext()) {
            var j = g.peek();
            if (j.match(/[0-9]/)) {
                h += j;
                g.next()
            } else {
                if (j == ";") {
                    g.next();
                    break
                } else {
                    break
                }
            }
        }
        try {
            return parseInt(h)
        } catch (i) {
            return null
        }
    };
    var d = function (g) {
        var h = "";
        while (g.hasNext()) {
            var j = g.peek();
            if (j.match(/[0-9A-Fa-f]/)) {
                h += j;
                g.next()
            } else {
                if (j == ";") {
                    g.next();
                    break
                } else {
                    break
                }
            }
        }
        try {
            return parseInt(h, 16)
        } catch (i) {
            return null
        }
    };
    var b = function (h) {
        var g = "";
        while (h.hasNext()) {
            var i = h.peek();
            if (i.match(/[A-Za-z]/)) {
                g += i;
                h.next();
                if (entityToCharacterMap.containsKey("&" + g)) {
                    if (h.peek(";")) {
                        h.next()
                    }
                    break
                }
            } else {
                if (i == ";") {
                    h.next()
                } else {
                    break
                }
            }
        }
        return String.fromCharCode(entityToCharacterMap.getCaseInsensitive("&" + g))
    };
    return {
        encode: f.encode, decode: f.decode, encodeCharacter: function (h, k) {
            if (h.contains(k)) {
                return k
            }
            var i = org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric(k);
            if (i == null) {
                return k
            }
            var j = k.charCodeAt(0);
            if ((j <= 31 && k != "\t" && k != "\n" && k != "\r") || (j >= 127 && j <= 159) || k == " ") {
                return " "
            }
            var g = characterToEntityMap[j];
            if (g != null) {
                return g + ";"
            }
            return "&#x" + i + ";"
        }, decodeCharacter: function (k) {
            var g = k;
            g.mark();
            var i = g.next();
            if (i == null || i != "&") {
                g.reset();
                return null
            }
            var h = g.next();
            if (h == null) {
                g.reset();
                return null
            }
            if (h == "#") {
                var j = a(g);
                if (j != null) {
                    return j
                }
            } else {
                if (h.match(/[A-Za-z]/)) {
                    g.pushback(h);
                    j = b(g);
                    if (j != null) {
                        return j
                    }
                }
            }
            g.reset();
            return null
        }
    }
};
$namespace("org.owasp.esapi.codecs");
org.owasp.esapi.codecs.JavascriptCodec = function () {
    var a = new org.owasp.esapi.codecs.Codec();
    return {
        encode: function (f, h) {
            var d = "";
            for (var b = 0; b < h.length; b++) {
                var g = h.charAt(b);
                if (f.contains(g)) {
                    d += g
                } else {
                    var i = org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric(g);
                    if (i == null) {
                        d += g
                    } else {
                        var e = g.charCodeAt(0).toString(16);
                        if (g.charCodeAt(0) < 256) {
                            var j = "00".substr(e.length);
                            d += "\\x" + j + e.toUpperCase()
                        } else {
                            j = "0000".substr(e.length);
                            d += "\\u" + j + e.toUpperCase()
                        }
                    }
                }
            }
            return d
        }, decode: a.decode, decodeCharacter: function (p) {
            p.mark();
            var k = p.next();
            if (k == null) {
                p.reset();
                return null
            }
            if (k != "\\") {
                p.reset();
                return null
            }
            var b = p.next();
            if (b == null) {
                p.reset();
                return null
            }
            if (b == "b") {
                return 8
            } else {
                if (b == "t") {
                    return 9
                } else {
                    if (b == "n") {
                        return 10
                    } else {
                        if (b == "v") {
                            return 11
                        } else {
                            if (b == "f") {
                                return 12
                            } else {
                                if (b == "r") {
                                    return 13
                                } else {
                                    if (b == '"') {
                                        return 34
                                    } else {
                                        if (b == "'") {
                                            return 39
                                        } else {
                                            if (b == "\\") {
                                                return 92
                                            } else {
                                                if (b.toLowerCase() == "x") {
                                                    h = "";
                                                    for (var j = 0; j < 2; j++) {
                                                        var m = p.nextHex();
                                                        if (m != null) {
                                                            h += m
                                                        } else {
                                                            input.reset();
                                                            return null
                                                        }
                                                    }
                                                    try {
                                                        d = parseInt(h, 16);
                                                        return String.fromCharCode(d)
                                                    } catch (l) {
                                                        p.reset();
                                                        return null
                                                    }
                                                } else {
                                                    if (b.toLowerCase() == "u") {
                                                        h = "";
                                                        for (j = 0; j < 4; j++) {
                                                            m = p.nextHex();
                                                            if (m != null) {
                                                                h += m
                                                            } else {
                                                                input.reset();
                                                                return null
                                                            }
                                                        }
                                                        try {
                                                            var d = parseInt(h, 16);
                                                            return String.fromCharCode(d)
                                                        } catch (l) {
                                                            p.reset();
                                                            return null
                                                        }
                                                    } else {
                                                        if (p.isOctalDigit(b)) {
                                                            var h = b;
                                                            var g = p.next();
                                                            if (!p.isOctalDigit(g)) {
                                                                p.pushback(g)
                                                            } else {
                                                                h += g;
                                                                var f = p.next();
                                                                if (!p.isOctalDigit(f)) {
                                                                    p.pushback(f)
                                                                } else {
                                                                    h += f
                                                                }
                                                            }
                                                            try {
                                                                d = parseInt(h, 8);
                                                                return String.fromCharCode(d)
                                                            } catch (l) {
                                                                p.reset();
                                                                return null
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            return b
        }
    }
};
$namespace("org.owasp.esapi.codecs");
org.owasp.esapi.codecs.PercentCodec = function () {
    var e = new org.owasp.esapi.codecs.Codec();
    var d = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    var b = "-._~";
    var a = true;
    var g = d + (a ? "" : b);
    var f = function (h) {
        var i = "";
        if (h < -128 || h > 127) {
            throw new IllegalArgumentException("b is not a byte (was " + h + ")")
        }
        h &= 255;
        if (h < 16) {
            i += "0"
        }
        return i + h.toString(16).toUpperCase()
    };
    return {
        encode: e.encode, decode: e.decode, encodeCharacter: function (k, l) {
            if (g.indexOf(l) > -1) {
                return l
            }
            var i = org.owasp.esapi.codecs.UTF8.encode(l);
            var j = "";
            for (var h = 0; h < i.length; h++) {
                j += "%" + f(i.charCodeAt(h))
            }
            return j
        }, decodeCharacter: function (q) {
            q.mark();
            var l = q.next();
            if (l == null || l != "%") {
                q.reset();
                return null
            }
            var h = "";
            for (var j = 0; j < 2; j++) {
                var p = q.nextHex();
                if (p != null) {
                    h += p
                }
            }
            if (h.length == 2) {
                try {
                    var m = parseInt(h, 16);
                    return String.fromCharCode(m)
                } catch (k) {
                }
            }
            q.reset();
            return null
        }
    }
};
$namespace("org.owasp.esapi.codecs");
org.owasp.esapi.codecs.PushbackString = function (b) {
    var e = b, g = "", a = "", f = 0, d = 0;
    return {
        pushback: function (h) {
            g = h
        }, index: function () {
            return f
        }, hasNext: function () {
            if (g != null) {
                return true
            }
            return !(e == null || e.length == 0 || f >= e.length)
        }, next: function () {
            if (g != null) {
                var h = g;
                g = null;
                return h
            }
            if (e == null || e.length == 0 || f >= e.length) {
                return null
            }
            return e.charAt(f++)
        }, nextHex: function () {
            var h = this.next();
            if (this.isHexDigit(h)) {
                return h
            }
            return null
        }, nextOctal: function () {
            var h = this.next();
            if (this.isOctalDigit(h)) {
                return h
            }
            return null
        }, isHexDigit: function (h) {
            return h != null && ((h >= "0" && h <= "9") || (h >= "a" && h <= "f") || (h >= "A" && h <= "F"))
        }, isOctalDigit: function (h) {
            return h != null && (h >= "0" && h <= "7")
        }, peek: function (h) {
            if (!h) {
                if (g != null) {
                    return g
                }
                if (e == null || e.length == 0 || f >= e.length) {
                    return null
                }
                return e.charAt(f)
            } else {
                if (g != null && g == h) {
                    return true
                }
                if (e == null || e.length == 0 || f >= e.length) {
                    return false
                }
                return e.charAt(f) == h
            }
        }, mark: function () {
            a = g;
            d = f
        }, reset: function () {
            g = a;
            f = d
        }, remainder: function () {
            var h = e.substr(f);
            if (g != null) {
                h = g + h
            }
            return h
        }
    }
};
$namespace("org.owasp.esapi.codecs");
org.owasp.esapi.codecs.UTF8 = {
    encode: function (d) {
        var b = d.replace(/\r\n/g, "\n");
        var a = "";
        for (var f = 0; f < b.length; f++) {
            var e = b.charCodeAt(f);
            if (e < 128) {
                a += String.fromCharCode(e)
            } else {
                if ((e > 127) && (e < 2048)) {
                    a += String.fromCharCode((e >> 6) | 192);
                    a += String.fromCharCode((e & 63) | 128)
                } else {
                    a += String.fromCharCode((e >> 12) | 224);
                    a += String.fromCharCode(((e >> 6) & 63) | 128);
                    a += String.fromCharCode((e & 63) | 128)
                }
            }
        }
        return a
    }, decode: function (d) {
        var a = "";
        var b = c = c1 = c2 = 0;
        while (b < d.length) {
            c = d.charCodeAt(b);
            if (c < 128) {
                a += String.fromCharCode(c);
                b++
            } else {
                if ((c > 191) && (c < 224)) {
                    c2 = d.charCodeAt(b + 1);
                    a += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
                    b += 2
                } else {
                    c2 = utftext.charCodeAt(b + 1);
                    c3 = utftext.charCodeAt(b + 2);
                    string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
                    b += 3
                }
            }
        }
        return a
    }
};
$namespace("org.owasp.esapi.i18n");
org.owasp.esapi.i18n.ArrayResourceBundle = function (sName, oLocale, aMessages, oParent) {
    with (org.owasp.esapi.i18n) {
        var _super = new ResourceBundle(sName, oLocale, oParent)
    }
    var messages = aMessages;
    return {
        getParent: _super.getParent,
        getLocale: _super.getLocale,
        getName: _super.getName,
        getString: _super.getString,
        getMessage: function (sKey) {
            return messages[sKey]
        }
    }
};
$namespace("org.owasp.esapi.i18n");
org.owasp.esapi.i18n.Locale = function (f, d, a) {
    var g = f, e = d, b = a;
    return {
        getLanguage: function () {
            return g
        }, getCountry: function () {
            return e
        }, getVariant: function () {
            return b
        }, toString: function () {
            return g + (e ? "-" + e + (b ? "-" + b : "") : "")
        }
    }
};
org.owasp.esapi.i18n.Locale.US = new org.owasp.esapi.i18n.Locale("en", "US");
org.owasp.esapi.i18n.Locale.GB = new org.owasp.esapi.i18n.Locale("en", "GB");
org.owasp.esapi.i18n.Locale.getLocale = function (b) {
    var a = b.split("-");
    return new org.owasp.esapi.i18n.Locale(a[0], (a.length > 1 ? a[1] : ""), (a.length > 2 ? a.length[2] : ""))
};
org.owasp.esapi.i18n.Locale.getDefault = function () {
    var a = (navigator.language ? navigator.language : (navigator.userLanguage ? navigator.userLanguage : "en-US")).split("-");
    return new org.owasp.esapi.i18n.Locale(a[0], (a.length > 1 ? a[1] : ""), (a.length > 2 ? a.length[2] : ""))
};
$namespace("org.owasp.esapi.i18n");
org.owasp.esapi.i18n.ObjectResourceBundle = function (e, d) {
    var b = new org.owasp.esapi.i18n.ResourceBundle(e.name, org.owasp.esapi.i18n.Locale.getLocale(e.locale), d);
    var a = e.messages;
    return {
        getParent: b.getParent,
        getLocale: b.getLocale,
        getName: b.getName,
        getString: b.getString,
        getMessage: function (f) {
            return a[f]
        }
    }
};
$namespace("org.owasp.esapi.i18n");
org.owasp.esapi.i18n.ResourceBundle = function (g, e, b) {
    var f = b;
    var a = e;
    var d = g;
    if (!d) {
        throw new SyntaxError("Name required for implementations of org.owasp.esapi.i18n.ResourceBundle")
    }
    if (!a) {
        throw new SyntaxError("Locale required for implementations of org.owasp.esapi.i18n.ResourceBundle")
    }
    return {
        getParent: function () {
            return f
        }, getLocale: function () {
            return a
        }, getName: function () {
            return d
        }, getMessage: function (h) {
            return h
        }, getString: function (l, p) {
            if (arguments.length < 1) {
                throw new IllegalArgumentException("No key passed to getString")
            }
            var m = this.getMessage(l);
            if (!m) {
                if (f) {
                    return f.getString(l, p)
                } else {
                    return l
                }
            }
            if (!m.match(/\{([A-Za-z]+)\}/) || !p) {
                return m
            }
            var h = "", n = 0;
            while (true) {
                var j = m.indexOf("{", n);
                var k = m.indexOf("}", j);
                if (j < 0) {
                    h += m.substr(n, m.length - n);
                    break
                }
                if (j >= 0 && k < -1) {
                    throw new SyntaxError("Invalid Message - Unclosed Context Reference: " + m)
                }
                h += m.substring(n, j);
                var i = m.substring(j + 1, k);
                if (p[i]) {
                    h += p[i]
                } else {
                    h += m.substring(j, k + 1)
                }
                n = k + 1
            }
            return h
        }
    }
};
org.owasp.esapi.i18n.ResourceBundle.getResourceBundle = function (sResource, oLocale) {
    var classname = sResource + "_" + oLocale.toString().replace("-", "_");
    with (org.owasp.esapi.i18n) {
        if (ResourceBundle[classname] instanceof Object) {
            return ResourceBundle[classname]
        } else {
            return new ResourceBundle[classname]()
        }
    }
};
$namespace("org.owasp.esapi.net");
org.owasp.esapi.net.Cookie = function (g, n) {
    var b;
    var m;
    var h;
    var f;
    var l;
    var p;
    var a;
    var k;
    var d = $ESAPI.resourceBundle();
    var i = ",; ";
    var e = function (u) {
        for (var r = 0, q = u.length; r < q; r++) {
            var t = u.charCodeAt(r), s = u.charAt(r);
            if (t < 32 || t >= 127 || i.indexOf(s) != -1) {
                return false
            }
        }
        return true
    };
    if (!e(g) || g.toLowerCase() == "comment" || g.toLowerCase() == "discard" || g.toLowerCase() == "domain" || g.toLowerCase() == "expires" || g.toLowerCase() == "max-age" || g.toLowerCase() == "path" || g.toLowerCase() == "secure" || g.toLowerCase() == "version" || g.charAt(0) == "$") {
        var j = d.getString("Cookie.Name", {name: g});
        throw new IllegalArgumentException(j)
    }
    b = g;
    m = n;
    return {
        setComment: function (q) {
            h = q
        }, getComment: function () {
            return h
        }, setDomain: function (q) {
            f = q.toLowerCase()
        }, getDomain: function () {
            return f
        }, setMaxAge: function (q) {
            l = q
        }, getMaxAge: function () {
            return l
        }, setPath: function (q) {
            p = q
        }, getPath: function () {
            return p
        }, setSecure: function (q) {
            a = q
        }, getSecure: function () {
            return a
        }, getName: function () {
            return b
        }, setValue: function (q) {
            m = q
        }, getValue: function () {
            return m
        }, setVersion: function (q) {
            if (q < 0 || q > 1) {
                throw new IllegalArgumentException(d.getString("Cookie.Version", {version: q}))
            }
            k = q
        }, getVersion: function () {
            return k
        }
    }
};
$namespace("org.owasp.esapi.reference.encoding");
org.owasp.esapi.reference.encoding.DefaultEncoder = function (a) {
    var h = [], k = new org.owasp.esapi.codecs.HTMLEntityCodec(), f = new org.owasp.esapi.codecs.JavascriptCodec(),
        g = new org.owasp.esapi.codecs.CSSCodec(), b = new org.owasp.esapi.codecs.PercentCodec();
    if (!a) {
        h.push(k);
        h.push(f);
        h.push(g);
        h.push(b)
    } else {
        h = a
    }
    var e = new Array(",", ".", "-", "_", " ");
    var d = new Array(",", ".", "-", "_");
    var j = new Array();
    var i = new Array(",", ".", "_");
    return {
        cananicalize: function (r, m) {
            if (!r) {
                return null
            }
            var l = r, p = null, s = 1, n = 0, q = false;
            while (!q) {
                q = true;
                h.each(function (u) {
                    var t = l;
                    l = u.decode(l);
                    if (t != l) {
                        if (p != null && p != u) {
                            s++
                        }
                        p = u;
                        if (q) {
                            n++
                        }
                        q = false
                    }
                })
            }
            if (n >= 2 && s > 1) {
                if (m) {
                    throw new org.owasp.esapi.IntrusionException("Input validation failure", "Multiple (" + n + "x) and mixed encoding (" + s + "x) detected in " + r)
                }
            } else {
                if (n >= 2) {
                    if (m) {
                        throw new org.owasp.esapi.IntrusionException("Input validation failure", "Multiple (" + n + "x) encoding detected in " + r)
                    }
                } else {
                    if (s > 1) {
                        if (m) {
                            throw new org.owasp.esapi.IntrusionException("Input validation failure", "Mixed (" + s + "x) encoding detected in " + r)
                        }
                    }
                }
            }
            return l
        }, normalize: function (l) {
            return l.replace(/[^\x00-\x7F]/g, "")
        }, encodeForHTML: function (l) {
            return !l ? null : k.encode(e, l)
        }, decodeForHTML: function (l) {
            return !l ? null : k.decode(l)
        }, encodeForHTMLAttribute: function (l) {
            return !l ? null : k.encode(d, l)
        }, encodeForCSS: function (l) {
            return !l ? null : g.encode(j, l)
        }, encodeForJavaScript: function (l) {
            return !l ? null : f.encode(i, l)
        }, encodeForJavascript: this.encodeForJavaScript, encodeForURL: function (l) {
            return !l ? null : escape(l)
        }, decodeFromURL: function (l) {
            return !l ? null : unescape(l)
        }, encodeForBase64: function (l) {
            return !l ? null : org.owasp.esapi.codecs.Base64.encode(l)
        }, decodeFromBase64: function (l) {
            return !l ? null : org.owasp.esapi.codecs.Base64.decode(l)
        }
    }
};
$namespace("org.owasp.esapi.reference.logging");
org.owasp.esapi.reference.logging.Log4JSLogFactory = function () {
    var d = Array();
    var b = function (m) {
        var f = null;
        var e = m ? m : null;
        var k = Log4js.Level;
        var i = false, j = false, l = false, h = $ESAPI.encoder().encodeForHTML;
        f = Log4js.getLogger(e);
        var g = function (p) {
            var n = org.owasp.esapi.Logger;
            switch (p) {
                case n.OFF:
                    return Log4js.Level.OFF;
                case n.FATAL:
                    return Log4js.Level.FATAL;
                case n.ERROR:
                    return Log4js.Level.ERROR;
                case n.WARNING:
                    return Log4js.Level.WARN;
                case n.INFO:
                    return Log4js.Level.INFO;
                case n.DEBUG:
                    return Log4js.Level.DEBUG;
                case n.TRACE:
                    return Log4js.Level.TRACE;
                case n.ALL:
                    return Log4js.Level.ALL
            }
        };
        return {
            setLevel: function (n) {
                try {
                    f.setLevel(g(n))
                } catch (p) {
                    this.error(org.owasp.esapi.Logger.SECURITY_FAILURE, "", p)
                }
            }, trace: function (p, n, q) {
                this.log(k.TRACE, p, n, q)
            }, debug: function (p, n, q) {
                this.log(k.DEBUG, p, n, q)
            }, info: function (p, n, q) {
                this.log(k.INFO, p, n, q)
            }, warning: function (p, n, q) {
                this.log(k.WARN, p, n, q)
            }, error: function (p, n, q) {
                this.log(k.ERROR, p, n, q)
            }, fatal: function (p, n, q) {
                this.log(k.FATAL, p, n, q)
            }, log: function (s, r, p, t) {
                switch (s) {
                    case k.TRACE:
                        if (!f.isTraceEnabled()) {
                            return
                        }
                        break;
                    case k.DEBUG:
                        if (!f.isDebugEnabled()) {
                            return
                        }
                        break;
                    case k.INFO:
                        if (!f.isInfoEnabled()) {
                            return
                        }
                        break;
                    case k.WARNING:
                        if (!f.isWarnEnabled()) {
                            return
                        }
                        break;
                    case k.ERROR:
                        if (!f.isErrorEnabled()) {
                            return
                        }
                        break;
                    case k.FATAL:
                        if (!f.isFatalEnabled()) {
                            return
                        }
                        break
                }
                if (!p) {
                    p = ""
                }
                p = "[" + r.toString() + "] - " + p;
                var n = p.replace("\n", "_").replace("\r", "_");
                if (l) {
                    n = h(n);
                    if (n != p) {
                        n += " [Encoded]"
                    }
                }
                var q = (i ? window.location.href : "") + (j ? "/" + $ESAPI.properties.application.Name : "");
                f.log(s, (q != "" ? "[" + q + "] " : "") + n, t)
            }, addAppender: function (n) {
                f.addAppender(n)
            }, isLogUrl: function () {
                return i
            }, setLogUrl: function (n) {
                i = n
            }, isLogApplicationName: function () {
                return j
            }, setLogApplicationName: function (n) {
                j = n
            }, isEncodingRequired: function () {
                return l
            }, setEncodingRequired: function (n) {
                l = n
            }, setEncodingFunction: function (n) {
                h = n
            }, isDebugEnabled: function () {
                return f.isDebugEnabled()
            }, isErrorEnabled: function () {
                return f.isErrorEnabled()
            }, isFatalEnabled: function () {
                return f.isFatalEnabled()
            }, isInfoEnabled: function () {
                return f.isInfoEnabled()
            }, isTraceEnabled: function () {
                return f.isTraceEnabled()
            }, isWarningEnabled: function () {
                return f.isWarnEnabled()
            }
        }
    };
    var a = function (f) {
        var e = $ESAPI.properties.logging;
        if (e[f]) {
            e = e[f]
        }
        return e
    };
    return {
        getLogger: function (g) {
            var h = (typeof g == "string") ? g : g.constructor.toString();
            var f = d[h];
            if (!f) {
                f = new b(h);
                var e = a(g);
                f.setLevel(e.Level);
                f.setLogUrl(e.LogUrl);
                f.setLogApplicationName(e.LogApplicationName);
                f.setEncodingRequired(e.EncodingRequired);
                if (e.EncodingFunction) {
                    f.setEncodingFunction(e.EncodingFunction)
                }
                e.Appenders.each(function (i) {
                    if (e.Layout) {
                        i.setLayout(e.Layout)
                    }
                    f.addAppender(i)
                });
                d[h] = f
            }
            return f
        }
    }
};
$namespace("org.owasp.esapi.reference.validation");
org.owasp.esapi.reference.validation.BaseValidationRule = function (f, h, a) {
    var g = $ESAPI.logger("Validation");
    var b = org.owasp.esapi.Logger.EventType;
    var i = f;
    var j = h ? h : $ESAPI.encoder();
    var l = false;
    var e = org.owasp.esapi.i18n.ResourceBundle;
    var k = a ? a : $ESAPI.locale();
    var d;
    if ($ESAPI.properties.validation.ResourceBundle) {
        d = e.getResourceBundle($ESAPI.properties.validation.ResourceBundle, k)
    }
    if (!d) {
        d = $ESAPI.resourceBundle();
        g.info(b.EVENT_FAILURE, "No Validation ResourceBundle - Defaulting to " + d.getName() + "(" + d.getLocale().toString() + ")")
    }
    g.info(b.EVENT_SUCCESS, "Validation Rule Initialized with ResourceBundle: " + d.getName());
    return {
        setAllowNull: function (m) {
            l = m
        }, isAllowNull: function () {
            return l
        }, getTypeName: function () {
            return i
        }, setTypeName: function (m) {
            i = m
        }, setEncoder: function (m) {
            j = m
        }, getEncoder: function () {
            return j
        }, assertValid: function (m, n) {
            this.getValid(m, n)
        }, getValid: function (m, p, r) {
            var q = null;
            try {
                q = this.getValidInput(m, p)
            } catch (n) {
                return this.sanitize(m, p)
            }
            return q
        }, getValidInput: function (m, n) {
            return n
        }, getSafe: function (m, p) {
            var q = null;
            try {
                q = this.getValidInput(m, p)
            } catch (n) {
                return this.sanitize(m, p)
            }
            return q
        }, sanitize: function (m, n) {
            return n
        }, isValid: function (m, p) {
            var q = false;
            try {
                this.getValidInput(m, p);
                q = true
            } catch (n) {
                return false
            }
            return q
        }, whitelist: function (n, p) {
            var q = "";
            for (var m = 0; m < n.length; m++) {
                var r = n.charAt(m);
                if (p.contains(r)) {
                    q += r
                }
            }
            return q
        }, getUserMessage: function (p, m, n) {
            return this.getMessage(p + ".Usr", m + ".Usr", n)
        }, getLogMessage: function (p, m, n) {
            return this.getMessage(p + ".Log", m + ".Log", n)
        }, getMessage: function (p, m, n) {
            return d.getString(p, n) ? d.getString(p, n) : d.getString(m, n)
        }, validationException: function (p, m, q, n) {
            throw new org.owasp.esapi.reference.validation.ValidationException(this.getUserMessage(p + "." + q, m + "." + q, n), this.getLogMessage(p + "." + q, m + "." + q, n), p)
        }
    }
};
$namespace("org.owasp.esapi.reference.validation");
org.owasp.esapi.reference.validation.CreditCardValidationRule = function (b, f, a) {
    var j = new org.owasp.esapi.reference.validation.BaseValidationRule(b, f, a);
    var h = "CreditCard";
    var d = 19;
    var g;
    var e = function () {
        var l = new RegExp($ESAPI.properties.validation.CreditCard);
        var k = new org.owasp.esapi.reference.validation.StringValidationRule("ccrule", j.getEncoder(), a, l);
        k.setMaxLength(d);
        k.setAllowNull(false);
        return k
    };
    ccRule = e();
    var i = function (k) {
        var s = "";
        var q;
        for (var n = 0; o < k.length; n++) {
            q = k.charAt(n);
            if (q.match(/[0-9]/)) {
                s += q
            }
        }
        var p = 0, r = 0, l = 0, t = false;
        for (var m = s.length - 1; m >= 0; m--) {
            r = parseInt(s.substring(m, n + 1));
            if (t) {
                l = r * 2;
                if (l > 9) {
                    l -= 9
                }
            } else {
                l = r
            }
            p += l;
            t = !t
        }
        return p % 10 == 0
    };
    return {
        getMaxCardLength: function () {
            return d
        },
        setMaxCardLength: function (k) {
            d = k
        },
        setAllowNull: j.setAllowNull,
        isAllowNull: j.isAllowNull,
        getTypeName: j.getTypeName,
        setTypeName: j.setTypeName,
        setEncoder: j.setEncoder,
        getEncoder: j.getEncoder,
        assertValid: j.assertValid,
        getValid: j.getValid,
        getValidInput: function (l, m) {
            if (!m || m.trim() == "") {
                if (this.isAllowNull()) {
                    return null
                }
                j.validationException(l, h, "Required", {context: l, input: m})
            }
            var k = g.getValid(l, m);
            if (!i(k)) {
                j.validationException(l, h, "Invalid", {context: l, input: m})
            }
            return k
        },
        getSafe: j.getSafe,
        sanitize: function (k, l) {
            return this.whitelist(l, org.owasp.esapi.EncoderConstants.CHAR_DIGITS)
        },
        isValid: j.isValid,
        whitelist: j.whitelist
    }
};
$namespace("org.owasp.esapi.reference.validation");
org.owasp.esapi.reference.validation.DateValidationRule = function (a, d, b) {
    var f = new org.owasp.esapi.reference.validation.BaseValidationRule(a, d, b);
    var h = "Date";
    var g = DateFormat.getDateInstance();
    var e = function (j, k) {
        if (!j || j.trim() == "") {
            if (f.isAllowNull()) {
                return null
            }
            f.validationException(j, h, "Required", {context: j, input: k, format: g})
        }
        var i = f.getEncoder().cananicalize(k);
        try {
            return g.parse(i)
        } catch (l) {
            f.validationException(j, h, "Invalid", {context: j, input: k, format: g})
        }
    };
    return {
        setDateFormat: function (i) {
            if (!i) {
                throw new IllegalArgumentException("DateValidationRule.setDateFormat requires a non-null DateFormat")
            }
            g = i
        },
        setAllowNull: f.setAllowNull,
        isAllowNull: f.isAllowNull,
        getTypeName: f.getTypeName,
        setTypeName: f.setTypeName,
        setEncoder: f.setEncoder,
        getEncoder: f.getEncoder,
        assertValid: f.assertValid,
        getValid: f.getValid,
        getValidInput: function (i, j) {
            return e(i, j)
        },
        getSafe: f.getSafe,
        sanitize: function (i, k) {
            var j = new Date(0);
            try {
                j = e(i, k)
            } catch (l) {
            }
            return j
        },
        isValid: f.isValid,
        whitelist: f.whitelist
    }
};
$namespace("org.owasp.esapi.reference.validation");
org.owasp.esapi.reference.validation.DefaultValidator = function (e, b) {
    var g = Array();
    var d = e ? e : $ESAPI.encoder();
    var a = b ? b : org.owasp.esapi.i18n.Locale.getDefault();
    var f = org.owasp.esapi.reference.validation;
    return {
        addRule: function (h) {
            g[h.getName()] = h
        }, getRule: function (h) {
            return g[h]
        }, isValidInput: function (h, k, m, j, i) {
            try {
                this.getValidInput(h, k, m, j, i);
                return true
            } catch (l) {
                return false
            }
        }, getValidInput: function (i, q, h, l, k, r) {
            var n = new org.owasp.esapi.reference.validation.StringValidationRule(h, d, a);
            var j = new RegExp($ESAPI.properties.validation[h]);
            if (j && j instanceof RegExp) {
                n.addWhitelistPattern(j)
            } else {
                throw new IllegalArgumentException("Invalid Type: " + h + " not found.")
            }
            n.setMaxLength(l);
            n.setAllowNull(k);
            try {
                return n.getValid(i, q)
            } catch (m) {
                if (m instanceof j.ValidationErrorList && r) {
                    r.addError(i, m)
                }
                throw m
            }
        }, isValidDate: function (i, k, h, j) {
            try {
                this.getValidDate(i, k, h, j);
                return true
            } catch (l) {
                return false
            }
        }, getValidDate: function (i, k, h, j, n) {
            var l = new f.DateValidationRule(i, d, a);
            l.setAllowNull(j);
            l.setDateFormat(h);
            try {
                return l.getValid(i, k)
            } catch (m) {
                if (m instanceof f.ValidationErrorList && n) {
                    n.addError(i, m)
                }
                throw m
            }
        }, getValidCreditCard: function (h, j, i, m) {
            var k = new f.CreditCardValidationRule(h, d, a);
            k.setAllowNull(i);
            try {
                return k.getValid(h, j)
            } catch (l) {
                if (l instanceof f.ValidationErrorList && m) {
                    m.addError(h, l)
                }
                throw l
            }
        }, isValidCreditCard: function (h, j, i) {
            try {
                this.getValidCreditCard(h, j, i);
                return true
            } catch (k) {
                return false
            }
        }, getValidNumber: function (i, k, j, n, p, m) {
            var h = new f.NumberValidationRule(i, d, a, n, p);
            h.setAllowNull(j);
            try {
                return h.getValid(i, k)
            } catch (l) {
                if (l instanceof f.ValidationErrorList && m) {
                    m.addError(i, l)
                }
                throw l
            }
        }, isValidNumber: function (h, j, i, l, m) {
            try {
                this.getValidNumber(h, j, i, l, m);
                return true
            } catch (k) {
                return false
            }
        }, getValidInteger: function (i, k, j, n, p, m) {
            var h = new f.IntegerValidationRule(i, d, a, n, p);
            h.setAllowNull(j);
            try {
                return h.getValid(i, k)
            } catch (l) {
                if (l instanceof f.ValidationErrorList && m) {
                    m.addError(i, l)
                }
                throw l
            }
        }, isValidInteger: function (h, j, i, l, m) {
            try {
                this.getValidInteger(h, j, i, l, m);
                return true
            } catch (k) {
                return false
            }
        }
    }
};
$namespace("org.owasp.esapi.reference.validation");
org.owasp.esapi.reference.validation.IntegerValidationRule = function (b, e, a, k, h) {
    var j = new org.owasp.esapi.reference.validation.BaseValidationRule(b, e, a);
    var d = "Integer";
    var i = k ? k : Number.MIN_VALUE;
    var f = h ? h : Number.MAX_VALUE;
    if (i >= f) {
        throw new IllegalArgumentException("minValue must be less than maxValue")
    }
    var g = function (m, p) {
        if (!p || p.trim() == "") {
            if (j.allowNull()) {
                return null
            }
            j.validationException(m, d, "Required", {context: m, input: p, minValue: i, maxValue: f})
        }
        var l = j.getEncoder().cananicalize(p);
        var q = parseInt(l);
        if (q == "NaN") {
            j.validationException(m, d, "NaN", {context: m, input: p, minValue: i, maxValue: f})
        }
        if (q < i) {
            j.validationException(m, d, "MinValue", {context: m, input: p, minValue: i, maxValue: f})
        }
        if (q > f) {
            j.validationException(m, d, "MaxValue", {context: m, input: p, minValue: i, maxValue: f})
        }
        return q
    };
    return {
        setMinValue: function (l) {
            i = l
        },
        getMinValue: function () {
            return i
        },
        setMaxValue: function (l) {
            f = l
        },
        getMaxValue: function () {
            return f
        },
        setAllowNull: j.setAllowNull,
        isAllowNull: j.isAllowNull,
        getTypeName: j.getTypeName,
        setTypeName: j.setTypeName,
        setEncoder: j.setEncoder,
        getEncoder: j.getEncoder,
        assertValid: j.assertValid,
        getValid: j.getValid,
        getValidInput: function (l, m) {
            return g(l, m)
        },
        getSafe: j.getSafe,
        sanitize: function (l, m) {
            var q = 0;
            try {
                q = g(l, m)
            } catch (p) {
            }
            return q
        },
        isValid: j.isValid,
        whitelist: j.whitelist
    }
};
$namespace("org.owasp.esapi.reference.validation");
org.owasp.esapi.reference.validation.NumberValidationRule = function (b, f, a, h, e) {
    var k = new org.owasp.esapi.reference.validation.BaseValidationRule(b, f, a);
    var d = "Number";
    var j = h ? h : Number.MIN_VALUE;
    var g = e ? e : Number.MAX_VALUE;
    if (j >= g) {
        throw new IllegalArgumentException("MinValue must be less that MaxValue")
    }
    var i = function (m, n) {
        if (!n || n.trim() == "") {
            if (k.isAllowNull()) {
                return null
            }
            k.validationException(m, d, "Required", {context: m, input: n, minValue: j, maxValue: g})
        }
        var l = k.getEncoder().cananicalize(n);
        var p = 0;
        try {
            p = parseFloat(l)
        } catch (q) {
            k.validationException(m, d, "Invalid", {context: m, input: n, minValue: j, maxValue: g})
        }
        if (p == "NaN") {
            k.validationException(m, d, "NaN", {context: m, input: n, minValue: j, maxValue: g})
        }
        if (p < j) {
            k.validationException(m, d, "MinValue", {context: m, input: n, minValue: j, maxValue: g})
        }
        if (p > g) {
            k.validationException(m, d, "MaxValue", {context: m, input: n, minValue: j, maxValue: g})
        }
        return p
    };
    return {
        setMinValue: function (l) {
            j = l
        },
        getMinValue: function () {
            return j
        },
        setMaxValue: function (l) {
            g = l
        },
        getMaxValue: function () {
            return g
        },
        setAllowNull: k.setAllowNull,
        isAllowNull: k.isAllowNull,
        getTypeName: k.getTypeName,
        setTypeName: k.setTypeName,
        setEncoder: k.setEncoder,
        getEncoder: k.getEncoder,
        assertValid: k.assertValid,
        getValid: k.getValid,
        getValidInput: function (l, m) {
            return i(l, m)
        },
        getSafe: k.getSafe,
        sanitize: function (l, m) {
            var q = 0;
            try {
                q = i(l, m)
            } catch (p) {
            }
            return q
        },
        isValid: k.isValid,
        whitelist: k.whitelist
    }
};
$namespace("org.owasp.esapi.reference.validation");
org.owasp.esapi.reference.validation.StringValidationRule = function (g, l, a, p) {
    var q = new org.owasp.esapi.reference.validation.BaseValidationRule(g, l, a);
    var h = "String";
    var n = Array();
    var f = Array();
    var e = 0;
    var b = Number.MAX_VALUE;
    var m = true;
    if (p) {
        if (p instanceof String) {
            n.push(new RegExp(p))
        } else {
            if (p instanceof RegExp) {
                n.push(p)
            } else {
                throw new IllegalArgumentException("sWhiteListPattern must be a string containing RegExp or a RegExp Object")
            }
        }
    }
    var k = function (r, t, s) {
        n.each(function (u) {
            if (t.match(u)) {
                q.validationException(r, h, "Whitelist", {
                    context: r,
                    input: t,
                    orig: s,
                    pattern: u.toString(),
                    minLength: e,
                    maxLength: b,
                    validateInputAndCanonical: m
                })
            }
        })
    };
    var j = function (r, t, s) {
        f.each(function (u) {
            if (t.match(u)) {
                q.validationException(r, h, "Blacklist", {
                    context: r,
                    input: t,
                    orig: s,
                    pattern: u.toString(),
                    minLength: e,
                    maxLength: b,
                    validateInputAndCanonical: m
                })
            }
        })
    };
    var d = function (r, t, s) {
        if (t.length < e) {
            q.validationException(r, h, "MinLength", {
                context: r,
                input: t,
                orig: s,
                minLength: e,
                maxLength: b,
                validateInputAndCanonical: m
            })
        }
        if (t.length > b) {
            q.validationException(r, h, "MaxLength", {
                context: r,
                input: t,
                orig: s,
                minLength: e,
                maxLength: b,
                validateInputAndCanonical: m
            })
        }
        return t
    };
    var i = function (r, t, s) {
        if (!t || t.trim() == "") {
            if (q.isAllowNull()) {
                return null
            }
            q.validationException(r, h, "Required", {
                context: r,
                input: t,
                orig: s,
                minLength: e,
                maxLength: b,
                validateInputAndCanonical: m
            })
        }
    };
    return {
        addWhitelistPattern: function (r) {
            if (r instanceof String) {
                n.push(new RegExp(r))
            } else {
                if (r instanceof RegExp) {
                    n.push(r)
                } else {
                    throw new IllegalArgumentException("p must be a string containing RegExp or a RegExp Object")
                }
            }
        },
        addBlacklistPattern: function (r) {
            if (r instanceof String) {
                f.push(new RegExp(r))
            } else {
                if (r instanceof RegExp) {
                    f.push(r)
                } else {
                    throw new IllegalArgumentException("p must be a string containing RegExp or a RegExp Object")
                }
            }
        },
        setMinLength: function (r) {
            e = r
        },
        getMinLength: function () {
            return e
        },
        setMaxLength: function (r) {
            b = r
        },
        getMaxLength: function () {
            return b
        },
        setValidateInputAndCanonical: function (r) {
            m = r
        },
        isValidateInputAndCanonical: function () {
            return m
        },
        setAllowNull: q.setAllowNull,
        isAllowNull: q.isAllowNull,
        getTypeName: q.getTypeName,
        setTypeName: q.setTypeName,
        setEncoder: q.setEncoder,
        getEncoder: q.getEncoder,
        assertValid: q.assertValid,
        getValid: q.getValid,
        getValidInput: function (s, t) {
            var r = null;
            if (i(s, t) == null) {
                return null
            }
            if (m) {
                d(s, t);
                k(s, t);
                j(s, t)
            }
            r = this.getEncoder().cananicalize(t);
            if (i(s, r, t) == null) {
                return null
            }
            d(s, r, t);
            k(s, r, t);
            j(s, r, t);
            return r
        },
        getSafe: q.getSafe,
        sanitize: function (r, s) {
            return this.whitelist(s, org.owasp.esapi.EncoderConstants.CHAR_ALNUM)
        },
        isValid: q.isValid,
        whitelist: q.whitelist
    }
};
$namespace("org.owasp.esapi.reference.validation");
org.owasp.esapi.reference.validation.ValidationException = function (d, b) {
    var f, a;
    if (arguments[2] && arguments[2] instanceof Exception) {
        f = arguments[2];
        if (arguments[3] && arguments[3] instanceof String) {
            a = arguments[3]
        }
    } else {
        if (arguments[2] && arguments[2] instanceof String) {
            a = arguments[2]
        }
    }
    var e = new org.owasp.esapi.EnterpriseSecurityException(d, b, f);
    return {
        setContext: function (g) {
            a = g
        },
        getContext: function () {
            return a
        },
        getMessage: e.getMessage,
        getUserMessage: e.getMessage,
        getLogMessage: e.getLogMessage,
        getStackTrace: e.getStackTrace,
        printStackTrace: e.printStackTrace
    }
};
$namespace("Base.esapi.properties");
Base.esapi.properties = {
    application: {Name: "XSSEncode"},
    encoder: {Implementation: org.owasp.esapi.reference.encoding.DefaultEncoder, AllowMultipleEncoding: false}
};
ec.debug = false;
ol.load.define("jquery", [{mark: "jquery", uri: "userManager-js/jquery-1.4.4.min.js", type: "js"}]);
ol.load.define("jquery.form", ["jquery", {
    mark: "jquery.form",
    uri: "jquery.form-2.49.js",
    type: "js",
    charset: "utf-8",
    depend: true
}]);
ol.load.define("jquery.bgiframe", [{
    mark: "jquery.bgiframe",
    uri: "base/jquery.bgiframe.min.js",
    type: "js",
    charset: "utf-8",
    depend: true,
    loadType: "lazy"
}]);
ol.load.define("jquery.autocomplete", [{
    mark: "jquery.autocomplete",
    uri: "jquery.autocomplete/jquery.autocomplete.hack-min.js",
    type: "js",
    charset: "utf-8",
    depend: true
}]);
ol.load.define("My97DatePicker", [{
    mark: "My97DatePicker",
    uri: "My97DatePicker/WdatePicker.js",
    type: "js",
    charset: "utf-8",
    depend: false,
    onload: function () {
        WdatePicker()
    }
}]);
ol.load.define("jquery.movebar", [{uri: "jquery.movebar/movebar.min.js", type: "js"}]);
ol.load.define("ec.aes", [{uri: "aes/aes.js", type: "js", depend: true}, {
    uri: "aes/aesUtil.js",
    type: "js",
    depend: true
}, {uri: "aes/pbkdf2.js", type: "js", depend: true}]);
ol.load.define("ec.dh", [{uri: "dh/bigInt.min.js", type: "js", depend: true}]);
ol.load.define("ec.rc4", [{uri: "crypt/rc4.js", type: "js", depend: true}]);
ol.load.define("uploadify", ["jquery", "swfobject", {
    uri: "uploadify/jquery.uploadify.v2.1.4.min.js",
    type: "js",
    depend: true
}, {uri: "uploadify/uploadify.customize.css", type: "css"}]);
ol.load.define("ec.pager", ["jquery", {uri: "ec.pager/pager-min.js", type: "js", charset: "gbk", depend: true}]);
ol.load.define("ajax", ["jquery.form", {
    mark: "ajax",
    uri: "base/ajax.js",
    type: "js",
    charset: "utf-8",
    depend: true
}]);
ol.load.define("ajaxcdr", ["jquery.form", {
    mark: "ajaxcdr",
    uri: "base/ajaxcdr.js?20121031",
    type: "js",
    charset: "utf-8",
    depend: true
}]);
if ("object" === typeof ol.box || "function" === typeof ol.box) {
    ec.box = ol.box
} else {
    ol.load.define("ec.box", ["jquery", {
        mark: "jquery.bgiframe",
        uri: "base/jquery.bgiframe.min.js",
        type: "js",
        charset: "utf-8",
        depend: true,
        loadType: null
    }, {uri: "ec.box/box-min.js", type: "js", depend: true}])
}
ol.load.define("ec.tab", ["jquery", {uri: "ec.tab/tab-min.js", type: "js", charset: "utf-8", depend: true}]);
ol.load.define("jquery.float", ["jquery", {
    uri: "jquery.float/float.min.js",
    type: "js",
    charset: "gbk",
    depend: true
}]);
ol.load.define("cloud-zoom", [{uri: "cloud-zoom.1.0.2/cloud-zoom.1.0.2-hack-min.js", type: "js"}]);
ol.load.define("jqzoom", ["jquery", {
    uri: "jqzoom-2.3/js/jquery.jqzoom-core.js",
    type: "js",
    depend: true
}, {uri: "jqzoom-2.3/css/jquery.jqzoom.css", type: "css"}]);
ol.load.define("RaterStar", [{uri: "RaterStar/rater-star.js", type: "js"}]);
ol.load.define("ec.slider", [{uri: "ec.slider/slider-min.js", type: "js"}]);
ol.load.define("ec.linkSelect.region", ["jquery", {
    uri: "linkSelect/region-min.js?20161011",
    type: "js",
    charset: "utf-8",
    depend: true
}]);
ol.load.define("ec.md5", [{uri: "md5/md5-min.js", type: "js"}]);
ol.load.define("jquery.rotate", ["jquery", {uri: "jquery.rotate/jQueryRotate-min.js", type: "js"}]);
ol.load.define("jquery.fixed", ["jquery", {uri: "jquery.fixed/fixed.js", type: "js"}]);
if ("object" !== typeof ec.encodeForHTML && "function" !== typeof ec.encodeForHTML) {
    ol.load.define("ec.XSSUtils", [{
        uri: "/aes/XSSUtils.min.js",
        type: "js",
        charset: "utf-8",
        depend: true,
        loadType: null
    }, {
        uri: "/aes/esapi.js",
        type: "js",
        charset: "utf-8",
        depend: true,
        loadType: null
    }, {
        uri: "/aes/resources/Base.esapi.properties.min.js",
        type: "js",
        charset: "utf-8",
        depend: true,
        loadType: null
    }])
}
if (jQuery) {
    ol._setLoadStatus("jquery", "complete")
}
window["_gaq"] = window["_gaq"] || [];
_gaq.push(["_setAccount", ec.debug ? "" : "UA-28046633-2", "t1"]);
var _hmt = _hmt || [];
var _paq = _paq || [];
var _zpq = _zpq || [];
var bindBox;
window._bd_share_config = {};
ec.code = {
    addShare: function (options) {
        options = $.extend({jsUrl: scriptPath + "/static/api/js/share.js?v=89860593.js"}, options);
        window._bd_share_config = options;
        ec.ready(function () {
            with (document) (0)[(getElementsByTagName("head")[0] || body).appendChild(createElement("script")).src = options.jsUrl]
        })
    }, addAnalytics: function (options) {
        options = options || {
            google: true,
            cnzz: true,
            baidu: true,
            click99: true,
            hicloud: true,
            suning: true,
            operate: false,
            dmp: false
        };
        var filterList = ["/payment/alipay/returnURL", "/order/feedBack"], locationHref = location.href;
        for (var i = 0; i < filterList.length; i += 1) {
            if (locationHref.indexOf(filterList[i]) > 0) return
        }
        _gaq.push(["_trackPageview"]);
        _gaq.push(["_trackPageLoadTime"]);
        _gaq.push(["_addOrganic", "baidu", "word"]);
        _gaq.push(["_addOrganic", "baidu", "kw"]);
        _gaq.push(["_addOrganic", "opendata.baidu", "wd"]);
        _gaq.push(["_addOrganic", "zhidao.baidu", "word"]);
        _gaq.push(["_addOrganic", "news.baidu", "word"]);
        _gaq.push(["_addOrganic", "post.baidu", "kw"]);
        _gaq.push(["_addOrganic", "tieba.baidu", "kw"]);
        _gaq.push(["_addOrganic", "mp3.baidu", "word"]);
        _gaq.push(["_addOrganic", "image.baidu", "word"]);
        _gaq.push(["_addOrganic", "top.baidu", "word"]);
        _gaq.push(["_addOrganic", "news.google", "q"]);
        _gaq.push(["_addOrganic", "soso", "w"]);
        _gaq.push(["_addOrganic", "image.soso", "w"]);
        _gaq.push(["_addOrganic", "music.soso", "w"]);
        _gaq.push(["_addOrganic", "post.soso", "kw"]);
        _gaq.push(["_addOrganic", "wenwen.soso", "sp"]);
        _gaq.push(["_addOrganic", "post.soso", "kw"]);
        _gaq.push(["_addOrganic", "3721", "name"]);
        _gaq.push(["_addOrganic", "114", "kw"]);
        _gaq.push(["_addOrganic", "youdao", "q"]);
        _gaq.push(["_addOrganic", "vnet", "kw"]);
        _gaq.push(["_addOrganic", "sogou", "query"]);
        _gaq.push(["_addOrganic", "news.sogou", "query"]);
        _gaq.push(["_addOrganic", "mp3.sogou", "query"]);
        _gaq.push(["_addOrganic", "pic.sogou", "query"]);
        _gaq.push(["_addOrganic", "blogsearch.sogou", "query"]);
        _gaq.push(["_addOrganic", "gougou", "search"]);
        var honor3 = locationHref.indexOf("/product/678.html") > 0 ? true : false;
        _zpq.push(["_setPageID", !honor3 ? "100" : "101"]);
        _zpq.push(["_setPageType", !honor3 ? "home" : "honor3"]);
        _zpq.push(["_setParams", ""]);
        _zpq.push(["_setAccount", "95"]);
        if (options.google) ec.load({url: "https://www.google-analytics.com/ga.js", type: "js", loadType: "lazy"});
        if (options.baidu) ec.load({
            url: "https://hm.baidu.com/h.js?a08b68724dd89d23017170634e85acd8",
            type: "js",
            loadType: "lazy"
        });
        if (options.cnzz) ec.load({
            url: "https://s95.cnzz.com/stat.php?id=4754392&web_id=4754392",
            type: "js",
            loadType: "lazy"
        });
        if (options.suning) ec.load({url: "https://cdn.zampda.net/s.js", type: "js", loadType: "lazy"});
        if (options.hicloud) {
            _paq.push(["setTrackerUrl", "https://metrics-drcn.dt.hicloud.com:6447/webv1"]);
            var orderCode = (ec.order && ec.order.orderCode ? ec.order.orderCode : "") + "";
            _paq.push(["setSiteId", "www.vmall.com"]);
            _paq.push(["setCustomVariable", 1, "cid", ec.util.cookie.get("cps_id") || "", "page"]);
            _paq.push(["setCustomVariable", 2, "direct", ec.util.cookie.get("cps_direct") || "", "page"]);
            _paq.push(["setCustomVariable", 3, "orderid", orderCode, "page"]);
            _paq.push(["setCustomVariable", 4, "wi", ec.util.cookie.get("cps_wi") || "", "page"]);
            _paq.push(["setCustomVariable", 1, "uid", (ec.util.cookie.get("uid") ? ec.util.cookie.get("uid") : "") || "", "visit"]);
            _paq.push(["setCustomVariable", 10, "uid", (ec.util.cookie.get("uid") ? ec.util.cookie.get("uid") : "") || "", "visit"]);
            _paq.push(["trackPageView"]);
            ec.load({url: "https://res.vmallres.com/bi/hianalytics.js", type: "js", loadType: "lazy"});
            ec.util.cookie.set("cps_direct", null, {expires: -1, domain: "vmall.com"})
        }
        if (options.operate) {
            _paq.push(["setTrackerUrl", "https://metrics-drcn.dt.hicloud.com:6447/webv1"]);
            var orderCode = (ec.order && ec.order.orderCode ? ec.order.orderCode : "") + "";
            _paq.push(["setSiteId", "www.vmall.com"]);
            _paq.push(["setCustomVariable", 1, "cid", ec.util.cookie.get("cps_id") || "", "page"]);
            _paq.push(["setCustomVariable", 2, "direct", ec.util.cookie.get("cps_direct") || "", "page"]);
            _paq.push(["setCustomVariable", 3, "orderid", orderCode, "page"]);
            _paq.push(["setCustomVariable", 4, "wi", ec.util.cookie.get("cps_wi") || "", "page"]);
            _paq.push(["setCustomVariable", 1, "uid", (ec.util.cookie.get("uid") ? ec.util.cookie.get("uid") : "") || "", "visit"]);
            _paq.push(["setCustomVariable", 10, "uid", (ec.util.cookie.get("uid") ? ec.util.cookie.get("uid") : "") || "", "visit"]);
            var operData = "";
            operData = ec.code.convertFormat(options.optype, options.skuIds, options.bundleIds, options.custSkuIds, options.custBundleIds);
            _paq.push(["setCustomVariable", 10, "cart", operData, "page"]);
            _paq.push(["trackGoal", 1])
        }
        if (options.dmp) {
            ec.load({url: "https://nebula-collector.huawei.com/api/2.0/vmallcn-min.js", type: "js", loadType: "lazy"})
        }
    }
};
ec.code.convertFormat = function (optype, skuIds, bundleIds, custSkuIds, custBundleIds) {
    var _result = "";
    var _skuIds = [];
    var _bundleIds = [];
    var _custSkuIds = [];
    var _custBundleIds = [];
    if (ec.util.isArray(skuIds)) {
        _skuIds = $.map(skuIds, function (ele) {
            return "1_" + ele
        })
    }
    if (ec.util.isArray(bundleIds)) {
        _bundleIds = $.map(bundleIds, function (ele) {
            return "0_" + ele
        })
    }
    if (ec.util.isArray(custSkuIds)) {
        _custSkuIds = $.map(custSkuIds, function (ele) {
            return "3_" + ele
        })
    }
    if (ec.util.isArray(custBundleIds)) {
        _custBundleIds = $.map(custBundleIds, function (ele) {
            return "2_" + ele
        })
    }
    _skuIds = _bundleIds.concat(_skuIds, _custBundleIds, _custSkuIds);
    _result = optype + "," + _skuIds.join(":");
    return _result
};
ec.code.saveCIDInfoToCookie = function () {
    var referrer = document.referrer;
    var cps_id_array = ["https://www.baidu.com/=93436", "https://m.baidu.com/=93437", "https://www.sogou.com/=93438", "https://m.sogou.com/=93439", "https://m.so.com/=93441", "https://www.so.com/=93440", "https://yz.m.sm.cn/=93442", "https://www.google.com/=93444", "https://www.google.com.sg/=93443", "https://cn.bing.com/=93445"];
    if (referrer) {
        var index = referrer.indexOf("/", 8);
        var prev_cps_id = ec.util.cookie.get("cps_id");
        if (index == -1) {
            var domain = referrer
        } else {
            var domain = referrer.substr(0, index + 1)
        }
        $.each(cps_id_array, function (index, item) {
            if (item.indexOf(domain) == 0) {
                var cid = item.split("=")[1];
                ec.util.cookie.set("cps_id", cid, {expires: 1, domain: "vmall.com"});
                return
            }
        })
    }
};
ec.code.saveCpsInfoToCookie = function () {
    var cid = ec.code.getCPSInfoFromUrlRegex(location.href, "cid");
    var wi = ec.code.getCPSInfoFromUrlRegex(location.href, "wi");
    if ($.trim(cid) == "" || cid.length < 0 || cid.lenght > 11) {
        ec.code.saveCIDInfoToCookie();
        return
    }
    var regText = /^\d+$/;
    if (!regText.test(cid)) {
        return
    }
    ec.util.cookie.set("cps_wi", null, {expires: -1, domain: "vmall.com"});
    ec.util.cookie.set("cps_id", cid, {expires: 1, domain: "vmall.com"});
    ec.util.cookie.set("cps_direct", "1", {expires: 1, domain: "vmall.com"});
    ec.util.cookie.set("cps_dap_redirect", "1", {expires: 1, domain: "vmall.com"});
    if (wi.length > 0 && wi.length < 200) {
        ec.util.cookie.set("cps_wi", wi, {expires: 1, domain: "vmall.com"})
    }
};
ec.code.getCPSInfoFromUrlRegex = function (url, name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
    var url = window.location.href;
    var params;
    if (url.indexOf("#") != -1) {
        params = url.substr(url.indexOf("#"))
    } else {
        params = window.location.search
    }
    var result = params.substr(1).match(reg);
    if (result != null) return unescape(result[2]);
    return ""
};
ec.code.getCPSInfoFromUrl = function (url, name) {
    if (url.indexOf("#") == -1 || url.indexOf(name + "=") == -1) {
        return ""
    }
    var queryString = url.substring(url.indexOf("#") + 1);
    var parmSegments = queryString.split("#");
    for (var i = 0; i < parmSegments.length; i++) {
        var tempStr = parmSegments[i];
        var parameters = tempStr.split("&");
        var pos, paraName, paraValue;
        for (var j = 0; j < parameters.length; j++) {
            pos = parameters[j].indexOf("=");
            if (pos == -1) {
                continue
            }
            paraName = parameters[j].substring(0, pos);
            paraValue = parameters[j].substring(pos + 1);
            if (paraName == name) {
                return unescape(paraValue.replace(/\+/g, " "))
            }
        }
    }
    return ""
};
ec.code.addService = function (options) {
    ec.load("jquery.float", {
        loadType: "lazy", callback: function () {
            if (options.showService) {
                var url = window.location.href;
                var index = url.indexOf("/product/");
                var urlInfo = "";
                var memo = "";
                if (index > 0) {
                    urlInfo = url.substring(index + 9, url.length);
                    if (urlInfo.length > 1) {
                        var prdInfo = urlInfo.split(".html", 2);
                        if (prdInfo.length > 1) {
                            memo = prdInfo[0];
                            var hash = prdInfo[1];
                            if (hash.indexOf("#") >= 0) {
                                var skuInfo = hash.split("#", 2)[1];
                                var skuId = skuInfo.length > 0 ? skuInfo.split(",", 2)[0] || 0 : 0;
                                if (skuId != 0) {
                                    memo = memo + "," + skuId
                                }
                            }
                        }
                    }
                }
                $("#tools-nav-service-robotim").attr("href", options.live800Url4Web + "&enterurl=" + encodeURIComponent(window.location.href) + "&k=1&remark=" + encodeURIComponent(memo)).css("display", "block");
                $("#tools-nav-service-robotim-button").attr("href", options.live800Url4Web + "&enterurl=" + encodeURIComponent(window.location.href) + "&k=1&remark=" + encodeURIComponent(memo)).css("display", "block")
            }
            if (options.showTools) {
                $("#tools-nav-survery").css("display", "block")
            }
            if (options.showService || options.showTools) {
                $("#tools-nav").css("bottom", "10px").show()
            }
        }
    })
};
(function () {
    ec.code.saveCpsInfoToCookie();
    var _tracker, getTracker = function () {
        if (_tracker) return _tracker;
        _tracker = _gat._createTracker(ec.debug ? "" : "UA-28046633-3", "t2");
        return _tracker
    };
    ec.track = function (path, retryTime) {
        retryTime = retryTime || 3;
        try {
            if (window._gat && window._gat._createTracker) {
                if ("[object Array]" == Object.prototype.toString.apply(path)) {
                    path = path.join("/")
                }
                getTracker()._trackPageview(path);
                log("Track", path)
            } else {
                if (retryTime > 0) {
                    setTimeout(function () {
                        ec.track(path, retryTime - 1)
                    }, 1e3)
                }
            }
        } catch (c) {
            throw c
        }
    };
    ec.trackEvent = function (category, action, optional_label, optional_value, retryTime) {
        retryTime = retryTime || 3;
        try {
            if (window._gat && window._gat._createTracker) {
                getTracker()._trackEvent(category, action, optional_label, optional_value);
                log("TrackEvent", category + " : " + action)
            } else {
                if (retryTime > 0) {
                    setTimeout(function () {
                        ec.trackEvent(category, action, optional_label, optional_value, retryTime - 1)
                    }, 1e3)
                }
            }
        } catch (c) {
            throw c
        }
    }
})();
(function () {
    var source = ec.util.cookie.get("cps_source"), channel = ec.util.cookie.get("cps_channel"),
        direct = ec.util.cookie.get("cps_direct");
    ec.trackCPS = function (action, optional_value) {
        if (source && channel) ec.track(["/cps/event", action, source + "/" + channel, optional_value])
    };
    if (source && channel && direct) {
        ec.ready(function () {
            ec.track("/cps/pv/" + source + "/" + channel + location.pathname)
        })
    }
})();
ec.track99click = function (options) {
    var _ozprm;
    if (typeof options == "string") {
        _ozprm = options
    } else {
        var array = [], v;
        for (var s in options) {
            v = options[s];
            array.push(s + "=" + (ec.util.isArray(v) ? v.join(";") : v))
        }
        _ozprm = array.join("&")
    }
    ec.track99click._ozuid = ec.account.id;
    ec.track99click._ozprm = _ozprm
};
ec.pkg("ec.binding");
ec.binding.login = function () {
    var optBanding = ec.util.cookie.get("optBanding");
    if (optBanding == 0) {
        $.ajax({
            url: domainMain + "/account/isBindedTelephoneOrEmail.json",
            type: "get",
            dataType: "json",
            success: function (json) {
                if (!json.isLogin) {
                    return false
                }
                ec.util.cookie.set("optBanding", 1);
                if (!json.success) {
                    ec.load("ec.box", function () {
                        ec.binding.requestUrl = domainMain + "/account/isBindedTelephoneOrEmail.json?t=" + (new Date).getTime();
                        ec.binding.upCenterUrl = json.upUserCenter;
                        ec.Cache.get("ecBindingPhone", function () {
                            return new ec.box($("#ec-binding-phone").val(), {
                                boxid: "bindingBox",
                                boxclass: "ol_box_4",
                                showButton: false,
                                onopen: function (box) {
                                    ec.ui.loading.hide();
                                    $("#ec-binding-phone-1").show();
                                    $("#ec-binding-phone-url-1").attr("href", ec.binding.upCenterUrl);
                                    box.setPosition()
                                }
                            })
                        }).open()
                    })
                }
            }
        })
    }
};
ec.binding.cart = function (toCallback) {
    ec.binding.callback = toCallback;
    if (toCallback) {
        ec.ui.loading.show()
    }
    $.ajax({
        url: domainMain + "/account/isBindedTelephoneOrEmailDomain.json?callback=?&t=" + (new Date).getTime(),
        async: false,
        dataType: "jsonp",
        jsonp: "callback",
        timeout: "60000",
        success: function (json) {
            if (!json.isLogin) {
                if (toCallback) {
                    toCallback()
                }
                return
            }
            ec.util.cookie.set("optBanding", 1);
            if (!json.success) {
                ec.load("ec.box", function () {
                    ec.binding.requestUrl = domainMain + "/account/isBindedTelephoneOrEmailDomain.json?callback=?&t=" + (new Date).getTime();
                    ec.binding.upCenterUrl = json.upUserCenter;
                    ec.Cache.get("ecBindingPhone", function () {
                        return new ec.box($("#ec-binding-phone").val(), {
                            boxid: "bindingBox",
                            boxclass: "ol_box_4",
                            showButton: false,
                            onopen: function (box) {
                                ec.ui.loading.hide();
                                $("#ec-binding-phone-1").show();
                                $("#ec-binding-phone-url-1").attr("href", ec.binding.upCenterUrl);
                                box.setPosition()
                            }
                        })
                    }).open()
                })
            } else {
                if (toCallback) {
                    toCallback()
                }
            }
        }
    })
};
ec.binding.cart.withPhone = function (toCallback) {
    ec.binding.callback = toCallback;
    if (toCallback) {
        ec.ui.loading.show()
    }
    $.ajax({
        url: domainMain + "/account/isBindedPhoneCrossDomain.json?callback=?&t=" + (new Date).getTime(),
        async: false,
        dataType: "jsonp",
        jsonp: "callback",
        timeout: "60000",
        success: function (json) {
            if (!json.isLogin) {
                if (toCallback) {
                    toCallback()
                }
                return
            }
            ec.util.cookie.set("optBanding", 1);
            if (!json.success) {
                ec.load("ec.box", function () {
                    ec.binding.requestUrl = domainMain + "/account/isBindedPhoneCrossDomain.json?callback=?&t=" + (new Date).getTime();
                    var localHref = window.location.href;
                    localHref = localHref.replace(/\\?isSuccess=0/g, "");
                    ec.binding.upCenterUrl = json.upUserCenter + "&redirect_uri=" + localHref;
                    ec.binding.upCenterUrl = encodeURI(ec.binding.upCenterUrl);
                    var state = json.state;
                    if (null == state) {
                        alert("");
                        return
                    }
                    if (state == 4) {
                        bindBox = new ec.box($("#ec-binding-phone").val(), {
                            boxid: "bindingBox",
                            boxclass: "ol_box_4",
                            showButton: false,
                            onopen: function (box) {
                                ec.ui.loading.hide();
                                $("#ec-binding-phone-" + state).show();
                                $("#bindEndDate4State4").html(json.upBindEndDate);
                                if (state == 1 || state == 4) {
                                    $("#ec-binding-phone-url-" + state).attr("href", ec.binding.upCenterUrl)
                                }
                                box.setPosition()
                            },
                            onclose: function (box) {
                                if (toCallback) {
                                    toCallback()
                                }
                            }
                        });
                        bindBox.open()
                    } else {
                        bindBox = new ec.box($("#ec-binding-phone").val(), {
                            boxid: "bindingBox",
                            boxclass: "ol_box_4",
                            showButton: false,
                            onopen: function (box) {
                                ec.ui.loading.hide();
                                $("#ec-binding-phone-" + state).show();
                                if (state == 1) {
                                    $("#ec-binding-phone-url-1").attr("href", ec.binding.upCenterUrl)
                                }
                                box.setPosition()
                            }
                        });
                        bindBox.open()
                    }
                })
            } else {
                if (toCallback) {
                    toCallback()
                }
            }
        }
    })
};
ec.binding.isBindedMobileOrEnterpriseUser = function (toCallback) {
    ec.binding.callback = toCallback;
    ec.ui.loading.show();
    $.ajax({
        url: domainMain + "/account/isBindedTelephoneOrEmail.json",
        type: "get",
        dataType: "json",
        success: function (json) {
            if (!json.isLogin) {
                if (toCallback) {
                    toCallback()
                }
                return
            }
            if (!json.success) {
                ec.load("ec.box", function () {
                    ec.binding.requestUrl = domainMain + "/account/isBindedTelephoneOrEmail.json?t=" + (new Date).getTime();
                    ec.binding.upCenterUrl = json.upUserCenter;
                    ec.Cache.get("ecBindingPhone", function () {
                        return new ec.box($("#ec-binding-phone").val(), {
                            boxid: "bindingBox",
                            boxclass: "ol_box_4",
                            showButton: false,
                            onopen: function (box) {
                                ec.ui.loading.hide();
                                $("#ec-binding-phone-1").show();
                                $("#ec-binding-phone-url-1").attr("href", ec.binding.upCenterUrl);
                                box.setPosition()
                            }
                        })
                    }).open()
                })
            } else {
                if (toCallback) {
                    toCallback()
                }
            }
        }
    })
};
ec.binding.closeState4 = function () {
    if (null != bindBox) {
        bindBox.close()
    }
};
ec.binding.showOk = function () {
    $(".ec-binding-phone-box").hide();
    $("#ec-binding-phone-2").show();
    $("#ec-binding-phone-url-2").attr("href", ec.binding.upCenterUrl);
    $("#ec-binding-phone-url-3").attr("href", ec.binding.upCenterUrl);
    bindBox.setPosition()
};
ec.binding.resetShow = function () {
    var _callBack = ec.binding.callback;
    var isJsonPRequest = window.location.href.match(/\/cart\/cart\.html/g);
    var opts = {
        url: ec.binding.requestUrl, type: "get", async: "false", dataType: "json", success: function (json) {
            if (!json.success) {
                $("#ec-binding-phone-2").hide();
                $("#ec-binding-phone-3").show();
                ec.Cache.get("ecBindingPhone").setPosition()
            } else {
                ec.Cache.get("ecBindingPhone").close();
                if (_callBack) {
                    _callBack();
                    _callBack = null
                }
            }
        }
    };
    if (isJsonPRequest) {
        opts.dataType = "jsonp";
        opts.jsonp = "callback";
        opts.timeout = "60000"
    }
    $.ajax(opts)
};
ec.binding.allCount = function () {
    var allCountWechat = ec.util.cookie.get("vmallOrderCountWechat");
    if (allCountWechat == 0) {
        $("#li-order-small span").html("")
    }
    if (allCountWechat > 0) {
        $("#li-order-small span").html("<em>(" + allCountWechat + ")</em>")
    }
    var allCount = ec.util.cookie.get("vmallOrderCount");
    if (allCount == 0) {
        $("#li-order span").html("")
    } else if (allCount > 0) {
        $("#li-order span").html("<em>(" + allCount + ")</em>")
    } else {
        $("#li-order span").html("<em class='hide'>(0)</em>");
        $.ajax({
            type: "get",
            url: domainMain + "/member/orderCount.json?t=" + (new Date).getTime(),
            dataType: "json",
            async: true,
            timeout: 1e4,
            success: function (json) {
                if (!json.success) {
                    return
                }
                var jsonCount = parseInt(json.orderCount.unpaidOrderCount) + parseInt(json.orderCount.unreceiptOrderCount);
                jsonCount = jsonCount ? jsonCount : 0;
                var strOldNum = $("#li-order span em").text();
                var oldNum = strOldNum.substring(1, strOldNum.length - 1);
                jsonCount = jsonCount + parseInt(oldNum);
                $("#li-order span em").text("(" + jsonCount + ")");
                $("#li-order span em").removeClass("hide");
                ec.util.cookie.set("vmallOrderCount", jsonCount);
                $("#li-order-small span").html("<em class='hide'>(0)</em>");
                var jsonCount6 = parseInt(json.orderCount.unpaidOrderCountWechat) + parseInt(json.orderCount.unreceiptOrderCountWechat);
                jsonCount6 = jsonCount6 ? jsonCount6 : 0;
                var strOldNum6 = $("#li-order-small span em").text();
                var oldNum6 = strOldNum6.substring(1, strOldNum6.length - 1);
                jsonCount6 = jsonCount6 + parseInt(oldNum6);
                $("#li-order-small span em").text("(" + jsonCount6 + ")");
                $("#li-order-small span em").removeClass("hide");
                ec.util.cookie.set("vmallOrderCountWechat", jsonCount6)
            }
        });
        $.ajax({
            type: "POST",
            url: openApiDomain + "/rms/comment/getNoCommentPrdCount.json?t=" + (new Date).getTime(),
            dataType: "json",
            timeout: 1e4,
            async: true,
            data: JSON.stringify({tab: "nocomment"}),
            beforeSend: function (xhr) {
                xhr.withCredentials = true
            },
            success: function (_json) {
                if (_json.resultCode != 0) {
                    return
                }
                var jsonCount = parseInt(_json.data.count);
                jsonCount = jsonCount ? jsonCount : 0;
                var str_oldNum = $("#li-order span em").text();
                var old_Num = str_oldNum.substring(1, str_oldNum.length - 1);
                jsonCount = jsonCount + parseInt(old_Num);
                if (jsonCount > 0) {
                    $("#li-order span em").text("(" + jsonCount + ")");
                    $("#li-order span em").removeClass("hide")
                } else {
                    $("#li-order span").text("")
                }
                ec.util.cookie.set("vmallOrderCount", jsonCount)
            }
        })
    }
};
ec.binding.getUnReadMessageCount = function () {
    var myCenterMsg = ec.util.cookie.get("vmallMyCenterMsg");
    if (myCenterMsg != null && myCenterMsg > 0) {
        $("#li-msg em").text("(" + myCenterMsg + ")")
    } else {
        $.ajax({
            url: "/member/msg/unRead.json", timeout: 1e4, dataType: "json", success: function (json) {
                if (!json.success) {
                    return
                }
                var msgcount = json.count;
                if (msgcount > 0) {
                    $("#li-msg em").text("(" + msgcount + ")")
                }
                ec.util.cookie.set("vmallMyCenterMsg", msgcount)
            }
        })
    }
};
bindCartResult = function (boxId) {
    var localHref = window.location.href;
    localHref = localHref.replace(/\?isSuccess=0/g, "").replace(/&isSuccess=0/g, "");
    var upaddr = upBindPhoneAddr.replace(/&amp;/g, "&");
    ec.load("ec.box", function () {
        bindBox = new ec.box($("#" + boxId).val(), {
            boxid: "bindingBox",
            boxclass: "ol_box_4",
            showButton: false,
            onopen: function (box) {
                ec.ui.loading.hide();
                $("#ec-binding-phone-1").hide();
                $("#ec-binding-phone-2").hide();
                $("#ec-binding-phone-3").hide();
                $("#ec-binding-phone-4").hide();
                $("#ec-binding-phone-5").show();
                $("#ec-binding-phone-url-5").attr("href", upaddr + "&redirect_uri=" + localHref);
                var reLoginUrl = domainMain + "/member/cartBind/result/logout?url=" + $("#ec-binding-phone-reLogin-5").attr("href") + "?url=" + localHref;
                $("#ec-binding-phone-reLogin-5").attr("href", encodeURI(reLoginUrl));
                box.setPosition()
            }
        });
        bindBox.open()
    })
};
getUrlParaMap4CartBinding = function () {
    var query = decodeURIComponent(window.location.search);
    var paras = {};
    if (query) {
        var p;
        query = query.substring(1).split("&");
        for (var i = 0; i < query.length; i++) {
            p = query[i].split("=");
            if (p.length == 2) paras[p[0]] = p[1].escapeHTML4CartBinding()
        }
    }
    return paras
};
String.prototype.escapeHTML4CartBinding = function () {
    return this.replace(/&/g, "&amp;").replace(/>/g, "&gt;").replace(/</g, "&lt;").replace(/"/g, "&quot;")
};
ec.ready(function () {
    ec.binding.getUnReadMessageCount();
    if (window.location.href.match(/\/cart\/cart\.html/g)) {
        ec.binding.cart();
        return
    }
    ec.binding.login();
    if (window.location.href.match(/\/member/g) && !window.location.href.match(/\/member\/order/g) || window.location.href.match(/\/member\/order-/g) || window.location.href.match(/\/authmember/g)) {
        ec.binding.allCount();
        return
    }
});
ec.pkg("ec.account");
ec.load("jquery.autocomplete", {
    loadType: "lazy", callback: function () {
        $("#search-kw").autocomplete({serviceUrl: "/search_keywords", minChars: 1, maxHeight: 400, deferRequestBy: 100})
    }
});
ec.load("ec.box");
ec.load("ec.XSSUtils");
ec.account.customerInfo = function () {
    this.zmPoint = null;
    this.empiricalValue = null
};
var g_pointBlance = 0;
var g_couponCount = 0;
var g_balanceAmount = 0;
var g_newMsgCount = 0;
var g_totalPoint = 0;
var minCartNum = 0;
window.gid = function (id) {
    return document.getElementById(id)
};
ec.account.isLogin = function () {
    ec.account.id = ec.util.cookie.get("uid");
    ec.account.loginName = ec.util.cookie.get("ac_loNa");
    return ec.account.id && ec.account.loginName
};
ec.account.syncCustomSession = function (callback) {
    (new ec.ajax).get({
        async: false,
        url: "/account/syncEmailAndMobile.json",
        dataType: "json",
        timeout: 1e4,
        successFunction: function (json) {
            if (callback && callback != undefined) {
                callback(json)
            }
            return
        },
        timeoutFunction: function () {
            return
        },
        errorFunction: function () {
            return
        }
    })
};
ec.account.getStatus = function (callback) {
    $.ajax({
        url: domainAccount + "/status.json?t=" + (new Date).getTime(),
        dataType: "json",
        timeout: 1e4,
        jsonop: "callback",
        type: "get",
        success: function (result) {
            if (result && result.id > 0) {
                ec.account.id = result.id;
                ec.account.uid = result.uid;
                ec.account.name = result.name;
                ec.account.nickName = result.nickName;
                ec.account.displayName = result.displayName;
                ec.account.loginName = result.loginName;
                ec.account.email = result.email;
                ec.account.mobile = result.mobile;
                ec.account.isQueue = result.isQueue;
                ec.account.custGrade = result.custGrade;
                ec.account.custPrivilege = result.custPrivilege;
                ec.account.custPoint = result.custPoint;
                ec.account.userState = result.userState;
                ec.account.isAuthCust = result.isAuthCust;
                var isFirst = ec.util.cookie.get("ifl_v");
                if (isFirst == "1") {
                    $.ajax({url: "/account/load", type: "POST"})
                }
            }
            callback()
        }
    })
};
ec.account.getAccountStatus = function (userId, callback, isLazy) {
    if (userId) {
        if (isLazy) {
            ec.load({url: domainMain + "/account/status?" + (new Date).getTime(), type: "js", onload: callback})
        } else {
            ec.load({
                url: domainMain + "/account/status?" + (new Date).getTime(),
                type: "js",
                loadType: "lazy",
                onload: callback
            })
        }
    }
};
ec.account.getLoginInfo = function (callback, isLazy) {
    var loginInfo = ec.util.cookie.get("ac_li");
    var userId = ec.util.cookie.get("uid");
    var isValCas = ec.util.cookie.get("isValCas");
    try {
        if (userId && isValCas && "false" == isValCas) {
            ec.account.id = ec.util.cookie.get("uid");
            ec.account.uid = ec.util.cookie.get("uid");
            ec.account.name = ec.util.cookie.get("user");
            ec.account.nickName = ec.util.cookie.get("name");
            ec.account.displayName = ec.util.cookie.get("displayName");
            ec.account.loginName = ec.util.cookie.get("user");
            ec.account.isValCas = "false";
            $.ajax({url: "/account/load?uid=" + userId, async: false, type: "POST"});
            ec.account.getAccountStatus(userId, callback, isLazy);
            ec.account.isValCas = ec.util.cookie.get("isValCas");
            callback();
            return
        }
        if (loginInfo && userId) {
            ec.account.id = ec.util.cookie.get("uid");
            ec.account.uid = ec.util.cookie.get("uid");
            ec.account.name = ec.util.cookie.get("user");
            ec.account.nickName = ec.util.cookie.get("name");
            ec.account.displayName = ec.util.cookie.get("displayName");
            ec.account.loginName = ec.util.cookie.get("ac_loNa");
            ec.account.email = ec.util.cookie.get("ac_lel");
            ec.account.mobile = ec.util.cookie.get("ac_lmi");
            ec.account.isQueue = ec.util.cookie.get("ac_liq");
            ec.account.custGrade = ec.util.cookie.get("ac_lgc");
            ec.account.custPrivilege = ec.util.cookie.get("ac_cp");
            ec.account.custPoint = ec.util.cookie.get("ac_ltp");
            ec.account.userState = ec.util.cookie.get("ac_lus");
            callback();
            return
        }
    } catch (e) {
    }
    ec.account.getAccountStatus(userId, callback, isLazy)
};
ec.account.confirmSaleConfig = function () {
    var flag = $("#checkSaleConfig").attr("checked") ? "1" : "0";
    (new ec.ajax).get({
        url: "/saleinfo/setSaleInfoRcvCfg.json?send_sms=" + flag + "&send_email=" + flag + "&t=" + (new Date).getTime(),
        async: true,
        timeout: 1e4,
        successFunction: function (json) {
            if (!json.success) {
                return
            }
            ec.util.cookie.set("isFirstLogin", "0", {domain: "vmall.com", path: "/"});
            window.location.href = json.href
        },
        timeoutFunction: function () {
            return
        },
        errorFunction: function () {
            return
        }
    })
};
ec.account.displaySaleConfig = function () {
    var isFirstLogin = ec.util.cookie.get("isFirstLogin");
    if (isFirstLogin && isFirstLogin == "1") {
        var html = [];
        html.push('      <div class="box-prompt-success-area">');
        html.push('         <div class="h">');
        html.push('             <img src="' + imagePath + '/echannel/sprites/sprites33.png" alt="">');
        html.push("         </div>");
        html.push('        <div class="b pdb-16">');
        html.push('            <label class="vat"><input id="checkSaleConfig" class="vam" type="checkbox"  />&nbsp;&nbsp;<p class="f12 inline-block vam"></p></label>&nbsp;&nbsp;<a href="/help/faq-2635.html" target="_blank" class="vam f12"></a>');
        html.push("        </div>");
        html.push("     </div>");
        html.push('    <div class="box-button">');
        html.push('       <a onclick="ec.account.confirmSaleConfig()"  class="box-cancel"><span></span></a>');
        html.push("    </div>");
        var box = new ec.box(html.join(" "), {
            boxid: "ec_sale_config",
            boxclass: "ol_box_4",
            title: "",
            remember: false,
            showButton: false
        });
        box.open()
    }
};
ec.account.getZMInfo = function () {
    $.ajax({
        url: domainUc + "/zm/queryZM.json", dataType: "jsonp", timeout: 1e4, timeoutFunction: function () {
            alert("")
        }, success: function (json) {
            if (json.resultCode == "200" && json.userZMInfoVO) {
                if (json.userZMInfoVO.certifyStatus == 1) {
                    $("#zhimaPoint").html(json.userZMInfoVO.creditScore);
                    ec.account.customerInfo.zmPoint = json.userZMInfoVO.creditScore
                }
            }
        }
    })
};
ec.account.showEnterpriseUserNav = function () {
    var isEnterpriseUser = ec.util.cookie.get("isEnterpriseUser");
    if (isEnterpriseUser && "false" !== isEnterpriseUser) {
        $("#preferential").html('<a href="' + domainMain + '/member/enterprise" rel="nofollow"></a>').show();
        $("#li-enterprise-preferential").html('<a href="' + domainMain + "/member/enterprise\" onclick=\"pushHeaderMsg('','" + domainMain + "/member/enterprise')\"><span></span></a>").show();
        $("#li-enterprise").html('<a href="' + domainMain + '/member/enterprise"><span></span></a>').show()
    }
    var companyUser = ec.util.cookie.get("companyUser");
    if (companyUser && "false" !== companyUser) {
        $("#li-companyUserInfo").html('<a href="/member/company/info" ><span></span></a>');
        $("#li-companyOrder").html('<a href="/member/company/intend" ><span></span></a>');
        $("#li-companyOrderList").html('<a href="/member/company/order" ><span></span></a>');
        $("#li-companyQues").html('<a href="/member/company/question" ><span></span></a>');
        $("#li-company").show()
    }
};
ec.account.getAccountInfo = function (callback) {
    ec.account.showEnterpriseUserNav();
    $.ajax({
        url: domainMain + "/member/accountInfo.json", dataType: "json", timeout: 1e4, timeoutFunction: function () {
            alert("")
        }, success: function (json) {
            if (json && json.enterpriseUser) {
                ec.util.cookie.set("isEnterpriseUser", "true", {domain: "vmall.com"});
                ec.account.showEnterpriseUserNav()
            }
            if (!json.success && json.code == "login") {
                var e = {domain: "vmall.com"};
                ec.account.id = ec.util.cookie.set("uid", null, e);
                ec.account.loginName = ec.util.cookie.set("user", null, e);
                $("#unlogin_status").show();
                $("#top_login").removeClass().addClass("header-toolbar hide");
                $("#top_unlogin").removeClass().addClass("header-toolbar");
                $("#gg_login").removeClass().addClass("i-mall-prompt clearfix hide");
                $("#gg_unlogin").removeClass().addClass("i-mall-prompt clearfix");
                $("#privilege_is_login").removeClass().addClass("privilege-user privilege-user-gray");
                $(".privilege-user-login").show();
                $("#personal_privilege").hide();
                $(".user-canvas").removeClass().addClass("user-canvas hide");
                $(".user-canvas").removeAttr("style");
                $("#privilege-user-img").find("img").attr("src", "images/echannel/misc/img_not_logged_in.png");
                $("#balanceicon_privilege").html("--");
                $("#couponicon_privilege").html("--");
                $("#balanceAmount_privilege").html("--");
                $("#header-cart-total").html(0);
                $(".business-user-info").hide();
                $(".business-user-bottom").find(".business-user-num").hide();
                $(".business-user").addClass("business-user-gray");
                $("#userImgID").find("img").attr("src", "/images/echannel/misc/img88_black.jpg");
                $("#loginUserInfoId").show();
                $(".business-user-bottom").find(".business-user-explain").show();
                return
            }
            callback(json)
        }
    })
};
ec.account.queryEnterpriseFlag = function () {
    var enterpriseUserCookie = ec.util.cookie.get("enterpriseUserCookie");
    if (null == enterpriseUserCookie || enterpriseUserCookie == "") {
        $.ajax({
            url: domainMain + "/member/queryEnterpriseFlag.json",
            dataType: "json",
            timeout: 1e4,
            timeoutFunction: function () {
                alert("")
            },
            success: function (json) {
                if (json.enterpriseUser) {
                    $("#preferential").html('<a href="' + domainMain + '/member/enterprise" rel="nofollow"></a>').show();
                    $("#li-enterprise-preferential").html('<a href="' + domainMain + '/member/enterprise"><span></span></a>').show();
                    $("#li-enterprise").html('<a href="' + domainMain + '/member/enterprise"><span></span></a>').show()
                } else {
                    $("#preferential").html("");
                    $("#li-enterprise-preferential").html("");
                    $("#li-enterprise").html("")
                }
            },
            error: function () {
                $("#preferential").html("");
                $("#li-enterprise-preferential").html("");
                $("#li-enterprise").html("")
            }
        })
    } else {
        if ("true" == enterpriseUserCookie) {
            $("#preferential").html('<a href="' + domainMain + '/member/enterprise" rel="nofollow"></a>').show();
            $("#li-enterprise-preferential").html('<a href="' + domainMain + '/member/enterprise"><span></span></a>').show();
            $("#li-enterprise").html('<a href="' + domainMain + '/member/enterprise"><span></span></a>').show()
        }
        if ("false" == enterpriseUserCookie) {
            $("#preferential").html("");
            $("#li-enterprise-preferential").html("");
            $("#li-enterprise").html("")
        }
    }
};
ec.account.showCustoemrInfo = function (json) {
    ec.util.cookie.set("vmallMyCenterMsg", json.newMsgCount);
    if (parseInt(json.couponCount) >= 0) {
        g_couponCount = json.couponCount;
        $("#top-couponCount").html(json.couponCount)
    }
    if (json.newMsgCount) {
        g_newMsgCount = json.newMsgCount;
        $("#top-newMsgCount").html(json.newMsgCount).attr("class", json.newMsgCount <= 0 ? "hide" : "");
        if (json.newMsgCount > 0) {
            $("#li-msg em").text("(" + json.newMsgCount + ")")
        }
    }
    if (json.customerInfo) {
        var customerInfo = json.customerInfo;
        if (customerInfo.headPictureURL) {
            $("#customerPic").attr("src", customerInfo.headPictureURL);
            $("#gg_customerPic").attr("src", customerInfo.headPictureURL)
        } else {
            var imgpath = $("#customerPic").attr("imgpath");
            $("#customerPic").attr("src", imgpath + "/echannel/misc/img_logged_in.png");
            $("#gg_customerPic").attr("src", imgpath + "/echannel/misc/img_logged_in.png")
        }
        if (customerInfo.totalPoint) {
            $("#empiricalValue").html(customerInfo.totalPoint);
            ec.account.customerInfo.empiricalValue = customerInfo.totalPoint;
            g_totalPoint = customerInfo.totalPoint
        }
        if (customerInfo.mobileStatus && customerInfo.mobileStatus == "1") {
            $("#validateMobile").html("").removeClass("link-non-validated").addClass("link-validated")
        }
        if (customerInfo.emailStatus && customerInfo.emailStatus == "1") {
            $("#validateMail").html("").removeClass("link-non-validated").addClass("link-validated")
        }
        if (customerInfo.isAuthentication && customerInfo.isAuthentication == "1") {
            $("#authentication_y").show();
            $("#authentication_n").hide()
        } else {
            $("#authentication_n").show();
            $("#authentication_y").hide()
        }
    }
    if (json.gradeConfig) {
        var max = json.gradeConfig.maxScores;
        var min = json.gradeConfig.minScores;
        var interval = max - min;
        var userScores = g_totalPoint;
        var cha = userScores - min;
        if (isNaN(interval)) {
            interval = 5e4
        }
        if (cha > 5e4) {
            cha = 5e4
        }
        var resultNum = cha / interval * 100;
        if (isNaN(resultNum)) {
            resultNum = 0;
            userScores = 0
        }
        if (resultNum <= 0) {
            resultNum = 0
        } else {
            resultNum = Math.round(resultNum)
        }
        var code = json.gradeConfig.code;
        $("#gg_jyz").attr("style", "width: " + resultNum + "%");
        var nextGradeName = json.gradeConfig.nextGradeName;
        if (nextGradeName == "maxlevel") {
            max = 1e5
        }
        (function () {
            ec.account.privilege_updateProgress(max, min, userScores, code)
        })()
    }
};

function htmlEncode(string) {
    var entityMap = {"&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;", "/": "&#x2F;"};
    return String(string).replace(/[&<>"'\/]/g, function (s) {
        return entityMap[s]
    })
}

ec.account.getBalanceAmount = function () {
    $.ajax({
        url: domainIps + "/voucher/queryBalance.htm", dataType: "jsonp", success: function (json) {
            if (json.resultCode == 0) {
                if (json.balanceAmount != null) {
                    g_balanceAmount = parseFloat(json.balanceAmount).toFixed(2)
                } else {
                    g_balanceAmount = 0
                }
                $("#balanceAmount").html(g_balanceAmount);
                if (parseInt(g_balanceAmount) > parseInt(999)) {
                    $("#balanceAmount_privilege").empty().html('<a href="/member/balance?t=' + (new Date).getTime() + '" target="_blank">' + 999 + "+</a>")
                } else {
                    $("#balanceAmount_privilege").empty().html('<a href="/member/balance?t=' + (new Date).getTime() + '" target="_blank">' + g_balanceAmount + "</a>")
                }
                $("#balanceAmount_myCenter").html(g_balanceAmount);
                $("#balanceAmount_myCenter").removeClass("p-price-no")
            }
        }
    })
};
ec.ready(function () {
    var _showLoginTips = function () {
        if (ec.account.isLogin()) {
            var loginName = ec.util.escapeHtml(ec.account.displayName) || ec.util.escapeHtml(ec.account.nickName) || ec.util.escapeHtml(ec.account.name) || ec.account.loginName;
            $("#customer_name").html(loginName);
            if ($("#cart_unlogin_info")[0]) {
                $("#cart_unlogin_info p").html('<a href="/member?t=' + (new Date).getTime() + '">' + loginName + "</a>")
            }
            $("#login_status,#cart_login_info").show();
            $("#up_user_center").show();
            $("#unlogin_status,#cust_login_info").hide();
            $("#loginName").html('<a href="/member?t=' + (new Date).getTime() + '">' + loginName + "</a>");
            $("#up_loginName").html(loginName);
            $("#up_loginName_info").html(loginName);
            ec.account.showVipInfo();
            $("#top_login").removeClass().addClass("header-toolbar");
            $("#top_loginName").html(loginName);
            $("#top_unlogin").removeClass().addClass("header-toolbar hide");
            $("#gg_loginName").html(loginName);
            $("#gg_login").removeClass().addClass("i-mall-prompt clearfix");
            $("#gg_unlogin").removeClass().addClass("i-mall-prompt clearfix hide");
            var isAuthCust = ec.util.cookie.get("isAuthCust");
            if ("true" == isAuthCust) {
                $("#authentication_y").show();
                $("#authentication_n").hide()
            } else {
                $("#authentication_n").show();
                $("#authentication_y").hide()
            }
            var caibeiShowMsg = ec.util.cookie.get("caibeiShowMsg"),
                caibeiHeadShow = ec.util.cookie.get("caibeiHeadShow"),
                caibeiJifenUrl = ec.util.cookie.get("caibeiJifenUrl");
            if (caibeiShowMsg != undefined && caibeiShowMsg != null && caibeiShowMsg.length > 0) {
                $("#HeadShow").html(caibeiHeadShow);
                if (caibeiJifenUrl != undefined && caibeiJifenUrl != null && caibeiJifenUrl.length > 0) {
                    caibeiShowMsg = caibeiShowMsg + "<b>|</b><a href='" + caibeiJifenUrl + "' title='' target='_blank'></a>"
                }
                $("#ShowMsg").html(caibeiShowMsg);
                $("#caibeiMsg").show()
            }
            $("#newPointlogin_status").show();
            getPointBalance();
            enterpriseUserCookieTemp = ec.util.cookie.get("isEnterpriseUser");
            if ("true" == enterpriseUserCookieTemp) {
                $("#preferential").html('<a href="' + domainMain + '/member/enterprise" rel="nofollow"></a>').show();
                $("#li-enterprise-preferential").html('<a href="' + domainMain + "/member/enterprise\" onclick = \"pushHeaderMsg('','" + domainMain + "/member/enterprise')\"><span></span></a>").show();
                $("#li-enterprise").html('<a href="' + domainMain + '/member/enterprise"><span></span></a>').show()
            }
            userCenterFlagTemp = ec.util.cookie.get("userCenterFlag");
            if (userCenterFlagTemp != null && userCenterFlagTemp != "") {
                if (userCenterFlagTemp.length == 4) {
                    if (enterpriseUserCookieTemp.length > 4) {
                        ec.account.getAccountInfo(ec.account.showCustoemrInfo)
                    }
                }
            }
            if (window.location.pathname && window.location.pathname == "/visitor/vistorConfirm") {
                window.location.href = domainMain
            }
            if (window.location.pathname && (window.location.pathname == "/" || window.location.pathname == "/index.html")) {
                ec.account.showEnterpriseUserNav();
                var isFirstLogin = ec.util.cookie.get("isFirstLogin");
                if (isFirstLogin && isFirstLogin == "1") {
                    ec.account.displaySaleConfig()
                }
            }
        } else {
            $("#gg_login").removeClass().addClass("i-mall-prompt clearfix hide");
            $("#gg_unlogin").removeClass().addClass("i-mall-prompt clearfix");
            $("#top_login").removeClass().addClass("header-toolbar hide");
            $("#top_unlogin").removeClass().addClass("header-toolbar")
        }
    };
    var _upLogin = function (callback, visitorInfoTemp) {
        var visitorName = "";
        var funName = "callback" + (new Date).getTime(), boxWidth;
        boxWidth = 500;
        if (ec.product.isSupportVisitorMode != undefined) {
            var visitorFlag = false;
            var skuInfo = ec.product.getSkuInfo(ec.product.getSku() || ec.product.defaultSku);
            var skuId = skuInfo.id;
            var sbomCode = skuInfo.code;
            if (ec.product.productSupportList != undefined && ec.product.productSupportList != null) {
                for (var n = 0; n < ec.product.productSupportList.length; n++) {
                    var visitorInfo = ec.product.productSupportList[n];
                    if (visitorInfo.sbomCode == sbomCode) {
                        var nowTime = ec.product.getSysDate();
                        var startTime = visitorInfo.startTime;
                        var endTime = visitorInfo.endTime;
                        if (startTime <= nowTime && endTime >= nowTime) {
                            visitorFlag = true
                        }
                    }
                }
            }
            if (ec.product.inventory.haveInventory(skuId) && visitorFlag && ec.product.isSupportVisitorMode == 1 && ec.product.productType != 4 && !rush.sbom.isRushProduct() && !rush.sbom.isRushSbom(skuId)) {
                if (ec.product.isGift != 2 && (!ec.product.isCover || ec.product.isCover == undefined) && !ec.product.isComb) {
                    if (visitorInfoTemp == "visitorInfo") {
                        visitorName = '<div class="visitor-login"><a href="javascript:;" onclick="ec.product.orderNowByVisitor();" class="visitor-login-btn"></a><div class="visitor-login-explain">' + '<span></span>www.vmall.com<a href="' + ec.product.casRegister + '"></a>' + "</div></div>";
                        boxWidth = 1e3
                    }
                }
            }
        }
        var url = "/account/login?type=frame&url=" + encodeURIComponent(domainMain + "/account/upCallback.html?funName=" + funName + "&prePage=" + encodeURIComponent(encodeURIComponent(window.location.href))),
            name = "up-iframe-" + (new Date).getTime(),
            html = '<div id="visitorRedirect" class="clearfix">' + '<iframe id="iframeLogin" class="boxIframe fl" width="497" height="550" frameborder="0" name="' + name + '" src="about:blank" scrolling="no"></iframe>' + "</div>" + '<div class="login-link"><a href="https://www.vmall.com/help/faq-778.html" target="_blank"></a><a href="https://www.vmall.com/help/faq-2635.html" target="_blank"></a></div>';
        var box = new ec.box(html, {
            boxid: "ec_login",
            title: " ",
            remember: false,
            width: boxWidth,
            height: 600,
            showButton: false,
            onclose: function (box) {
                try {
                    delete window[funName]
                } catch (e) {
                    window[funName] = null
                }
                box.find("iframe").each(function () {
                    this.contentWindow.close();
                    jQuery(this).remove()
                })
            },
            onopen: function () {
                window[name].location.href = url;
                $("#iframeLogin").load(function () {
                    if ($(".visitor-login").length == 0) {
                        $("#visitorRedirect").append(visitorName)
                    }
                })
            }
        }).open();
        window[funName] = function () {
            if (typeof isUseAccount != "undefined" && isUseAccount == "true") {
                ec.account.getStatus(_showLoginTips)
            } else {
                ec.account.getLoginInfo(_showLoginTips, false);
                if (window.location.pathname == "/company") {
                    window.location.href = "/company"
                }
                ec.util.cookie.get("ifl_v")
            }
            callback();
            var e = {domain: "vmall.com"};
            ec.util.cookie.set("thirdLoginFlag", null, e);
            box.close()
        }
    };
    ec.account.afterLogin = function (callback, visitorInfoTemp) {
        if (ec.account.isLogin()) {
            ec.account.getLoginInfo(_showLoginTips, false);
            callback()
        } else {
            $.ajax({
                url: "/account/check/loginInfo.json?" + Math.random(), dataType: "json", success: function (json) {
                    if (json.loginFlag == "1") {
                        ec.account.getLoginInfo(_showLoginTips, false);
                        return
                    } else {
                        _upLogin(callback, visitorInfoTemp)
                    }
                }
            })
        }
    };
    if (typeof isUseAccount != "undefined" && isUseAccount == "true") {
        ec.account.getStatus(_showLoginTips)
    } else {
        ec.account.getLoginInfo(_showLoginTips, true)
    }
    var cartId = ec.util.cookie.get("cartId");
    var cartAdded = ec.util.cookie.get("cartAdded");
    if (cartAdded && cartAdded != cartId) {
        ec.util.cookie.set("cartAdded", null)
    }
    $("#login_status").hover(function () {
        ec.account.getAccountInfo(ec.account.showCustoemrInfo)
    }, function () {
    });
    var vmall_index = $("#vmall_index").val();
    if (typeof vmall_index != "undefined") {
        if (vmall_index == "vmall_index") {
            if (ec.account.isLogin()) {
                ec.account.getBalanceAmount()
            }
        }
    }
});
ec.account.showVipInfo = function () {
    if (ec.account.userState && ec.account.userState == "1") {
        $("#vip-inActive").hide();
        $("#vip-Active i").removeClass().addClass("icon-vip-level-" + ec.account.custGrade);
        $("#vip-Active").attr("title", "VMALL V" + ec.account.custGrade + "");
        $("#vip-Active").show();
        var html = [];
        html.push('<em class="vip-state" id="vip-info">&nbsp;&nbsp;&nbsp;&nbsp;');
        html.push('<a href="/member/point" title="VMALL V' + ec.account.custGrade + '" id="vip-Active" ><i class="icon-vip-level-' + ec.account.custGrade + '"></i></a>');
        html.push("</em>");
        $("#cart_unlogin_info p").append(html.join(""));
        $("#vip-Active-top i").removeClass().addClass("icon-vip-level-" + ec.account.custGrade);
        $("#vip-Active-top").attr("title", "VMALL V" + ec.account.custGrade + "");
        $("#vip-Active-gg").removeClass().addClass("icon-vip-level-" + ec.account.custGrade);
        if (ec.account.custGrade == "0") {
            $("#oldPeople").hide();
            $("#newPeople").show()
        } else {
            $("#oldPeople").show();
            $("#newPeople").hide()
        }
    } else if (ec.account.isValCas && "false" == ec.account.isValCas) {
        $("#vip-inActive").hide();
        $("#vip-Active").hide();
        $("#vip-Active-top").removeClass().addClass("icon-vip-level-0");
        $("#vip-Active-gg").removeClass().addClass("icon-vip-level-0");
        $("#oldPeople").hide();
        $("#newPeople").show()
    } else {
        $("#cart_unlogin_info p").append('&nbsp;&nbsp;<em class="vip-state"><a class="link-noAct" href="/member/account" id="vip-inActive" title=""></a></em>');
        $("#vip-inActive").show();
        $("#vip-Active").hide();
        $("#vip-Active-top").removeClass().addClass("icon-vip-level-0");
        $("#vip-Active-gg").removeClass().addClass("icon-vip-level-0");
        $("#oldPeople").hide();
        $("#newPeople").show()
    }
};
ec.pkg("ec.minicart");
ec.minicart.processCheck = function (cartInfo) {
    var itemList = cartInfo.itemInfos;
    for (var i = 0; i < itemList.length; i++) {
        var item = itemList[i];
        if (item.itemType == "P") {
            if (item.selected == "1") {
                itemList[i].checked = true
            } else {
                itemList[i].checked = false
            }
        } else {
            if (item.selected == "1") {
                itemList[i].checked = true
            } else {
                itemList[i].checked = false
            }
        }
    }
};
ec.minicart.bundls = function (cartInfo) {
    var itemList = cartInfo.itemInfos;
    for (var i = 0; i < itemList.length; i++) {
        var item = itemList[i];
        if (item.itemType == "B" || item.itemType == "P") {
            for (var j = 0; j < item.subItems.length; j++) {
                if (item.subItems[j].itemType == "B" || item.subItems[j].itemType == "P") {
                    if (item.subItems[j].invalidCauseReason != 0) {
                        if (item.subItems[j].invalidCauseReason == 7) {
                            if (item.subItems[j].qty > item.subItems[j].invalidCauseLeftValue) {
                                itemList[i].show = "false";
                                itemList[i].showP = "false"
                            } else {
                            }
                        } else {
                            itemList[i].show = "false";
                            itemList[i].showP = "false"
                        }
                        if (item.subItems[j].invalidCauseReason != 7 && item.subItems[j].invalidCauseReason != 8) {
                            itemList[i].notbuyLimit = "true"
                        }
                    }
                }
            }
        }
        if (item.invalidCauseReason != 0) {
            if (item.invalidCauseReason == 7) {
                if (item.qty > item.invalidCauseLeftValue) {
                    itemList[i].show = "false"
                } else {
                }
            } else {
                itemList[i].show = "false"
            }
        }
        if (item.lost || item.numblimit) {
            itemList[i].show = "false"
        }
        if (item.lost) {
            if (item.itemType == "P") {
                itemList[i].showP = "false"
            }
        }
    }
};
ec.minicart.limitnumber = function (item) {
    var limit = item.invalidCauseLeftValue;
    if (limit < 0) limit = 1;
    if (limit == 0) {
        if (item.sbom.productLimit != 0 && item.sbom.sbomLimit != 0) {
            return Math.min(item.sbom.productLimit, item.sbom.sbomLimit)
        } else if (item.sbom.productLimit != 0) {
            return item.sbom.productLimit
        } else if (item.sbom.sbomLimit != 0) {
            return item.sbom.sbomLimit
        } else {
            return 999
        }
    }
    return limit
};
ec.minicart.bundleNoBuy = function (cartInfo) {
    var itemList = cartInfo.itemInfos;
    for (var i = 0; i < itemList.length; i++) {
        if (itemList[i].itemType != "B") var qty = itemList[i].qty;
        var qtylimit = [];
        var qtylose = [];
        var qtyJ = [];
        for (var j = 0; j < itemList.length; j++) {
            if (itemList[j].itemId != itemList[i].itemId) {
                if (itemList[j].itemCode == itemList[i].itemCode) {
                    qty += itemList[j].qty;
                    qtylimit.push(j)
                } else {
                    if (itemList[j].subItems.length > 0) {
                        for (var k = 0; k < itemList[j].subItems.length; k++) {
                            if (itemList[j].subItems[k].itemType == "P" && itemList[j].subItems[k].itemCode == itemList[i].itemCode) {
                                qty += itemList[j].subItems[k].qty;
                                qtylose.push(j)
                            }
                            if (itemList[j].subItems[k].itemType == "J" && itemList[j].subItems[k].itemCode == itemList[i].itemCode) {
                                qty += itemList[j].subItems[k].qty;
                                qtyJ.push({home: j, sub: k})
                            }
                        }
                    }
                }
            }
        }
        if (itemList[i].itemType != "B") {
            var homelimit = ec.minicart.limitnumber(itemList[i]);
            if (qty > homelimit) {
                itemList[i].numblimit = true;
                if (qtylimit.length > 0) {
                    for (var l = 0; l < qtylimit.length; l++) {
                        itemList[qtylimit[l]].numblimit = true
                    }
                }
                if (qtylose.length > 0) {
                    for (var m = 0; m < qtylose.length; m++) {
                        itemList[qtylose[m]].lost = true
                    }
                }
                if (qtyJ.length > 0) {
                    for (var n = 0; n < qtyJ.length; n++) {
                        itemList[qtyJ[n].home].subItems[qtyJ[n].sub].Jlost = true
                    }
                }
            }
        }
        if (itemList[i].subItems.length > 0) {
            for (var o = 0; o < itemList[i].subItems.length; o++) {
                if (itemList[i].subItems[o].itemType == "P" || itemList[i].subItems[o].itemType == "B") {
                    var bundlelimit = ec.minicart.limitnumber(itemList[i].subItems[o]);
                    var bqty = itemList[i].qty;
                    var bqtylimit = [];
                    var bqtylose = [];
                    var bqtyJ = [];
                    for (var p = 0; p < itemList.length; p++) {
                        if (itemList[i].itemId != itemList[p].itemId) {
                            if (itemList[p].itemCode == itemList[i].subItems[o].itemCode) {
                                bqty += itemList[p].qty;
                                bqtylimit.push(p)
                            } else {
                                if (itemList[p].subItems.length > 0) {
                                    for (var q = 0; q < itemList[p].subItems.length; q++) {
                                        if (itemList[p].subItems[q].itemType == "P" && itemList[p].subItems[q].itemCode == itemList[i].subItems[o].itemCode) {
                                            bqty += itemList[p].subItems[q].qty;
                                            bqtylose.push(p)
                                        }
                                        if (itemList[p].subItems[q].itemType == "J" && itemList[p].subItems[q].itemCode == itemList[i].subItems[o].itemCode) {
                                            bqty += itemList[p].subItems[q].qty;
                                            bqtyJ.push({home: p, sub: q})
                                        }
                                    }
                                }
                            }
                        }
                    }
                    if (bqty > bundlelimit) {
                        itemList[i].numblimit = true;
                        itemList[i].lost = true;
                        if (bqtylimit.length > 0) {
                            for (var r = 0; r < bqtylimit.length; r++) {
                                itemList[bqtylimit[r]].numblimit = true
                            }
                        }
                        if (bqtylose.length > 0) {
                            for (var s = 0; s < bqtylose.length; s++) {
                                itemList[bqtylose[s]].lost = true
                            }
                        }
                        if (bqtyJ.length > 0) {
                            for (var t = 0; t < bqtyJ.length; t++) {
                                itemList[bqtyJ[t].home].subItems[bqtyJ[t].sub].Jlost = true
                            }
                        }
                    }
                }
            }
        }
    }
};
ec.minicart.photos = function (cartInfo) {
    var itemList = cartInfo.itemInfos;
    for (var i = 0; i < itemList.length; i++) {
        var item = itemList[i];
        itemList[i].itemkd = item.itemId.replace(/\./g, "-");
        if (item.itemType == "B") {
            itemList[i].photoName = item.subItems[0].sbom["photoName"];
            itemList[i].photoPath = item.subItems[0].sbom["photoPath"];
            itemList[i].photoId = item.subItems[0].sbom["productId"];
            itemList[i].skuId = item.subItems[0].skuId
        } else {
            itemList[i].photoName = item.sbom["photoName"];
            itemList[i].photoPath = item.sbom["photoPath"];
            itemList[i].productId = item.sbom["productId"]
        }
    }
};
ec.minicart.updateMiniCartNum = function () {
    ec.cart.getMicroCartTotalNumber(function (json) {
        var num = 0;
        if (json.data > 99) {
            num = "99+"
        } else {
            num = json.data || 0
        }
        $("#header-cart-total").html(num);
        minCartNum = parseInt(num);
        if (minCartNum < 1) {
            $(".j-hungBar .hungBar-cart span").html("").hide()
        } else {
            $(".j-hungBar .hungBar-cart span").html(num).show()
        }
    })
};
ec.minicart.readyContent = function () {
    ec.minicart.updateMiniCartNum()
};
ec.minicart.content = function () {
    ec.cart.getMicroCartFromOrder(function (json) {
        if (json.resultCode == "200000") {
            var cartVO = json.data, $cartEmpty = $("#minicart-pro-empty"), $cartList = $("#minicart-pro-list-block"),
                $cartSettleup = $("#minicart-pro-settleup");
            var cartInfo = cartVO;
            if (ec.minicart.microCartTpl) {
                var num = 0;
                if (cartInfo.totalNumber == 0) {
                    $("#button-minicart-go2confirm").hide();
                    $("#disbutton-minicart-go2confirm").show()
                } else {
                    $("#button-minicart-go2confirm").show();
                    $("#disbutton-minicart-go2confirm").hide()
                }
                if (cartInfo.originalTotalNumber > 0) {
                    if (cartInfo.originalTotalNumber > 99) {
                        $("#header-cart-total").html("99+")
                    } else {
                        $("#header-cart-total").html(cartInfo.originalTotalNumber || 0)
                    }
                    $("#micro-cart-totalPrice").html("&yen;&nbsp;" + cartInfo.cashPay.toFixed(2));
                    if (cartInfo.originalPrice != cartInfo.cashPay) {
                        $("#micro-cart-totalOriginPrice").html("&yen;&nbsp;" + cartInfo.originalPrice.toFixed(2))
                    } else {
                        $("#micro-cart-totalOriginPrice").html("")
                    }
                    ec.minicart.photos(json.data);
                    ec.minicart.bundleNoBuy(json.data);
                    ec.minicart.bundls(json.data);
                    for (var i = 0; i < json.data.itemInfos.length; i++) {
                        if (json.data.itemInfos[i].itemName.indexOf("script") > 0) {
                            json.data.itemInfos[i].itemName = safeStr(json.data.itemInfos[i].itemName)
                        }
                    }
                    html = ec.minicart.microCartTpl.parse("microCartList", json.data);
                    $("#minicart-goods-list").html(html);
                    $cartList.show();
                    $cartSettleup.show();
                    $cartEmpty.hide();
                    if (cartInfo.itemInfos.length > 5) {
                        $cartList.addClass("minicart-pro-list-scroll")
                    } else {
                        $cartList.removeClass("minicart-pro-list-scroll")
                    }
                    for (var i = 0; i < json.data.itemInfos.length; i++) {
                        if (json.data.itemInfos[i].show == "false" && json.data.itemInfos[i].selected) {
                            ec.minicart.dissome(json.data.itemInfos[i].itemId)
                        }
                    }
                } else {
                    $("#header-cart-total").html(0);
                    $cartEmpty.show();
                    $cartList.hide();
                    $cartSettleup.hide()
                }
            }
        }
        if (json.resultCode == "34900") {
            $("#cartInfo").html("")
        }
    })
};
ec.minicart.click = function (thix) {
    ec.loadCsrfToken(function () {
        ec.minicart.clickTo(thix)
    })
};
ec.minicart.clickTo = function (thix) {
    ec.minicart.click.send(thix, function (json) {
        if (json.msg == "success") {
            var cartInfo = json.cartInfo.cartVO;
            if (cartInfo.miniTotalNumber > 0) {
                $("#button-minicart-go2confirm").show();
                $("#disbutton-minicart-go2confirm").hide();
                $("#micro-cart-totalPrice").html("&yen;&nbsp;" + cartInfo.miniTotalPrice.toFixed(2));
                if (cartInfo.miniTotalOriginalPrice != cartInfo.miniTotalPrice) {
                    $("#micro-cart-totalOriginPrice").html("&yen;&nbsp;" + cartInfo.miniTotalOriginalPrice.toFixed(2))
                } else {
                    $("#micro-cart-totalOriginPrice").html("")
                }
            } else {
                $("#button-minicart-go2confirm").hide();
                $("#disbutton-minicart-go2confirm").show();
                $("#micro-cart-totalPrice").html("&yen;&nbsp;0.00");
                $("#micro-cart-totalOriginPrice").html("")
            }
        }
        if (json.resultCode == "200000") {
            var cartInfo = json.data;
            if (cartInfo.totalNumber > 0) {
                $("#button-minicart-go2confirm").show();
                $("#disbutton-minicart-go2confirm").hide();
                $("#micro-cart-totalPrice").html("&yen;&nbsp;" + cartInfo.cashPay.toFixed(2));
                if (cartInfo.cashPay != cartInfo.originalPrice) {
                    $("#micro-cart-totalOriginPrice").html("&yen;&nbsp;" + cartInfo.originalPrice.toFixed(2))
                } else {
                    $("#micro-cart-totalOriginPrice").html("")
                }
            } else {
                $("#button-minicart-go2confirm").hide();
                $("#disbutton-minicart-go2confirm").show();
                $("#micro-cart-totalPrice").html("&yen;&nbsp;0.00");
                $("#micro-cart-totalOriginPrice").html("")
            }
        }
    })
};
ec.minicart.convertToCart = function (argList) {
    var sbs = [], types = [], qtys = [], ess = [], gfs = [], ops = [];
    for (var i = 0; i < argList.length; i++) {
        orderItem = argList[i];
        if (orderItem.itemType == "S0") {
            sbs.push(orderItem.itemId);
            if (orderItem.itemProp && orderItem.itemProp["Internal_Purchase"] && orderItem.itemProp["Internal_Purchase"] == "true") {
                types.push(8)
            } else {
                types.push(1)
            }
            qtys.push(orderItem.qty);
            ess.push("");
            var gifts = [];
            if (orderItem.gifts && orderItem.gifts.length > 0) {
                for (var g = 0; g < orderItem.gifts.length; g++) {
                    gifts.push(orderItem.gifts[g].sbomCode)
                }
            }
            gfs.push(gifts.join("-"));
            ops.push(orderItem.operation)
        }
        if (orderItem.itemType == "S1") {
            sbs.push(orderItem.itemId);
            types.push(6);
            qtys.push(orderItem.qty);
            ess.push(orderItem.mainItemid);
            gfs.push("");
            ops.push(orderItem.operation)
        }
        if (orderItem.itemType == "S6") {
            sbs.push(orderItem.itemId);
            types.push(7);
            qtys.push(orderItem.qty);
            ess.push(orderItem.mainItemid);
            gfs.push("");
            ops.push(orderItem.operation)
        }
        if (orderItem.itemType == "B") {
            sbs.push(orderItem.itemId);
            if (orderItem.itemProp && orderItem.itemProp["Internal_Purchase"] && orderItem.itemProp["Internal_Purchase"] == "true") {
                types.push(9)
            } else {
                types.push(2)
            }
            qtys.push(orderItem.qty);
            ess.push("");
            gfs.push("");
            ops.push(orderItem.operation)
        }
        if (orderItem.itemType == "20") {
            sbs.push(orderItem.itemId);
            types.push(20);
            qtys.push(orderItem.qty);
            ess.push(orderItem.mainItemid);
            gfs.push("");
            ops.push(orderItem.operation)
        }
    }
    var data = {};
    data.sbs = sbs.join(",");
    data.types = types.join(",");
    data.qtys = qtys.join(",");
    data.ess = ess.join(",");
    data.gfs = gfs.join(",");
    data.ops = ops.join(",");
    return data
};
ec.minicart.click.send = function (thix, callback) {
    var url;
    var id = $(thix).attr("value"), type = $(thix).attr("type"), operation = 5;
    var itemId = $(thix).attr("data-itemId").replace(/\./g, "-");
    ec.minicart.checkboxInverse(itemId);
    $("#button-minicart-go2confirm").show();
    $("#disbutton-minicart-go2confirm").hide();
    var operation = 5;
    if ($("#icon-choose-" + itemId).hasClass("icon-choose") && $("#checkbox-" + itemId).attr("checked")) {
        operation = 5
    } else {
        operation = 6
    }
    var data = {};
    var lists = [];
    lists.push($(thix).attr("data-itemId"));
    data.mainItemIds = JSON.stringify(lists);
    if (operation == 5) {
        url = openApiDomain + "/cart/v1/select.json"
    } else {
        url = openApiDomain + "/cart/v1/disselect.json"
    }
    $.ajax({
        url: url,
        type: "post",
        dataType: "json",
        timeout: 1e4,
        traditional: true,
        data: JSON.stringify(data),
        beforeSend: function (xhr) {
            xhr.withCredentials = true;
            xhr.setRequestHeader("CsrfToken", csrftoken)
        },
        success: function (result) {
            callback(result)
        }
    })
};
ec.minicart.dissome = function (paras) {
    ec.loadCsrfToken(function () {
        ec.minicart.dissomeTO(paras)
    })
};
ec.minicart.dissomeTO = function (paras) {
    if (typeof csrftoken == "undefined") {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = openApiDomain + "/csrftoken.js?random=" + Math.random();
        document.body.appendChild(script)
    }
    ec.minicart.dissome.send(paras, function (json) {
        if (json.resultCode == "200000") {
            var cartInfo = json.data;
            if (cartInfo.totalNumber > 0) {
                $("#button-minicart-go2confirm").show();
                $("#disbutton-minicart-go2confirm").hide();
                $("#micro-cart-totalPrice").html("&yen;&nbsp;" + cartInfo.cashPay.toFixed(2));
                if (cartInfo.cashPay != cartInfo.originalPrice) {
                    $("#micro-cart-totalOriginPrice").html("&yen;&nbsp;" + cartInfo.originalPrice.toFixed(2))
                } else {
                    $("#micro-cart-totalOriginPrice").html("")
                }
            } else {
                $("#button-minicart-go2confirm").hide();
                $("#disbutton-minicart-go2confirm").show();
                $("#micro-cart-totalPrice").html("&yen;&nbsp;0.00");
                $("#micro-cart-totalOriginPrice").html("")
            }
        }
    })
};
ec.minicart.dissome.send = function (paras, callback) {
    var url;
    var data = {};
    var lists = [];
    lists.push(paras);
    data.mainItemIds = JSON.stringify(lists);
    url = openApiDomain + "/cart/v1/disselect.json";
    $.ajax({
        url: url,
        type: "post",
        dataType: "json",
        timeout: 1e4,
        traditional: true,
        data: JSON.stringify(data),
        beforeSend: function (xhr) {
            xhr.withCredentials = true;
            xhr.setRequestHeader("CsrfToken", csrftoken)
        },
        success: function (result) {
            callback(result)
        }
    })
};
ec.minicart.selectedItemIsEmpty = function () {
    var selected = $("#minicart-goods-list input[name='skuIds']:checked").length + $("#minicart-goods-list input[name='bundleIds']:checked").length;
    if (selected == 0) {
        $("#header-cart-total").html(0);
        $("#micro-cart-totalPrice").html("&yen;&nbsp;0.00");
        $("#micro-cart-totalOriginPrice").html("");
        $("#button-minicart-go2confirm").hide();
        $("#disbutton-minicart-go2confirm").show();
        return true
    }
    return false
};
ec.minicart.checkboxInverse = function (itemId) {
    if ($("#icon-choose-" + itemId).hasClass("icon-choose")) {
        $("#icon-choose-" + itemId).removeClass("icon-choose").addClass("icon-choose-normal");
        $("#checkbox-" + itemId).attr("checked", false)
    } else {
        $("#icon-choose-" + itemId).removeClass("icon-choose-normal").addClass("icon-choose");
        $("#checkbox-" + itemId).attr("checked", true)
    }
};
ec.minicart.buildOrderItemReqArgList = function () {
    var $skus = $("#minicart-goods-list input[name='skuIds']:checked");
    var $bundles = $("#minicart-goods-list input[name='bundleIds']:checked");
    var orderItemReqArgList = [];
    $skus.each(function () {
        var $tbody = $(this).closest("li");
        var id = this.value;
        var qty = $("#quantity-" + id, $tbody).val();
        var type = $("#quantity-" + id, $tbody).attr("data-type");
        var orderitem = {};
        var extendItem = {};
        var accidentItem = {};
        var giftItem = {};
        var extendId = $('input[name="extendIds"]', $tbody).val();
        if (extendId) {
            extendItem.itemId = extendId;
            extendItem.qty = qty;
            extendItem.itemType = "S1";
            extendItem.mainItemid = id;
            orderItemReqArgList.push(extendItem)
        }
        var accidentId = $('input[name="accidentIds"]', $tbody).val();
        if (accidentId) {
            accidentItem.itemId = accidentId;
            accidentItem.qty = qty;
            accidentItem.itemType = "S6";
            accidentItem.itemProp = {accidentItem: id};
            accidentItem.mainItemid = id;
            orderItemReqArgList.push(accidentItem)
        }
        var preferIds = $("#preferIds_" + id).attr("skuids");
        if (preferIds) {
            var sbomCodes = preferIds.split(",");
            for (var i = 0; i < sbomCodes.length; i++) {
                if (sbomCodes[i] != "") {
                    var preferItem = {};
                    preferItem.itemId = sbomCodes[i];
                    preferItem.qty = "1";
                    preferItem.itemType = "20";
                    preferItem.mainItemid = id;
                    orderItemReqArgList.push(preferItem)
                }
            }
        }
        if (qty) {
            orderitem.itemId = id;
            orderitem.qty = qty;
            if (type == "1") {
                orderitem.itemType = "S0"
            }
            if (type == "8") {
                orderitem.itemType = "S0";
                orderitem.itemProp = {Internal_Purchase: "true"}
            }
            if (type == "2") {
                orderitem.itemType = "B"
            }
            if (type == "9") {
                orderitem.itemType = "B";
                orderitem.itemProp = {Internal_Purchase: "true"}
            }
            var giftSbomCodes = $("#gift_sbomCodes_" + id).val();
            if (giftSbomCodes) {
                var gifts = [];
                var sbomCodes = giftSbomCodes.split(",");
                for (var i = 0; i < sbomCodes.length; i++) {
                    if (sbomCodes[i] != "") {
                        var gift = {};
                        gift.sbomCode = sbomCodes[i];
                        gifts.push(gift)
                    }
                }
                orderitem.gifts = gifts
            }
            orderItemReqArgList.push(orderitem)
        }
    });
    $bundles.each(function () {
        var $tbody = $(this).closest("li");
        var id = this.value;
        var qty = $("#quantity-" + id, $tbody).val();
        var type = $("#quantity-" + id, $tbody).attr("data-type");
        var orderitem = {};
        if (qty) {
            orderitem.itemId = id;
            orderitem.qty = qty;
            if (type == "2") {
                orderitem.itemType = "B"
            }
            if (type == "9") {
                orderitem.itemType = "B";
                orderitem.itemProp = {Internal_Purchase: "true"}
            }
            orderItemReqArgList.push(orderitem)
        }
    });
    return orderItemReqArgList
};
ec.minicart.confirm = function () {
    var $skus = $("#minicart-goods-list input[name='skuIds']:checked");
    var $bundles = $("#minicart-goods-list input[name='bundleIds']:checked");
    if ($skus.length == 0 && $bundles.length == 0) {
        alert("");
        return
    }
    if (!ec.account.isLogin()) {
        window.location.href = $("#top-index-loginUrl").attr("href")
    }
    var sbs = [];
    var types = [];
    var qtys = [];
    var ess = [];
    var orderItemReqArgList = [];
    $skus.each(function () {
        var itemId = $(this).attr("data-itemId").replace(/\./g, "-");
        var $tbody = $(this).closest("li");
        var id = this.value;
        var skuCode = $(this).attr("data-scode");
        var qty = $("#quantity-" + id, $tbody).val();
        var type = $("#quantity-" + id, $tbody).attr("data-type");
        var bundle = $("#bundle-" + itemId).val();
        var orderitem = {};
        var extendItem = {};
        var accidentItem = {};
        if (qty) {
            orderitem.itemId = skuCode;
            orderitem.qty = qty;
            orderitem.itemType = type;
            orderitem.id = $(this).attr("data-itemId");
            if (type == "P") {
                var packageCodeList = {package_code: bundle};
                orderitem.itemProp = packageCodeList
            }
            var $gifts = $('input[name="giftId"]', $tbody);
            if ($gifts.length > 0) {
                var gifts2Order = [];
                $gifts.each(function () {
                    var aGift = {sbomCode: this.value};
                    gifts2Order.push(aGift)
                });
                orderitem.gifts = gifts2Order
            }
            orderitem.subOrderItemReqArgs = [];
            var $newBundle = $("#bundle-" + itemId).attr("data-scode");
            if ($newBundle) {
                orderitem.subOrderItemReqArgs = [];
                $.each($newBundle.split(","), function (index, value) {
                    if (value != "") {
                        var apack = {itemId: value, qty: qty, itemType: "P"};
                        orderitem.subOrderItemReqArgs.push(apack)
                    }
                })
            }
            var extendId = $('input[name="extendIds"]', $tbody).attr("data-scode");
            if (extendId) {
                extendItem.itemId = extendId;
                extendItem.qty = qty;
                extendItem.itemType = "S1";
                extendItem.mainSkuCode = skuCode;
                orderitem.subOrderItemReqArgs.push(extendItem)
            }
            var accidentId = $('input[name="accidentIds"]', $tbody).attr("data-scode");
            if (accidentId) {
                accidentItem.itemId = accidentId;
                accidentItem.qty = qty;
                accidentItem.itemType = "S6";
                accidentItem.mainSkuCode = skuCode;
                orderitem.subOrderItemReqArgs.push(accidentItem)
            }
            var preferIds = $("#preferIds_" + id).val();
            if (preferIds) {
                var sbomCodes = preferIds.split(",");
                for (var i = 0; i < sbomCodes.length; i++) {
                    if (sbomCodes[i] != "") {
                        var preferItem = {};
                        preferItem.itemId = sbomCodes[i];
                        preferItem.qty = "1";
                        preferItem.itemType = "J";
                        preferItem.mainSkuCode = skuCode;
                        orderitem.subOrderItemReqArgs.push(preferItem)
                    }
                }
            }
            orderItemReqArgList.push(orderitem)
        }
    });
    $bundles.each(function () {
        var $tbody = $(this).closest("li");
        var id = this.value;
        var qty = $("#quantity-" + id, $tbody).val();
        var type = $("#quantity-" + id, $tbody).attr("data-type");
        var orderitem = {};
        if (qty) {
            orderitem.itemId = id;
            orderitem.qty = qty;
            orderitem.itemType = type;
            orderItemReqArgList.push(orderitem)
        }
    });
    $("#miniCartToken").attr("src", openApiDomain + "/csrftoken.js?random=" + (new Date).getTime());
    var jsonReqArg = ec.lang.json.stringify(orderItemReqArgList);
    setTimeout(function () {
        ec.cart.confirm(1, jsonReqArg)
    }, 500)
};
ec.pkg("ec.product");
ec.product.history = {
    load: function (callback, size, pid) {
        $.ajax({
            url: "/product/browsed/query.json",
            data: {size: size ? size : undefined, pid: pid ? pid : undefined},
            dataType: "json",
            success: function (json) {
                if (!json.success) return;
                callback(json.list || [])
            }
        })
    }, add: function (id) {
        var img = new Image;
        img.src = "/product/browsed/add?id=" + id + "&_t=" + (new Date).getTime();
        img = null
    }, clear: function (callback) {
        var img = new Image;
        img.src = "/product/browsed/clear?_t=" + (new Date).getTime();
        img = null;
        if (callback) callback()
    }
};
ec.product.inventory = {
    _data: {}, set: function (id, haveInventory) {
        this._data[id] = haveInventory
    }, haveInventory: function (id) {
        return this._data[id]
    }
};
ec.pkg("ec.cart");
ec.cart.productTypeCorrespondence = function (productType) {
    if (productType == 1) {
        productType = "S0"
    } else if (productType == 2) {
        productType = "B"
    } else if (productType == 6) {
        productType = "S1"
    } else if (productType == 7) {
        productType = "S6"
    } else if (productType == 8) {
        productType = "S0"
    } else if (productType == 9) {
        productType = "B"
    } else if (productType == 20) {
        productType = "20"
    } else {
        productType = "S0"
    }
    return productType
};
ec.cart.add = function (paras, options) {
    var data = {};
    var cartNumber = "add.json";
    if (paras.number == 1) {
        cartNumber = "addMulti.json";
        data.mainItems = paras.cartjson
    } else {
        data.mainItem = paras.cartjson
    }
    ec.loadCsrfToken(function () {
        $.ajax({
            url: openApiDomain + "/cart/v1/" + cartNumber,
            dataType: "json",
            type: "post",
            timeout: 3e4,
            traditional: true,
            data: JSON.stringify(data),
            beforeSend: function (xhr) {
                xhr.withCredentials = true;
                xhr.setRequestHeader("CsrfToken", csrftoken)
            },
            success: function (result) {
                if (result.resultCode != 2e5) {
                    if (options.errorFunction) {
                        result.msg = "";
                        options.errorFunction(result)
                    }
                    return
                }
                if (options.successFunction) {
                    ec.util.cookie.set("cartAdded", ec.util.cookie.get("cartId"));
                    options.successFunction(result)
                }
            },
            error: function (xhr, msg, e) {
                if (options.errorFunction) {
                    var result = {};
                    result.msg = msg;
                    result.msg = "";
                    options.errorFunction(result)
                }
            }
        })
    })
};
ec.cart.getCartTotalNumber = function (callback, optional) {
    if (!ec.util.cookie.get("cartId") && !ec.account.isLogin()) {
        return
    }
    $.ajax({
        url: openApiDomain + "/cart/v1/getTotalNum.json?t=" + (new Date).getTime() + "&saleChannel=1001&salePortal=1",
        dataType: "json",
        timeout: 1e4,
        beforeSend: function (xhr) {
            xhr.withCredentials = true
        },
        success: function (json) {
            if (json.resultCode == 2e5) {
                callback(json, optional)
            } else {
                callback(null, optional)
            }
        }
    })
};
ec.cart.getCartItemsInternal = function (callback, optional) {
    var cartId = ec.util.cookie.get("cartId");
    if (ec.util.cookie.get("salePortal") != 1) {
        document.cookie = "salePortal=1; domain=.vmall.com ;path=/"
    }
    $.ajax({
        url: openApiDomain + "/cart/v1/queryCart.json?t=" + (new Date).getTime(),
        dataType: "json",
        timeout: 1e4,
        beforeSend: function (xhr) {
            xhr.withCredentials = true
        },
        success: function (json) {
            if (json.resultCode == 2e5) {
                callback(json, optional)
            } else {
                callback(json, optional)
            }
        }
    });
    ec.minicart.updateMiniCartNum()
};
ec.cart.getCartItems = function (callback, optional) {
    var cartId = ec.util.cookie.get("cartId");
    if (cartId && cartId.length > 0) {
        var isValCas = ec.util.cookie.get("isValCas");
        if (isValCas && "false" == isValCas) {
            $.ajax({url: "/account/load", type: "POST"});
            isValCas = ec.util.cookie.get("isValCas")
        }
        if (ec.account.isLogin() && ec.account.id && ec.account.loginName) {
            ec.cart.doCache2cart(ec.cart.getCartItemsInternal, callback, optional)
        } else {
            ec.cart.getCartItemsInternal(callback, optional)
        }
    } else {
        ec.cart.getCartItemsInternal(callback, optional)
    }
};
ec.cart.buildQueryData = function (cartItems) {
    var ids = [];
    var types = [];
    var quantitys = [];
    var mainskus = [];
    for (var i = 0; i < cartItems.length; i++) {
        var cartItem = cartItems[i];
        if (cartItem.skuId) {
            ids.push(cartItem.skuId)
        } else if (cartItem.bundleId) {
            ids.push(cartItem.bundleId)
        } else {
            continue
        }
        types.push(cartItem.productType);
        quantitys.push(cartItem.quantity);
        if (cartItem.mainSkuId) {
            mainskus.push(cartItem.mainSkuId)
        } else {
            mainskus.push("")
        }
    }
    var date = new Date;
    return {
        sbs: ids.join(","),
        types: types.join(","),
        qtys: quantitys.join(","),
        ess: mainskus.join(","),
        t: date.getTime()
    }
};
ec.cart.getOnceCartInfo = function (cartItems, callback, i) {
    var data = ec.cart.buildQueryData(cartItems);
    $.ajax({
        url: domainMain + "/order/shoppingCart/newCart.json",
        dataType: "jsonp",
        timeout: 1e4,
        traditional: true,
        data: data,
        success: function (result) {
            if (i != null) {
                callback(result, i)
            } else {
                if (!result.success || !result.cartInfo) {
                    return
                } else {
                    callback(result)
                }
            }
        },
        error: function () {
            if (i != null) {
                var result = {};
                result.success = false;
                callback(result, i)
            }
        }
    })
};
ec.cart.batchCount = 50;
ec.cart.getCartInfo = function (cartItems, callback) {
    if (!cartItems || cartItems.length == 0) {
        callback({});
        return
    }
    if (cartItems.length <= ec.cart.batchCount) {
        ec.cart.getOnceCartInfo(cartItems, callback)
    } else {
        var batchs = [];
        var currentBundleBatch = [];
        var currentSkuBatch = [];
        outer:for (var i = 0; i < cartItems.length; i++) {
            var cartItem = cartItems[i];
            if (cartItem.productType == 1) {
                currentSkuBatch.push(cartItem);
                if (currentSkuBatch.length == ec.cart.batchCount) {
                    batchs.push(currentSkuBatch);
                    currentSkuBatch = []
                }
            } else if (cartItem.productType == 6) {
                for (var j = 0; j < batchs.length; j++) {
                    var batch = batchs[j];
                    if (batch[0].productType == 1) {
                        for (var k = 0; k < batch.length; k++) {
                            if (batch[k].skuId == cartItem.mainSkuId) {
                                batch.push(cartItem);
                                continue outer
                            }
                        }
                    }
                }
                for (var j = 0; j < currentSkuBatch.length; j++) {
                    if (currentSkuBatch[j].skuId == cartItem.mainSkuId) {
                        currentSkuBatch.push(cartItem)
                    }
                }
            } else {
                currentBundleBatch.push(cartItem);
                if (currentBundleBatch.length == ec.cart.batchCount) {
                    batchs.push(currentBundleBatch);
                    currentBundleBatch = []
                }
            }
        }
        if (currentBundleBatch.length > 0) {
            if (currentBundleBatch.length + currentSkuBatch.length <= ec.cart.batchCount) {
                currentBundleBatch.push(currentSkuBatch);
                batchs.push(currentBundleBatch)
            } else {
                batchs.push(currentBundleBatch);
                batchs.push(currentSkuBatch)
            }
        } else {
            if (currentSkuBatch.length > 0) {
                batchs.push(currentSkuBatch)
            }
        }
        var total = {};
        total.cartInfo = {};
        total.cartInfo.bundlerList = [];
        total.cartInfo.productList = [];
        total.cartInfo.couponList = [];
        total.cartInfo.premiumsList = [];
        total.cartInfo.totalOriginalPrice = 0;
        total.cartInfo.totalPrice = 0;
        total.limitstock = [];
        total.understock = [];
        var got = 0;
        for (var i = 0; i < batchs.length; i++) {
            var batch = batchs[i];
            ec.cart.getOnceCartInfo(batch, function (result, i) {
                got += 1;
                if (result.success && result.cartInfo) {
                    if (result.cartInfo.bundlerList && result.cartInfo.bundlerList.length > 0) {
                        total.cartInfo.bundlerList = total.cartInfo.bundlerList.concat(result.cartInfo.bundlerList)
                    }
                    if (result.cartInfo.productList && result.cartInfo.productList.length > 0) {
                        total.cartInfo.productList = total.cartInfo.productList.concat(result.cartInfo.productList)
                    }
                    if (result.cartInfo.couponList && result.cartInfo.couponList.length > 0) {
                        total.cartInfo.couponList = total.cartInfo.couponList.concat(result.cartInfo.couponList)
                    }
                    if (result.cartInfo.premiumsList && result.cartInfo.premiumsList.length > 0) {
                        total.cartInfo.premiumsList = total.cartInfo.premiumsList.concat(result.cartInfo.premiumsList)
                    }
                    total.cartInfo.totalOriginalPrice += result.cartInfo.totalOriginalPrice;
                    total.cartInfo.totalPrice += result.cartInfo.totalPrice;
                    if (result.limitstock && result.limitstock.length > 0) {
                        total.limitstock = total.limitstock.concat(result.limitstock)
                    }
                    if (result.understock && result.understock.length > 0) {
                        total.understock = total.understock.concat(result.understock)
                    }
                }
                if (got == batchs.length) {
                    callback(total)
                }
            }, i)
        }
    }
};
ec.cart.getCart = function (callback) {
    ec.cart.getCartItems(ec.cart.getCartInfo, callback)
};
ec.cart.getCartBaseInfo = function (cartItems, callback) {
};
ec.cart.getCartBase = function (callback) {
    ec.cart.getCartItems(ec.cart.getCartBaseInfo, callback)
};
ec.cart.buildMicroCartReq = function (cartItems) {
    var orderItemReqArgList = [];
    if (cartItems && cartItems.length > 0) {
        for (var i = 0; i < cartItems.length; i++) {
            var cartItem = cartItems[i];
            var orderitem = {};
            orderitem.itemId = cartItem.skuId;
            orderitem.qty = cartItem.quantity;
            if (cartItem.productType == "1") {
                orderitem.itemType = "S0";
                var gifts2Order = [];
                if (cartItem.giftCartList && cartItem.giftCartList.length > 0) {
                    for (var j = 0; j < cartItem.giftCartList.length; j++) {
                        var aGift = {sbomCode: cartItem.giftCartList[j].skuId};
                        gifts2Order.push(aGift)
                    }
                }
                orderitem.gifts = gifts2Order
            }
            if (cartItem.productType == "8") {
                orderitem.itemType = "S0";
                orderitem.itemProp = {Internal_Purchase: "true"}
            }
            if (cartItem.productType == "6") {
                orderitem.itemType = "S1";
                orderitem.itemProp = {main_skucode: cartItem.mainSkuId}
            }
            if (cartItem.productType == "7") {
                orderitem.itemType = "S6";
                orderitem.itemProp = {main_skucode: cartItem.mainSkuId}
            }
            if (cartItem.productType == "2") {
                orderitem.itemId = cartItem.bundleId;
                orderitem.itemType = "B"
            }
            if (cartItem.productType == "9") {
                orderitem.itemId = cartItem.bundleId;
                orderitem.itemType = "B";
                orderitem.itemProp = {Internal_Purchase: "true"}
            }
            orderItemReqArgList.push(orderitem)
        }
    }
    var jsonReqArg = ec.lang.json.stringify(orderItemReqArgList);
    var date = new Date;
    var data = {};
    data.cartReqJson = jsonReqArg;
    data.t = date.getTime();
    return data
};
ec.cart.getMicroCartBaseInfo = function () {
};
ec.cart.doCache2cart = function (doAfterCache, callback, optional) {
    var cartId = ec.util.cookie.get("cartId");
    var cartAdded = ec.util.cookie.get("cartAdded");
    if (!cartAdded || cartAdded != cartId) {
        ec.util.cookie.set("cartId", null, {expires: -1, domain: "vmall.com"});
        if (doAfterCache) {
            doAfterCache(callback, optional)
        }
        return
    }
    $.ajax({
        url: openApiDomain + "/cart/v1/guest2cart.json?t=" + (new Date).getTime(),
        type: "post",
        dataType: "json",
        timeout: 1e4,
        cache: false,
        beforeSend: function (xhr) {
            xhr.withCredentials = true
        },
        success: function (json) {
            if (doAfterCache) {
                doAfterCache(callback, optional)
            }
        }
    })
};
ec.cart.getMicroCartTotalNumber = function (callback) {
    var optional = null;
    var cartId = ec.util.cookie.get("cartId");
    if (cartId && cartId.length > 0) {
        var isValCas = ec.util.cookie.get("isValCas");
        if (isValCas && "false" == isValCas) {
            $.ajax({url: "/account/load", type: "POST"});
            isValCas = ec.util.cookie.get("isValCas")
        }
        if (ec.account.isLogin()) {
            ec.cart.doCache2cart(ec.cart.getCartTotalNumber, callback, optional)
        } else {
            ec.cart.getCartTotalNumber(callback, optional)
        }
    } else {
        ec.cart.getCartTotalNumber(callback, optional)
    }
};
ec.cart.getMicroCartFromOrder = function (callback) {
    var optional = null;
    var cartId = ec.util.cookie.get("cartId");
    if (cartId && cartId.length > 0) {
        var isValCas = ec.util.cookie.get("isValCas");
        if (isValCas && "false" == isValCas) {
            $.ajax({url: "/account/load", type: "POST"});
            isValCas = ec.util.cookie.get("isValCas")
        }
        if (ec.account.isLogin()) {
            ec.cart.doCache2cart(ec.cart.getCartItemsInternal, callback, optional)
        } else {
            ec.cart.getCartItemsInternal(callback, optional)
        }
    } else {
        ec.cart.getCartItemsInternal(callback, optional)
    }
};
ec.cart.getTotal = function () {
    ec.cart.getMicroCartFromOrder(function (json) {
        var cartInfo = json.data, shopInfo = json.shopInfo, $cartEmpty = $("#minicart-pro-empty"),
            $cartList = $("#minicart-pro-list-block"), $cartSettleup = $("#minicart-pro-settleup");
        if (ec.minicart.microCartTpl) {
            $("#header-cart-total,#micro-cart-total").html(cartInfo.originalTotalNumber || 0);
            if (cartInfo.originalTotalNumber > 0) {
                $("#micro-cart-totalPrice").html("&yen;&nbsp;" + cartInfo.cashPay.toFixed(2));
                ec.minicart.processCheck(cartInfo);
                $("#minicart-pro-list").html(ec.minicart.microCartTpl.parse("microCartList", cartInfo));
                $cartList.show();
                $cartSettleup.show();
                $cartEmpty.hide();
                if (cartInfo.productList.length + cartInfo.bundlerList.length > 5) {
                    $cartList.addClass("minicart-pro-list-scroll")
                } else {
                    $cartList.removeClass("minicart-pro-list-scroll")
                }
            } else {
                $cartEmpty.show();
                $cartList.hide();
                $cartSettleup.hide()
            }
            if (shopInfo) {
                $("#toolbar-orderWaitingHandleCount").html(shopInfo.orderWaitingHandleCount).attr("class", shopInfo.orderWaitingHandleCount <= 0 ? "hide" : "");
                $("#toolbar-couponCount").html(shopInfo.couponCount).attr("class", shopInfo.couponCount <= 0 ? "hide" : "");
                $("#toolbar-newMsgCount").html(shopInfo.newMsgCount).attr("class", shopInfo.newMsgCount <= 0 ? "hide" : "");
                $("#top-couponCount").html(shopInfo.couponCount);
                $("#top-newMsgCount").html(shopInfo.newMsgCount).attr("class", shopInfo.newMsgCount <= 0 ? "hide" : "")
            }
        }
        if (json.enterpriseUser) {
            $("#preferential").html('<a  href="' + domainMain + '/member/enterprise" rel="nofollow"></a>').show();
            $("#li-enterprise").html('<a href="' + domainMain + '/member/enterprise"><span></span></a>').show()
        }
    })
};
ec.cart.changeAdded = function (json) {
    var cartNumber = null;
    if (json && json.cartInfo && json.cartInfo.cartVO) {
        cartNumber = json.cartInfo.cartVO.totalNumber >= 0 ? json.cartInfo.cartVO.totalNumber : cartNumber
    }
    if (json) {
        cartNumber = json.cartNumber >= 0 ? json.cartNumber : cartNumber
    }
    if (cartNumber > 0) {
        ec.util.cookie.set("cartAdded", ec.util.cookie.get("cartId"))
    }
    if (cartNumber == 0) {
        ec.util.cookie.set("cartAdded", null)
    }
};
ec.cart.newDel = function (data, callback, noShowModal) {
    if (!noShowModal) {
        ec.ui.loading.show({modal: false})
    }
    var date = new Date;
    data.t = date.getTime();
    var settings = {
        data: data, dataType: "jsonp", timeout: 1e4, timeoutFunction: function () {
            ec.ui.loading.hide();
            alert("")
        }, successFunction: function (json) {
            ec.cart.changeAdded(json);
            if ("0" != json.retcode) {
                ec.ui.loading.hide();
                ec.showError(json);
                return
            }
            if (callback) {
                callback(json)
            }
            ec.ui.loading.hide();
            return
        }
    };
    settings.url = domainCart + "/newcart/del.json";
    (new ec.ajax).get(settings)
};
ec.cart.setRecover = function (recover) {
    ec.util.cookie.set("cart-recover", recover, {domain: "vmall.com", path: "/"})
};
ec.cart.removeSkuFromRecover = function (skuId, callback) {
    var recover = ec.util.cookie.get("cart-recover");
    if (recover) {
        var rege = new RegExp("," + skuId + ";\\d+,");
        recover = recover.replace(rege, ",");
        ec.cart.setRecover(recover)
    }
    if (callback) {
        callback(recover)
    }
};
ec.cart.jumpToConfirm = function ($skus, $bundles) {
    var orderItemReqArgList = [];
    $skus.each(function () {
        var $tbody = $(this).parent();
        var id = $(this).attr("value");
        var skuCode = $(this).attr("data-scode");
        var qty = $("#quantity-" + id, $tbody).val();
        var type = $("#quantity-" + id, $tbody).attr("data-type");
        var orderitem = {};
        var extendItem = {};
        var accidentItem = {};
        var extendId = $('div[name="extendIds"]', $tbody).attr("data-scode");
        if (extendId) {
            extendItem.itemId = extendId;
            extendItem.qty = qty;
            extendItem.itemType = "S1";
            extendItem.itemProp = {main_skucode: skuCode};
            orderItemReqArgList.push(extendItem)
        }
        var accidentId = $('div[name="accidentIds"]', $tbody).attr("data-scode");
        if (accidentId) {
            accidentItem.itemId = accidentId;
            accidentItem.qty = qty;
            accidentItem.itemType = "S6";
            accidentItem.itemProp = {main_skucode: skuCode};
            orderItemReqArgList.push(accidentItem)
        }
        var $preferIds = $('input[name="preferId"]', $tbody);
        if ($preferIds.length > 0) {
            $preferIds.each(function () {
                var preferItem = {};
                if ($(this).attr("value")) {
                    preferItem.itemId = $(this).attr("value");
                    preferItem.qty = "1";
                    preferItem.itemType = "S0";
                    preferItem.itemSubType = "PREFER";
                    preferItem.mainSkuCode = $(this).attr("mainCode");
                    orderItemReqArgList.push(preferItem)
                }
            })
        }
        if (qty) {
            orderitem.itemId = skuCode;
            orderitem.qty = qty;
            if (type == "1") {
                orderitem.itemType = "S0"
            }
            if (type == "8") {
                orderitem.itemType = "S0";
                orderitem.itemProp = {Internal_Purchase: "true"}
            }
            var $gifts = $('input[name="giftId"]', $tbody);
            if ($gifts.length > 0) {
                var gifts2Order = [];
                $gifts.each(function () {
                    var aGift = {sbomCode: this.value};
                    gifts2Order.push(aGift)
                });
                orderitem.gifts = gifts2Order
            }
            orderItemReqArgList.push(orderitem)
        }
    });
    $bundles.each(function () {
        var $tbody = $(this).parent();
        var id = $(this).attr("value");
        var qty = $("#quantity-bundle-" + id, $tbody).val();
        var type = $("#quantity-bundle-" + id, $tbody).attr("data-type");
        var orderitem = {};
        if (qty) {
            orderitem.itemId = id;
            orderitem.qty = qty;
            if (type == "2") {
                orderitem.itemType = "B"
            }
            if (type == "9") {
                orderitem.itemType = "B";
                orderitem.itemProp = {Internal_Purchase: "true"}
            }
            orderItemReqArgList.push(orderitem)
        }
    });
    var jsonReqArg = ec.lang.json.stringify(orderItemReqArgList);
    setTimeout(function () {
        ec.cart.confirm(1, jsonReqArg)
    }, 500)
};
ec.cart.confirm = function (state, jsonReqArg, orderTag) {
    var $form = $('<form action="' + domainMain + '/order/confirmcart" method="post"></form>');
    $form.append('<input name="orderReqJson" type="hidden" value=\'' + jsonReqArg + "' />");
    $form.append('<input name="CsrfToken" id="CsrfToken" type="hidden" value="' + csrftoken + '">');
    if (state) {
        $form.append('<input name="state" type="hidden" value="' + state + '" />')
    }
    if (orderTag) {
        $form.append('<input name="routingTag" type="hidden" value="' + orderTag + '" />')
    }
    $("body").append($form);
    $form.submit()
};
ec.cart.confirmInterest = function (state, jsonReqArg, interestOrder, orderTag) {
    var $form = $('<form action="' + domainMain + '/order/confirmcart" method="post"></form>');
    $form.append('<input name="orderReqJson" type="hidden" value=\'' + jsonReqArg + "' />");
    $form.append('<input name="CsrfToken" id="CsrfToken" type="hidden" value="' + csrftoken + '">');
    if (state) {
        $form.append('<input name="state" type="hidden" value="' + state + '" />')
    }
    if (orderTag) {
        $form.append('<input name="routingTag" type="hidden" value="' + orderTag + '" />')
    }
    if (interestOrder) {
        $form.append('<input name="interest" type="hidden" value="' + interestOrder + '" />')
    }
    $("body").append($form);
    $form.submit()
};
ec.cart.allConfirm = function (state, jsonReqArg, orderTag, orderAction) {
    var $form = $('<form action="' + domainMain + orderAction + '" method="post"></form>');
    $form.append('<input name="orderReqJson" type="hidden" value=\'' + jsonReqArg + "' />");
    $form.append('<input name="CsrfToken" id="CsrfToken" type="hidden" value="' + csrftoken + '">');
    if (state) {
        $form.append('<input name="state" type="hidden" value="' + state + '" />')
    }
    if (orderTag) {
        $form.append('<input name="routingTag" type="hidden" value="' + orderTag + '" />')
    }
    $("body").append($form);
    $form.submit()
};
ec.cart.allConfirmInterest = function (state, jsonReqArg, orderTag, interestOrder, orderAction) {
    var $form = $('<form action="' + domainMain + orderAction + '" method="post"></form>');
    $form.append('<input name="orderReqJson" type="hidden" value=\'' + jsonReqArg + "' />");
    if (state) {
        $form.append('<input name="state" type="hidden" value="' + state + '" />')
    }
    if (orderTag) {
        $form.append('<input name="routingTag" type="hidden" value="' + orderTag + '" />')
    }
    if (interestOrder) {
        $form.append('<input name="interest" type="hidden" value="' + interestOrder + '" />')
    }
    $("body").append($form);
    $form.submit()
};
ec.cart.coverOrderConfirm = function (UIDesignID, sbomCode, coverServSKU, quantity, extendServiceSKU, exceptionServiceSKU) {
    var $form = $('<form action="' + domainMain + '/order/coverOrderConfirm" method="post"></form>');
    $form.append('<input name="UIDesignID" type="hidden" value=\'' + UIDesignID + "' />");
    $form.append('<input name="CsrfToken" id="CsrfToken" type="hidden" value="' + csrftoken + '">');
    if (sbomCode) {
        $form.append('<input name="sbomCode" type="hidden" value="' + sbomCode + '" />')
    }
    if (coverServSKU) {
        $form.append('<input name="coverServSKU" type="hidden" value="' + coverServSKU + '" />')
    }
    if (quantity) {
        $form.append('<input name="quantity" type="hidden" value="' + quantity + '" />')
    }
    if (extendServiceSKU) {
        $form.append('<input name="extendServiceSKU" type="hidden" value="' + extendServiceSKU + '" />')
    }
    if (exceptionServiceSKU) {
        $form.append('<input name="exceptionServiceSKU" type="hidden" value="' + exceptionServiceSKU + '" />')
    }
    $("body").append($form);
    $form.submit()
};
ec.pkg("ec.base");
ec.base.getTotal = function () {
    $.ajax({
        url: domainMain + "/page/totalInfo.json", dataType: "jsonp", success: function (json) {
            if (json.enterpriseUser) {
                $("#preferential").html('<a href="' + domainMain + '/member/enterprise" rel="nofollow"></a>').show();
                $("#li-enterprise-preferential").html('<a href="' + domainMain + "/member/enterprise\" onclick = \"pushHeaderMsg('','" + domainMain + "/member/enterprise')\"><span></span></a>").show();
                $("#li-enterprise").html('<a href="' + domainMain + '/member/enterprise"><span></span></a>').show()
            }
            if (ec.account.isLogin()) {
                var isAuthCust = ec.util.cookie.get("isAuthCust");
                if ("true" == isAuthCust) {
                    $("#authentication").html("");
                    $("#authentication").html('<i class="icon-authentication icon-authentication-success"></i>&nbsp;');
                    $("#authentication_yes").removeClass().addClass("");
                    $("#authentication_no").removeClass().addClass("hide")
                } else {
                    $("#authentication").html("");
                    $("#authentication").html('<i class="icon-authentication icon-authentication-not"></i>&nbsp;');
                    $("#authentication_yes").removeClass().addClass("hide");
                    $("#authentication_no").removeClass().addClass("");
                    $("#authentication_no").html("");
                    $("#authentication_no").html('<i class="link-non-validated"></i></a>')
                }
            }
        }
    })
};
ec.base.findSearchHotWordUrl = function (v) {
    var actUrl = "";
    for (var swa = 0; swa < ec.search.searchArr.length; swa++) {
        var swal = ec.search.searchArr[swa];
        if (v == swal.word) {
            if (swal.isActivityWords == 1) {
                if (swal.activityUrl == null || swal.activityUrl == "") {
                    actUrl = "/search?keyword=" + encodeURIComponent(v)
                } else {
                    actUrl = swal.activityUrl
                }
            } else {
                actUrl = "/search?keyword=" + encodeURIComponent(v)
            }
        }
    }
    return actUrl
};
var topSearchKeyword = "";

function search(form) {
    var v = $("#search-kw").val();
    if (ec.util.isEmpty(v)) {
        return false
    }
    v = $.trim(v);
    var value = {UID: ec.util.cookie.get("uid"), TID: getPtid(), TIME: getTime(), CONTENT: {searchWord: v, click: "1"}};
    ec.account.dapPushMsg("300090101", value, "click");
    ec.code.addAnalytics({hicloud: true});
    _paq.push(["trackLink", "300090101", "link", value]);
    var searchUrl = ec.base.findSearchHotWordUrl(v);
    if (searchUrl == null || searchUrl == "") {
        window.open("/search?keyword=" + encodeURIComponent(v))
    } else {
        window.open(searchUrl)
    }
    return false
}

(function () {
    var _flag;
    ec.ready(function () {
        $("#ec_ui_confirm_no").unbind("click").click(function () {
            $("#ec_ui_confirm").hide()
        });
        $("#ec_ui_confirm_new_no").unbind("click").click(function () {
            $("#ec_ui_confirm_new").hide()
        });
        $("#ec_ui_tips_yes").unbind("click").click(function () {
            $("#ec_ui_tips").hide()
        })
    });
    ec.ui.confirm = function (dom, msg) {
        var caller = ec.ui.confirm.caller, arguments = caller.arguments;
        if (_flag != null && arguments[arguments.length - 1] == _flag) {
            _flag = null;
            return true
        }
        $("#ec_ui_confirm_msg").html(msg);
        var thix = $(dom), layter = $("#ec_ui_confirm"), offset = thix.offset(),
            top = offset.top - layter.outerHeight(true) - 5, left = offset.left - layter.outerWidth(true) / 2,
            args = [], aLen = arguments.length, dLen = arguments.callee.length;
        for (var i = 0; i < aLen; i++) {
            args.push(arguments[i])
        }
        args[dLen] = _flag = (new Date).getTime();
        $("#ec_ui_confirm_yes").unbind("click").click(function () {
            $("#ec_ui_confirm").hide();
            caller.apply(this, args);
            args = null
        });
        layter.css({top: top, left: left, position: "absolute"}).show();
        layter.css("z-index", "999");
        return false
    };
    ec.ui.confirmNew = function (dom, msg, btnMsgYes, btnMsgNo) {
        var caller = ec.ui.confirmNew.caller, arguments = caller.arguments;
        if (_flag != null && arguments[arguments.length - 1] == _flag) {
            _flag = null;
            return true
        }
        $("#ec_ui_confirm_new_msg").html(msg);
        if (btnMsgYes) {
            $("#ec_ui_confirm_new_yes").attr("title", btnMsgYes);
            $("#ec_ui_confirm_new_yes").html("<span>" + btnMsgYes + "</span>")
        }
        if (btnMsgNo) {
            $("#ec_ui_confirm_new_no").attr("title", btnMsgNo);
            $("#ec_ui_confirm_new_no").html("<span>" + btnMsgNo + "</span>")
        }
        var thix = $(dom), layter = $("#ec_ui_confirm_new"), offset = thix.offset(),
            top = offset.top - layter.outerHeight(true) - 5, left = offset.left - layter.outerWidth(true) / 9,
            args = [], aLen = arguments.length, dLen = arguments.callee.length;
        for (var i = 0; i < aLen; i++) {
            args.push(arguments[i])
        }
        args[dLen] = _flag = (new Date).getTime();
        $("#ec_ui_confirm_new_yes").unbind("click").click(function () {
            $("#ec_ui_confirm_new").hide();
            caller.apply(this, args);
            args = null
        });
        layter.css({top: top, left: left, position: "absolute"}).show();
        return false
    };
    ec.ui.tips = function (dom, msg) {
        $("#ec_ui_tips_msg").html(msg);
        var thix = $(dom), layter = $("#ec_ui_tips"), offset = thix.offset(),
            top = offset.top - layter.outerHeight(true) - 5, left = offset.left - layter.outerWidth(true) / 2;
        layter.css({top: top, left: left, position: "absolute"}).show()
    }
})();
$.extend(ec.form.validator.defaults, {
    errorClass: "error", autoFocus: false, errorFunction: function (obj, options) {
        var css = "icon-error", msg = options.msg[options.type] || options.msg["default"];
        msg = msg.length <= 0 ? "&nbsp;" : msg;
        switch (options.type) {
            case"require":
                css = "icon-warn";
                break
        }
        if (options.msg_ct) {
            $(options.msg_ct).html("<span class='vam " + css + "'>" + msg + "</span>")
        } else {
            var id = (obj.attr("id") || obj.attr("name")) + "-msg";
            $("#" + id).remove();
            obj.after("<span id='" + id + "' class='vam " + css + "'>" + msg + "</span>")
        }
        if (options.autoFocus) obj.focus()
    }, successFunction: function (obj, options) {
        if (options.msg_ct) {
            $(options.msg_ct).html("")
        } else {
            $("#" + (obj.attr("id") || obj.attr("name")) + "-msg").remove()
        }
    }
});
ec.form.validator.register("mobile", function (str, options) {
    if (options.allowEmpty && ec.util.isEmpty(str)) {
        return true
    }
    if (str.length < 11) {
        return false
    }
    return /^1\d{10}$/.test(str)
});
ec.form.validator.register("phone", function (str, options) {
    if (options.allowEmpty && ec.util.isEmpty(str)) {
        return true
    }
    if (str.length < 7) {
        return false
    }
    return /^((0[0-9]{2,3}\-)?[2-9][0-9]{6,7}|((00852|\+852)\-)?([2-3][0-9]{7}))+(\-[0-9]{1,4})?$/.test(str)
});
ec.form.validator.register("mobleOrPhone", function (str, options) {
    if (options.allowEmpty && ec.util.isEmpty(str)) {
        return true
    }
    if (str.length < 11) {
        return false
    }
    return /(^((0[0-9]{2,3}\-)?[2-9][0-9]{6,7}|((00852|\+852)\-)?([2-3][0-9]{7}))+(\-[0-9]{1,4})?$)|(^(\+|00)?((86)?(1[3456789])[0-9]{9}|852[965][0-9]{7})$)/.test(str)
});
ec.form.validator.register("addressCheck", function (str, options) {
    if (options.allowEmpty && ec.util.isEmpty(str)) {
        return true
    }
    if (str == "---") {
        return false
    }
    return true
});

function limitNum(event, ele) {
    var reg = /^(86008686|86860086|00868686|86868686|868686|860086|008686|0086|8686|86)/;
    $(ele).val(function () {
        return $(ele).val().replace(/\D/g, "").replace(reg, "")
    });
    if (/^1\d{10}$/.test($(ele).val())) {
        $(ele).removeClass("error");
        $("#tel-msg").removeClass("label-error").text("");
        $("#vatInvoice-mobile-error").removeClass("report-errors").text("")
    }
}

function checkIEVersion() {
    var browserName = navigator.userAgent;
    if (parseInt(/msie/i.test(browserName) && browserName.match(/msie\s[\d.]+/i)[0].split(" ")[1], 10) <= 8) {
        var html = '<div class="ie8">\t\t\t            <div class="h">\t\t\t                <br>APP\t\t\t            </div>\t\t\t            <div class="code clearfix">\t\t\t                <p class="code1">\t\t\t                    <em></em>\t\t\t                    <span>APP</span>\t\t\t                </p>\t\t\t                <p class="code2">\t\t\t                    <em></em>\t\t\t                    <span></span>\t\t\t                </p>\t\t\t            </div>\t\t\t            <div class="word"></div>\t\t\t            <div class="browser clearfix">\t\t\t                <a href="https://www.google.cn/intl/zh-CN/chrome/browser/desktop/" target="_blank" class="logo-browser-chrome clearfix">\t\t\t                    <em></em>\t\t\t                    <span>chrome</span>\t\t\t                </a>\t\t\t                <a href="https://www.microsoft.com/zh-cn/download/internet-explorer.aspx" target="_blank" class="logo-browser-ie clearfix">\t\t\t                    <em></em>\t\t\t                    <span>IE</span>\t\t\t                </a>\t\t\t            </div>\t\t\t        </div>';
        new ec.box(html, {boxid: "update-box", width: 960, height: 711, showButton: false, zIndex: 700}).open();
        $("body").css("overflow", "hidden")
    }
}

ec.form.validator.register("addressConfirmCheck", function () {
    if ($("#current-address").html() == "---") {
        return false
    } else {
        var form = $("#myAddress-form");
        ec.addr.syncCache(form);
        var province = form.find("input[name='province']").val(), city = form.find("input[name='city']").val(),
            district = form.find("input[name='district']").val(), street = form.find("input[name='street']").val(),
            needL4Addr = form.find("input[name='needL4Addr']").val();
        if ("" != province && "" != city && "" != district) {
            if (needL4Addr == "true" && street == "") {
                return false
            } else {
                return true
            }
        } else {
            return false
        }
    }
    return true
});
ec.form.validator.register("addressContractCheck", function () {
    var form = $("#order-address-add-form");
    var province = form.find("select[name='province'] option:selected").val(),
        city = form.find("select[name='city'] option:selected").val(),
        district = form.find("select[name='district'] option:selected").val(),
        street = form.find("select[name='street'] option:selected").val();
    if ("" != province && "" != city && "" != district) {
        if ("" == street) {
            return false
        } else {
            return true
        }
    } else {
        return false
    }
});
ec.form.validator.register("forbidChar", function (str, options) {
    if (options.allowEmpty && ec.util.isEmpty(str)) {
        return true
    }
    str = str.replace("*", "@"), str = str.replace("--", "@"), str = str.replace("/", "@"), str = str.replace("+", "@"), str = str.replace("'", "@"), str = str.replace("\\", "@"), str = str.replace("$", "@"), str = str.replace("^", "@"), str = str.replace(".", "@"), str = str.replace(";", "@"), str = str.replace("<", "@"), str = str.replace(">", "@"), str = str.replace('"', "@"), str = str.replace("=", "@"), str = str.replace("{", "@"), str = str.replace("}", "@");
    str = str.replace("%", "@");
    str = str.replace("~", "@");
    str = str.replace("&", "@");
    if (str.search(new RegExp("@")) != -1) {
        return false
    }
    return true
});
ec.form.validator.register("invoiceForbidChar", function (str, options) {
    if (options.allowEmpty && ec.util.isEmpty(str)) {
        return true
    }
    str = str.replace("--", "&");
    var invoiceRegex = /^[^\\*\\+\\\\/\\$\\^\\;<>\"=\\{\\}%~&]+$/g;
    var result = invoiceRegex.test(str);
    if (!result) {
        return false
    }
    return result
});
ec.ui.number = function (selector, options) {
    var defaultOpt = {
        max: null,
        min: null,
        showButton: true,
        minusBtn: '<a class="icon-minus vam" href="javascript:;"><span>-</span></a>',
        plusBtn: '<a class="icon-plus vam" href="javascript:;"><span>+</span></a>'
    }, thix = $(selector), options = $.extend(defaultOpt, options), checkNumber = function (e) {
        var currentKey = e.which, val = parseInt(this.value, 10), thisVal = val < 1 ? 1 : val;
        if ((currentKey < 37 || currentKey > 40) && currentKey != 8 && currentKey != 46) {
            if (thisVal > options.max || thisVal < options.min) {
                e.preventDefault();
                return false
            } else {
                if ((currentKey < 48 || currentKey > 57) && (currentKey < 96 || currentKey > 105) && currentKey != 9) {
                    e.preventDefault();
                    return false
                }
            }
        }
    };
    thix.each(function () {
        var opt = $.extend({}, options), inputObj = $(this).css("ime-mode", "disabled");
        var tmp = inputObj.attr("max");
        if (tmp) {
            options.max = opt.max = parseInt(tmp, 10) || opt.max
        }
        tmp = inputObj.attr("min");
        if (tmp) {
            options.min = opt.min = parseInt(tmp, 10) || opt.min
        }
        if (opt.showButton) {
            var minusBtn = $(opt.minusBtn).click(function () {
                var val = inputObj.val() || 0, thisVal = parseInt(val, 10) - 1;
                if (typeof opt.min == "number" && thisVal < opt.min) {
                    return
                }
                inputObj.val(thisVal).trigger("blur")
            }), plusBtn = $(opt.plusBtn).click(function () {
                var val = inputObj.val() || 0, thisVal = parseInt(val, 10) + 1;
                if (typeof opt.max == "number" && thisVal > opt.max) {
                    return
                }
                inputObj.val(thisVal).trigger("blur")
            });
            inputObj.after(plusBtn).before(minusBtn)
        }
        inputObj.data("ovalue", inputObj.val() || 0).keydown(checkNumber).keyup(function () {
            var thisVal = parseInt(this.value || 0);
            if (typeof opt.min == "number" && thisVal < opt.min) {
                this.value = opt.min;
                return
            } else if (typeof opt.max == "number" && thisVal > opt.max) {
                this.value = opt.max;
                return
            }
        }).blur(function () {
            if (typeof opt.onchange === "function") {
                var oldVal = inputObj.data("ovalue"), newVal = this.value || 0,
                    diff = parseInt(newVal, 10) - parseInt(oldVal, 10);
                if (diff == 0) return;
                inputObj.data("ovalue", newVal);
                opt.onchange.call(this, newVal, diff)
            }
        })
    })
};
ec.ui.countdown = function (selector, options) {
    var obj = $(selector), timer = obj.data("countdown"), timeIndex = 0, preTarget, diff,
        diffMs = options.now.getTime() - (new Date).getTime(), diffSecs = 0, getNext = function () {
            if (timeIndex >= options.times.length) return false;
            preTarget = options.times[timeIndex];
            timeIndex++;
            return true
        }, getDiffSec = function () {
            diffSecs = Math.round((preTarget.parseDate("yyyy-MM-dd HH:mm:ss").getTime() - (new Date).getTime() - diffMs) / 1e3);
            diffSecs = diffSecs <= 0 ? 0 : diffSecs;
            return diffSecs
        }, render = function () {
            diffSecs--;
            if (diffSecs <= 0) {
                diffSecs = 0
            }
            diff = {
                day: Math.floor(diffSecs / (24 * 60 * 60)),
                hour: options.html.indexOf("{#day}") >= 0 ? Math.floor(diffSecs / 60 / 60) % 24 : Math.floor(diffSecs / 60 / 60),
                minute: Math.floor(diffSecs / 60) % 60,
                second: diffSecs % 60
            };
            var html = options.html.replace(/{#day}/g, diff.day).replace(/{#hours}/g, diff.hour > 9 ? diff.hour : "0" + diff.hour).replace(/{#minutes}/g, diff.minute > 9 ? diff.minute : "0" + diff.minute).replace(/{#seconds}/g, diff.second > 9 ? diff.second : "0" + diff.second);
            obj.html(html);
            return diffSecs <= 0 ? false : true
        };
    if (!options.times) {
        options.times = [options.endTime]
    }
    clearInterval(timer);
    while (getNext()) {
        if (getDiffSec() <= 0) continue;
        break
    }
    if (!render()) {
        return
    }
    timer = setInterval(function () {
        if (!render()) {
            if (options.callback) {
                options.callback(options)
            }
            if (!getNext()) {
                clearInterval(timer)
            } else {
                getDiffSec()
            }
        }
    }, 1e3);
    obj.data("countdown", timer)
};
(function () {
    var _window = $(window), _binded = false,
        _doc = document.compatMode == "CSS1Compat" ? document.documentElement : document.body, _scrollTopSrart = 0,
        _scrollTopEnd = 0, _clientHeight, _imgList = [], _timer, _renderImg = function (img) {
            var top = img.offset().top - 300, pos = top + img.height() + 600;
            if (top >= _scrollTopSrart && top <= _scrollTopEnd || pos >= _scrollTopSrart && pos <= _scrollTopEnd) {
                img.attr("src", img.attr("data-lazy-src"));
                img.removeAttr("data-lazy-src");
                return true
            }
            return false
        };
    _bindEvent = function () {
        var scrollEvent = function () {
            clearTimeout(_timer);
            _timer = setTimeout(function () {
                _scrollTopSrart = _window.scrollTop();
                _scrollTopEnd = _scrollTopSrart + _clientHeight;
                var img;
                for (var i = 0; i < _imgList.length; i++) {
                    img = _imgList[i];
                    if (_renderImg(img)) {
                        _imgList.splice(i, 1);
                        i--
                    }
                }
                if (!_imgList || _imgList.length == 0) {
                    _window.unbind("scroll", scrollEvent);
                    _window.unbind("resize", resizeEvent)
                }
            }, 100)
        }, resizeEvent = function (event) {
            _clientHeight = _doc.clientHeight
        };
        _window.bind("scroll", scrollEvent);
        _window.bind("resize", resizeEvent);
        _clientHeight = _doc.clientHeight;
        _scrollTopSrart = _window.scrollTop();
        _scrollTopEnd = _scrollTopSrart + _clientHeight
    };
    ec.ui.lazyLoad = function (selector) {
        if (!_binded) {
            _bindEvent();
            _binded = true
        }
        $(selector).each(function () {
            if (this.tagName != "IMG") return;
            var thix = $(this);
            if (thix.attr("data-lazy-src")) {
                if (!_renderImg(thix)) {
                    thix.attr("src", ol.libPath + "../../images/echannel/loading/mask.png");
                    _imgList.push(thix)
                }
            }
        })
    }
})();
ec.ready(function () {
    ec.ui.lazyLoad($("body").children(".home-channel-menu,.layout,.g,.home-channel-container,.channel-floor,.home-channel-floor").find("img"));
    ec.ui.hrefSetTime()
});
ec.showError = function (json) {
    if (json.code == "login") {
        alert("");
        location.reload();
        return false
    }
    alert(json.msg)
};
ec.load("ajax", {loadType: "lazy"});
(function () {
    var _init = function () {
        var _vb = ec.form.validator.bind, content = $("#surveryContent"), contact = $("#surveryContact"),
            code = $("#surveryVerify");
        _vb(content, {
            type: ["require", "length", "forbidChar"],
            validOnChange: true,
            msg_ct: "#errMsg",
            max: 200,
            min: 5,
            msg: {require: "", length: "5~200", forbidChar: ""}
        });
        _vb(contact, {
            type: ["length"],
            validOnChange: true,
            msg_ct: "#errMsg",
            min: 2,
            max: 100,
            msg: {length: ""}
        });
        _vb(code, {type: ["require"], validOnChange: true, msg_ct: "#errMsg", msg: {require: ""}});
        if (ec.account.isLogin()) {
            contact.val(ec.util.escapeHtml(ec.account.email) || ec.util.escapeHtml(ec.account.mobile) || ec.account.loginName)
        }
        ec.form.input.label(contact, "");
        ec.form.input.label(content, "")
    };
    ec.survery = {
        open: function () {
            if (_init) {
                _init();
                _init = null
            }
            $("#footerToken").attr("src", openApiDomain + "/csrftoken.js?random=" + (new Date).getTime());
            var obj = $("#survery-box");
            var innerWidth = $(window).width();
            var innerHeight = $(window).height();
            var width = obj.width();
            var height = obj.height();
            var mask = document.createElement("div");
            mask.className = "mask-new";
            mask.style.width = innerWidth + "px";
            mask.style.height = innerHeight + "px";
            mask.style.background = "#000";
            mask.style.position = "fixed";
            mask.style.top = 0;
            mask.style.left = 0;
            mask.style.zIndex = 501;
            mask.style.opacity = .4;
            mask.style.filter = "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
            document.body.appendChild(mask);
            ec.survery.reloadCode();
            $("#survery-box").css({
                position: "fixed",
                left: innerWidth / 2 - width / 2 + "px",
                top: innerHeight / 2 - height / 2 + "px",
                "z-index": 999
            }).show();
            $(window).resize(function () {
                innerWidth = $(window).width();
                innerHeight = $(window).height();
                $("#survery-box").css({
                    left: innerWidth / 2 - width / 2 + "px",
                    top: innerHeight / 2 - height / 2 + "px"
                })
            })
        }, close: function () {
            ol.ui.masker.unmask();
            $(".mask-new").remove();
            $("#survery-box").hide()
        }, submit: function () {
            var form = $("#form-feedback");
            if (!ec.form.validator(form, true)) {
                return false
            }
            ec.loadCsrfToken(function () {
                $.ajax({
                    type: "get",
                    url: domainMain + "/feedback.json",
                    dataType: "json",
                    timeout: 1e4,
                    async: true,
                    data: {
                        type: $("#surverytype").val(),
                        content: $("#surveryContent").val(),
                        contact: $("#surveryContact").val(),
                        code: $("#surveryVerify").val()
                    },
                    beforeSend: function (xhr) {
                        xhr.withCredentials = true;
                        xhr.setRequestHeader("CsrfToken", csrftoken)
                    },
                    success: function (json) {
                        if (!json.success) {
                            ec.survery.reloadCode();
                            $("#surveryVerify").val("");
                            $("#errMsg").html('<span class="vam icon-warn">' + json.msg + "</span>");
                            return
                        }
                        alert("");
                        ec.survery.close();
                        $("#surveryContent,#surveryVerify").val("");
                        return
                    }
                })
            });
            return false
        }, reloadCode: function () {
            gid("surveryVerifyImg").src = domainMain + "/feedback/randomCode?_t=" + (new Date).getTime()
        }, validate: function () {
            $.ajax({
                type: "get",
                url: domainMain + "/feedback/validRandomCode?_t=" + (new Date).getTime(),
                timeout: 1e4,
                dataType: "jsonp",
                data: {code: $("#surveryVerify").val()},
                success: function (json) {
                    if (json.success) {
                        return
                    }
                    gid("surveryVerifyImg").src = domainMain + "/feedback/randomCode?_t=" + (new Date).getTime();
                    $("#surveryVerify").val("");
                    return
                }
            })
        }
    }
})();
$(function () {
    var win = $(window), timer, $btn = $("#hungBar-top"), setTime = function () {
        $btn.stop();
        if (win.scrollTop() > 1200) {
            $btn.fadeTo(20, 1)
        } else {
            $btn.fadeOut(20)
        }
        timer = null
    };
    win.scroll(function () {
        timer = setTimeout(setTime, 50)
    });
    setTime();
    $(".hungBar-top").bind("click", function () {
        $("html,body").animate({scrollTop: "0px"}, 400)
    })
});
(function () {
    ec.ui.hrefSetTime = function () {
        var time = (new Date).getTime();
        try {
            $("a[timeType=timestamp]").each(function () {
                var obj = $(this);
                obj.attr("href", obj.attr("href").replace(/timestamp/g, time))
            })
        } catch (err) {
        }
    }
})();
ec.pkg("ec.encipher");
ec.encipher.base = 10;
ec.encipher.bigPowMod = function (a, b, c) {
    a = str2bigInt(a, ec.encipher.base);
    b = str2bigInt(b, ec.encipher.base);
    c = str2bigInt(c, ec.encipher.base);
    var result = powMod(a, b, c);
    result = bigInt2str(result, ec.encipher.base);
    return result
};
ec.encipher.randomInt = function (bits) {
    var result = randBigInt(bits, 0);
    return bigInt2str(result, ec.encipher.base)
};
ec.encipher.getServerKey = function () {
    $.ajax({
        type: "get",
        url: "/system/getKey.json?t=" + (new Date).getTime(),
        async: false,
        dataType: "json",
        timeout: 1e4,
        success: function (json) {
            if (!json.success) {
                return
            }
            ec.util.cookie.set("sc_p", json.pubkey)
        }
    })
};
ec.encipher.getEncryptData = function (url, argument, callback) {
    var result = "";
    var dh_prime = "13232376895198612407547930718267435757728527029623408872245156039757713029036368719146452186041204237350521785240337048752071462798273003935646236777459223",
        dh_g = "5421644057436475141609648488325705128047428394380474376834667300766108262613900542681289080713724597310673074119355136085795982097390670890367185141189796",
        b = ec.encipher.randomInt(128), B = ec.encipher.bigPowMod(dh_g, b, dh_prime),
        pubkey = ec.util.cookie.get("sc_p"), K, requesturl;
    if (argument == "" || argument == null) requesturl = url + "?pubkey=" + B + "&seType=r" + "&t=" + (new Date).getTime(); else requesturl = url + "?argument=" + argument + "&pubkey=" + B + "&seType=r" + "&t=" + (new Date).getTime();
    $.ajax({
        type: "get", url: requesturl, dataType: "json", async: false, timeout: 1e4, success: function (json) {
            if (!json.success) {
                return
            }
            K = ec.encipher.bigPowMod(pubkey, b, dh_prime);
            result = callback(json.data, K)
        }
    });
    return result
};
ec.encipher.getKey = function (callback) {
    var dh_prime = "13232376895198612407547930718267435757728527029623408872245156039757713029036368719146452186041204237350521785240337048752071462798273003935646236777459223",
        dh_g = "5421644057436475141609648488325705128047428394380474376834667300766108262613900542681289080713724597310673074119355136085795982097390670890367185141189796",
        b = ec.encipher.randomInt(128), B = ec.encipher.bigPowMod(dh_g, b, dh_prime), K;
    $.ajax({
        type: "get",
        url: domainShoppingConfig + "/member/smyAddresses.json?pubkey=" + B + "&seType=r" + "&t=" + (new Date).getTime(),
        dataType: "json",
        async: false,
        timeout: 1e4,
        beforeSend: function (xhr) {
            xhr.withCredentials = true
        },
        success: function (json) {
            if (!json.success) {
                return
            }
            ec.util.cookie.set("sc_p", json.pubkey);
            K = ec.encipher.bigPowMod(json.pubkey, b, dh_prime);
            callback(json.shoppingConfigList, json.randomFlag, K)
        }
    })
};
ec.pkg("ec.addr");
ec.addr.list = function (callback) {
    $.ajax({
        type: "get",
        url: domainShoppingConfig + "/address/list.json?t=" + (new Date).getTime(),
        dataType: "json",
        async: false,
        timeout: 1e4,
        beforeSend: function (xhr) {
            xhr.withCredentials = true;
            xhr.setRequestHeader("CsrfToken", csrftoken)
        },
        success: function (json) {
            if (!json.success) {
                return
            }
            if (json.shoppingConfigList.length == 0) {
                $("#base-table").find(".report-errors").show()
            } else {
                $("#base-table").find(".report-errors").hide()
            }
            callback(json.shoppingConfigList, json.randomFlag)
        }
    })
};
ec.addr.syncCache = function (formObj) {
    formObj.find("input[name=province]").attr("value", formObj.find("input[name=provinceG]").attr("value"));
    formObj.find("input[name=city]").attr("value", formObj.find("input[name=cityG]").attr("value"));
    formObj.find("input[name=district]").attr("value", formObj.find("input[name=districtG]").attr("value"));
    formObj.find("input[name=street]").attr("value", formObj.find("input[name=streetG]").attr("value"));
    formObj.find("input[name=needL4Addr]").attr("value", formObj.find("input[name=needL4AddrG]").attr("value"))
};
ec.addr.save = function (form, options) {
    var formObj = $(form);
    var id = formObj.find("input[name=id]").val();
    var url = "/address/add.json";
    var _method = "post";
    ec.addr.syncCache(formObj);
    var province = formObj.find("input[name=province]").val();
    var city = formObj.find("input[name=city]").val();
    var district = formObj.find("input[name=district]").val();
    var street = formObj.find("input[name=street]").val();
    var needL4Addr = formObj.find("input[name='needL4Addr']").val();
    var mobileObj = formObj.find("input[name=mobile]");
    var phoneObj = formObj.find("input[name=phone]");
    if (mobileObj.hasClass("error") || phoneObj.hasClass("error")) {
        return false
    }
    if (!ec.form.validator(formObj, false)) {
        return false
    }
    var mobile = $.trim(formObj.find("input[name=mobile]").val());
    var phone = $.trim(formObj.find("input[name=phone]").val());
    if (ec.util.isEmpty(mobile)) {
        return false
    }
    if (options.afterCheck) {
        options.afterCheck(id)
    }
    if (options.type != "add") {
        url = "/address/modify/" + id + ".json"
    }
    var consignee = formObj.find("input[name=consignee]").val();
    var address = formObj.find("input[name=address],textarea[name=address]").val();
    var zipCode = formObj.find("input[name=zipCode]").val();
    var randomFlag = formObj.find("input[name=randomFlag]").val();
    var data = {};
    data.consignee = consignee;
    data.province = province;
    data.city = city;
    data.district = district;
    data.street = street;
    data.address = address;
    data.zipCode = zipCode;
    data.mobile = mobile;
    data.phone = phone;
    data.randomFlag = randomFlag;
    var $defaultFlag = formObj.find("input[name=defaultFlag]");
    if ($defaultFlag.length == 1 && $defaultFlag[0].checked && !$defaultFlag[0].disabled) {
        data.defaultFlag = $defaultFlag.val()
    }
    data.t = (new Date).getTime();
    data.CsrfToken = csrftoken;
    $.ajax({
        url: domainShoppingConfig + url + "?_method=" + _method,
        type: "post",
        data: data,
        async: false,
        dataType: "json",
        timeout: 2e4,
        beforeSend: function (xhr) {
            xhr.withCredentials = true
        },
        success: function (json) {
            if (!json.success) {
                ec.showError(json);
                return
            }
            if (options.successFunction) {
                options.successFunction(json.shoppingConfig, form)
            }
        },
        error: function () {
            alert("")
        }
    });
    return false
};
ec.addr.setDefault = function (id, options) {
    var B = ec.util.cookie.get("sc_b");
    $.ajax({
        url: domainShoppingConfig + "/address/setDefault.json?id=" + id + "&t=" + (new Date).getTime(),
        type: "get",
        async: false,
        dataType: "json",
        beforeSend: function (xhr) {
            xhr.withCredentials = true;
            xhr.setRequestHeader("CsrfToken", csrftoken)
        },
        success: function (json) {
            if (!json.success) {
                ec.showError(json);
                return
            }
            if (options.successFunction) {
                options.successFunction(id)
            }
        },
        error: function () {
            alert("")
        }
    })
};
ec.addr.getAll = function (options) {
    $.ajax({
        url: domainShoppingConfig + "/member/myAddresses.json",
        type: "get",
        async: false,
        dataType: "json",
        timeout: 2e4,
        beforeSend: function (xhr) {
            xhr.withCredentials = true
        },
        success: function (json) {
            if (!json.success) {
                ec.showError(json);
                return
            }
            if (options.successFunction) {
                options.successFunction(json)
            }
        },
        error: function () {
            alert("")
        }
    })
};
ec.addr.del = function (id, options) {
    $.ajax({
        url: domainShoppingConfig + "/address/del/" + id + ".json",
        type: "get",
        async: false,
        dataType: "json",
        timeout: 1e4,
        beforeSend: function (xhr) {
            xhr.withCredentials = true;
            xhr.setRequestHeader("CsrfToken", csrftoken)
        },
        success: function (json) {
            if (!json.success) {
                ec.showError(json);
                if (json.code == "default") {
                    if (options.deleteDefault) {
                        options.deleteDefault(id)
                    }
                }
                return
            }
            if (options.successFunction) {
                options.successFunction(id)
            }
        },
        error: function () {
            alert("")
        }
    })
};
ec.pkg("ec.prescription");
ec.prescription.getEstimateGetOrderTime = function (callback, distinctId, price, invoiceonfig) {
    $.ajax({
        url: "/order/estimateTime.json?d=" + distinctId + "&p=" + price + "&i=" + invoiceonfig,
        dataType: "jsonp",
        timeout: 2e4,
        jsonpCallback: "jsonpEstimate",
        timeout: function () {
            callback(null, true)
        },
        beforeSend: function () {
            ec.ui.loading.show({modal: false})
        },
        complete: ec.ui.loading.hide,
        success: function (json) {
            callback(json.info, false)
        },
        error: function () {
            callback(null, true)
        }
    })
};
ec.prescription.getEstimateGetOrderTime2 = function (callback, distinctId, price, invoiceonfig, skuCodeList, countTemp) {
    $.ajax({
        url: "/order/estimateArrivalTime.json?d=" + distinctId + "&p=" + price + "&i=" + invoiceonfig + "&l=" + skuCodeList + "&k=" + countTemp,
        dataType: "jsonp",
        timeout: 2e4,
        jsonpCallback: "jsonpEstimate",
        timeout: function () {
            callback(null, true)
        },
        success: function (json) {
            callback(json, false)
        },
        error: function () {
            callback(null, true)
        }
    })
};
ec.prescription.queryPreDeliveryAndArrival = function (callback, districtId, price, invoiceType, sbomCode) {
    $.ajax({
        url: "/order/queryPreDeliveryAndArrival.json",
        type: "post",
        data: {districtId: districtId, price: price, invoiceType: invoiceType, sbomCode: sbomCode},
        dataType: "jsonp",
        timeout: 2e4,
        jsonpCallback: "jsonpEstimate",
        timeout: function () {
            callback(null, true)
        },
        success: function (json) {
            callback(json, false)
        },
        error: function () {
            callback(null, true)
        }
    })
};
getPointBalance = function () {
    $.ajax({
        url: openApiDomain + "/point/queryUserPointBalanceDetail.json",
        data: {},
        timeout: 1e4,
        dataType: "json",
        beforeSend: function (xhr) {
            xhr.withCredentials = true
        },
        success: function (json) {
            if (json.resultCode != "200000") {
                $("#newPointlogin_status").hide();
                return
            }
            json = json.data;
            var pointBlance = json.pointBlance;
            $("#userPointBalance").text(pointBlance);
            if (parseInt(pointBlance) > parseInt(999)) {
                $("#balanceicon_privilege").empty().html('<a href="/member/newpoint?t=' + (new Date).getTime() + '" target="_blank">' + 999 + "+</a>")
            } else {
                $("#balanceicon_privilege").empty().html('<a href="/member/newpoint?t=' + (new Date).getTime() + '" target="_blank">' + pointBlance + "</a>")
            }
            $("#balanceicon_myCenter").empty().html(pointBlance);
            $("#balanceicon_myCenter").removeClass("p-price-no")
        }
    })
};
ec.getLength = function (str) {
    if (str == null) return 0;
    if (typeof str != "string") {
        str += ""
    }
    return str.replace(/[^\x00-\xff]/g, "01").length
};
ec.isChina = function (s) {
    var patrn = /[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi;
    if (!patrn.exec(s)) {
        return false
    } else {
        return true
    }
};
ec.cutstr = function (str, len) {
    var str_length = 0;
    var str_len = 0;
    str_cut = new String;
    str_len = str.length;
    if (!ec.isChina(str)) {
        len = len + 6
    }
    for (var i = 0; i < str_len; i++) {
        a = str.charAt(i);
        str_length++;
        if (escape(a).length > 4) {
            str_length++
        }
        str_cut = str_cut.concat(a);
        if (str_length >= len) {
            str_cut = str_cut.concat("...");
            return str_cut
        }
    }
    if (str_length < len) {
        return str
    }
};
ec.checkBrowerIE = function () {
    var ua = window.navigator.userAgent;
    if (!!window.ActiveXObject || "ActiveXObject" in window || ua.indexOf("MSIE") != -1 || ua.indexOf("rv:") != -1) {
        return true
    } else {
        return false
    }
};
ec.freemarkerDecode = function (sourceStr) {
    sourceStr = sourceStr.replaceAll("&apos;", "'");
    sourceStr = sourceStr.replaceAll("&amp;", "&");
    sourceStr = sourceStr.replaceAll("&quot;", '"');
    sourceStr = sourceStr.replaceAll("&nbsp;", " ");
    sourceStr = sourceStr.replaceAll("&lt;", "<");
    sourceStr = sourceStr.replaceAll("&gt;", ">");
    sourceStr = sourceStr.replaceAll("\t", "&nbsp;&nbsp;");
    return sourceStr
};
ec.searchHistoryUnique = function (sourceHis) {
    var new_arr = [];
    for (var i = 0; i < sourceHis.length; i++) {
        var items = sourceHis[i];
        if ($.inArray(items, new_arr) == -1) {
            new_arr.push(items)
        }
    }
    return new_arr
};
ec.pkg("ec.search");
var searchHistoryMaxLength = 48;
ec.search.querySearchHistory = function () {
    (new ec.ajax).get({
        url: "/searchHistory.json?t=" + (new Date).getTime(),
        type: "get",
        dateType: "json",
        timeout: 1e4,
        timeoutFunction: function () {
        },
        successFunction: function (json) {
            if (json.success != undefined && !json.success) {
                return
            }
            var hisList = json.searchHistoryList;
            var html = [];
            var newSearchHistoryMaxLength;
            for (var j = 0; j < hisList.length; j++) {
                var hisKeyword = hisList[j];
                var hisKeywordLen = ec.getLength(hisKeyword);
                var encoceText = encodeURIComponent(hisKeyword);
                var searchWordUrl = ec.base.findSearchHotWordUrl(hisKeyword);
                if (searchWordUrl == null || searchWordUrl == "") {
                    html.push('<li><a href="/search?keyword=' + encoceText + '" target="_blank" data-value="' + encoceText + '">')
                } else {
                    html.push('<li><a href="' + searchWordUrl + '" target="_blank" data-value="' + encoceText + '">')
                }
                if (hisKeywordLen > searchHistoryMaxLength) {
                    html.push($("<div/>").text(ec.cutstr(hisKeyword, searchHistoryMaxLength)).html())
                } else {
                    html.push($("<div/>").text(hisKeyword).html())
                }
                html.push("</a></i>")
            }
            $("#search-history-list").html(html.join(""));
            $("#search-history").show();
            if ($("#search-history").is(":visible") || $(".autocomplete").is(":visible")) {
                $("#search-bar-form").addClass("hover")
            } else {
                $("#search-bar-form").removeClass("hover")
            }
        },
        errorFunction: function (json) {
        }
    })
};
ec.search.deleteSearchHistory = function () {
    (new ec.ajax).get({
        url: "/search/clearUp.json?t=" + (new Date).getTime(),
        type: "get",
        dateType: "json",
        timeout: 1e4,
        timeoutFunction: function () {
        },
        successFunction: function (json) {
            if (json.success != undefined && !json.success) {
                return
            }
        },
        errorFunction: function (json) {
        }
    })
};
ec.account.privilege_updateProgress = function (max, min, totalPoint, gradeCode) {
    if (max >= 0 && min >= 0 && totalPoint >= 0) {
        var v_high = max, v_low = min, v_curr = totalPoint, per = (v_curr - v_low) / (v_high - v_low), _deg = 0;
        if (parseInt(v_curr) >= parseInt(v_high)) {
            $(".canvas-left div").css({transform: "rotateZ(0deg)", background: "#F05C20"});
            $(".canvas-right div").css({transform: "rotateZ(-39deg)"})
        } else {
            if (per > .5) {
                _deg = 280 * per - 320;
                $(".canvas-left div").css({transform: "rotateZ(0deg)"});
                $(".canvas-right div").css({transform: "rotateZ(" + _deg + "deg)"});
                if (per > .7) {
                    $(".canvas-left div").css({background: "#F05C20"})
                } else {
                    _deg = _deg + 180;
                    $(".canvas-left div").css({
                        transform: "rotateZ(" + _deg + "deg)",
                        background: "-webkit-gradient(linear, 0 bottom, right 0, from(#F05C20), to(#F58555))"
                    });
                    $(".canvas-right div").css({background: "-webkit-gradient(linear, 0 bottom, right 0, from(#F58555), to(#F05C20))"})
                }
            } else {
                if (per < .01 && per > 0) {
                    per = .01
                }
                _deg = 265 * per - 125;
                $(".canvas-left div").css({
                    transform: "rotateZ(" + _deg + "deg)",
                    background: "-webkit-gradient(linear, 0 bottom, 0 0, from(#F05C20), to(#F58555))"
                });
                $(".canvas-right div").css({transform: "rotateZ(-180deg)"})
            }
        }
    }
    var i = $("#user-vip-level-tips");
    if (gradeCode != null) {
        switch (gradeCode) {
            case 0:
                vipColor = "#999";
                i.attr("class", "icon-vip-level-0");
                break;
            case 1:
                vipColor = "#01abdf";
                i.attr("class", "icon-vip-level-1");
                break;
            case 2:
                vipColor = "#24ca43";
                i.attr("class", "icon-vip-level-2");
                break;
            case 3:
                vipColor = "#ffb710";
                i.attr("class", "icon-vip-level-3");
                break;
            case 4:
                vipColor = "#fc5d21";
                i.attr("class", "icon-vip-level-4");
                break;
            case 5:
                vipColor = "#fc3784";
                i.attr("class", "icon-vip-level-5");
                break;
            default:
                vipColor = "#999";
                i.attr("class", "icon-vip-level-0");
                break
        }
    }
};

function getPtid() {
    var puid = ec.util.cookie.get("uid");
    var ptid = ec.util.cookie.get("deviceid");
    if (puid != "" && puid != null) {
        return ptid + "_" + puid
    } else {
        return ptid
    }
}

function getTime() {
    var date = new Date;
    var y = date.getFullYear();
    var m = date.getMonth() + 1;
    m = m < 10 ? "0" + m : m;
    var d = date.getDate();
    d = d < 10 ? "0" + d : d;
    var h = date.getHours();
    h = h < 10 ? "0" + h : h;
    var minute = date.getMinutes();
    var second = date.getSeconds();
    minute = minute < 10 ? "0" + minute : minute;
    second = second < 10 ? "0" + second : second;
    var time = "" + y + m + d + h + minute + second;
    return time
}

function pushBottonMsg(buttonName, num, SKUCode, packagecode, packageSKUCode, key, isGift) {
    var value = {
        UID: ec.util.cookie.get("uid"),
        TID: getPtid(),
        TIME: getTime(),
        CONTENT: {
            buttonName: buttonName,
            number: num,
            SKUCode: SKUCode,
            packagecode: packagecode,
            packageSKUCode: packageSKUCode,
            click: "1"
        }
    };
    if (key == "300020501") {
        value = {
            UID: ec.util.cookie.get("uid"),
            TID: getPtid(),
            TIME: getTime(),
            CONTENT: {
                buttonName: buttonName,
                SKUCode: SKUCode,
                packagecode: packagecode,
                packageSKUCode: packageSKUCode,
                click: "1"
            }
        };
        if (isGift) {
            value.CONTENT.giftbuy = "1"
        }
    }
    ec.account.dapPushMsg(key, value, "click");
    ec.code.addAnalytics({hicloud: true});
    _paq.push(["trackLink", key, "link", value])
}

function checkMiniExtendProQuantity(cartVo) {
    var cartItemList = cartVo.itemInfos;
    for (var i = 0; i < cartItemList.length; i++) {
        var skuId = "";
        var otherList = cartItemList[i].subItems;
        if (otherList && otherList.length > 0) {
            for (var j = 0; j < otherList.length; j++) {
                skuId += otherList[j].skuId + ","
            }
            var skuList = check(skuId);
            if (skuList.length > 0) {
                for (var m = 0; m < skuList.length; m++) {
                    var s = 0;
                    for (var n = 0; n < skuList.length; n++) {
                        if (!skuList[n].hasInventory && skuList[n].skuId == otherList[m].skuId) {
                            otherList[m].Inventory = "false";
                            break
                        }
                    }
                }
            }
            cartItemList[i].subItems = otherList
        }
    }
    cartVo.itemInfos = cartItemList;
    return cartVo
}

function check(skuIds) {
    var skuList;
    $.ajax({
        url: "/product/realInventory.json?t=" + (new Date).getTime(),
        type: "get",
        dataType: "json",
        async: false,
        data: {skuids: skuIds, flag: "false"},
        timeout: 1e4,
        success: function (json) {
            var flag = true;
            if (json.success) {
                skuList = json.skuInventoryList
            } else {
                console.log("/product/realInventory.json")
            }
        },
        error: function () {
        }
    });
    return skuList
}

function safeStr(str) {
    if (str == null) {
        return
    }
    return str.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;")
}

ec.account.dapPushMsg = function (key, value, type) {
    _paq.push(["setTrackerUrl", dapDomain + "/dap/report"]);
    var orderCode = (ec.order && ec.order.orderCode ? ec.order.orderCode : "") + "";
    _paq.push(["setSiteId", "www.vmall.com"]);
    if (type == "view") {
        _paq.push(["setCustomVariable", 1, "cid", ec.util.cookie.get("cps_id") || "", "page"]);
        _paq.push(["setCustomVariable", 2, "direct", ec.util.cookie.get("cps_dap_redirect") || "", "page"]);
        _paq.push(["setCustomVariable", 4, "wi", ec.util.cookie.get("cps_wi") || "", "page"]);
        _paq.push(["trackPageView"])
    } else if (type == "click") {
        _paq.push(["setCustomVariable", 1, "cid", ec.util.cookie.get("cps_id") || "", "page"]);
        _paq.push(["setCustomVariable", 2, "direct", ec.util.cookie.get("cps_dap_redirect") || "", "page"]);
        _paq.push(["setCustomVariable", 3, "orderid", orderCode, "page"]);
        _paq.push(["setCustomVariable", 4, "wi", ec.util.cookie.get("cps_wi") || "", "page"]);
        _paq.push(["setCustomVariable", 1, "uid", (ec.util.cookie.get("uid") ? ec.util.cookie.get("uid") : "") || "", "visit"]);
        _paq.push(["setCustomVariable", 10, "uid", (ec.util.cookie.get("uid") ? ec.util.cookie.get("uid") : "") || "", "visit"]);
        _paq.push(["trackLink", key, "link", value])
    }
    ec.util.cookie.set("cps_dap_redirect", null, {expires: -1, domain: "vmall.com"});
    ec.load({url: "https://res.vmallres.com/bi/hianalytics.js", type: "js", loadType: "lazy"})
};
ec.loadJs = function (url, callback) {
    var target = document.getElementsByTagName("script")[0] || document.head;
    var script = document.createElement("script");
    script.onload = callback;
    script.src = url;
    target.parentNode.insertBefore(script, target)
};
ec.loadCsrfToken = function (callback) {
    if ("string" === typeof csrftoken && csrftoken > "") {
        callback()
    } else {
        ec.loadJs(openApiDomain + "/csrftoken.js?" + Math.random(), callback)
    }
};
"use strict";
var Slider = function (a) {
    this.i = 0;
    this.objid = a.objid || null;
    this.preclassname = a.preclassname || ".btn-prev";
    this.nextclassname = a.nextclassname || ".btn-next";
    this.listname = a.listname || ".grid-list";
    this.listitem = a.listitem || "li";
    this.shownum = a.shownum || 5.5;
    this.type = a.type || 1;
    this.autoplay = a.autoplay || false;
    this.offset = a.offset || 0
};
Slider.prototype = {
    init: function () {
        var b = this;
        var a = b.set();
        if (b.autoplay) {
            b.auto(a)
        } else {
            b.next(a);
            b.pre(a)
        }
    }, auto: function (e) {
        var d = this, c = null;
        $(d.listname).find(d.listitem).eq(0).clone().appendTo(d.listname);
        e.len += 1;
        var b = (e.itemHeight) * (e.len - 1), a = function () {
            d.i++;
            if (Math.abs(parseInt(e.$grid.css("margin-top"))) == b) {
                e.$grid.css("margin-top", 0);
                d.i = 1
            }
            e.$grid.animate({"margin-top": "-" + (d.i * e.itemHeight * d.shownum) + "px"}, 500)
        };
        if (d.autoplay) {
            c = setInterval(a, 2000);
            e.$grid.hover(function () {
                clearInterval(c)
            }, function () {
                c = setInterval(a, 2000)
            })
        }
    }, set: function () {
        var e = this, h = $(e.objid + " " + e.listitem), j = $(e.objid + " " + e.listname),
            i = $(e.objid + " " + e.preclassname), b = $(e.objid + " " + e.nextclassname), f = h.length,
            g = h.outerWidth(), a = h.outerHeight(), d = Math.ceil(f / e.shownum), c = 0;
        switch (e.type) {
            default:
            case 1:
                j.css("width", (g + 1) * f + "px");
                break;
            case 2:
                j.css("height", (a) * f + "px");
                break;
            case 3:
                g = g + 20;
                j.css("width", (g) * f + "px");
                break;
            case 4:
                g = g + 50;
                j.css("width", (g) * f + "px");
                break;
            case 5:
                j.css("width", (g + 1) * f + "px");
                if (f <= e.shownum) {
                    b.addClass("disabled")
                } else {
                    b.removeClass("disabled")
                }
                break
        }
        return {$item: h, $grid: j, $pre: i, $next: b, len: f, itemWidth: g, itemHeight: a, num: d, offset: c}
    }, pre: function (b) {
        var a = this;
        b.$pre.bind("click", function () {
            if ($(this).hasClass("disabled")) {
                return
            }
            a.i--;
            a.offset -= a.shownum;
            if (a.i - 1 < 0) {
                b.$pre.addClass("disabled")
            }
            b.$next.removeClass("disabled");
            switch (a.type) {
                default:
                case 1:
                    b.$grid.animate({"margin-left": a.i == 0 ? 0 : parseInt(b.$grid.css("margin-left")) + (b.itemWidth * a.shownum) + "px"}, 500);
                    break;
                case 2:
                    b.$grid.animate({"margin-top": a.i == 0 ? 0 : parseInt(b.$grid.css("margin-top")) + (b.itemHeight * a.shownum) + "px"}, 500);
                    break;
                case 3:
                case 4:
                    if (a.offset < 0) {
                        a.offset = 0;
                        b.$pre.addClass("disabled")
                    }
                    b.$grid.animate({"margin-left": "-" + (a.offset * b.itemWidth) + "px"}, 500);
                    break;
                case 5:
                    b.$grid.animate({"margin-left": a.i == 0 ? 0 : parseInt(b.$grid.css("margin-left")) + (b.itemWidth * a.shownum) + "px"}, 500);
                    break
            }
        })
    }, next: function (b) {
        var a = this;
        switch (a.type) {
            case 3:
            case 4:
                if (a.offset + 1 >= b.num) {
                    b.$next.addClass("disabled")
                }
                break
        }
        b.$next.bind("click", function () {
            if ($(this).hasClass("disabled")) {
                return
            }
            a.i++;
            a.offset += a.shownum;
            b.$pre.removeClass("disabled");
            switch (a.type) {
                default:
                case 1:
                    if (a.shownum > 1) {
                        if (a.i + 1 == b.num) {
                            var d = parseInt(b.$grid.css("margin-left"));
                            var c = (b.len - ((a.i) * parseInt(a.shownum)) - 1 / 2) * b.itemWidth;
                            b.$grid.animate({"margin-left": d - c + "px"}, 500)
                        } else {
                            b.$grid.animate({"margin-left": "-" + (a.i * b.itemWidth * parseInt(a.shownum)) + "px"}, 500)
                        }
                    } else {
                        b.$grid.animate({"margin-left": "-" + (a.i * b.itemWidth * a.shownum) + "px"}, 500)
                    }
                    if (a.i + 1 == b.num) {
                        b.$next.addClass("disabled")
                    }
                    break;
                case 2:
                    b.$grid.animate({"margin-top": "-" + (a.i * b.itemHeight * a.shownum) + "px"}, 500);
                    if (a.i + 1 == b.num) {
                        b.$next.addClass("disabled")
                    }
                    break;
                case 3:
                case 4:
                    if (a.offset + a.shownum > b.len) {
                        a.offset = b.len - a.shownum;
                        b.$grid.animate({"margin-left": "-" + (a.offset * b.itemWidth) + "px"}, 500);
                        b.$next.addClass("disabled")
                    } else {
                        b.$grid.animate({"margin-left": "-" + (a.offset * b.itemWidth) + "px"}, 500)
                    }
                    break;
                case 5:
                    if (a.shownum > 1) {
                        if (a.i + 1 == b.num) {
                            var d = parseInt(b.$grid.css("margin-left"));
                            var c = (b.len - ((a.i) * parseInt(a.shownum))) * b.itemWidth;
                            b.$grid.animate({"margin-left": d - c + "px"}, 500)
                        } else {
                            b.$grid.animate({"margin-left": "-" + (a.i * b.itemWidth * parseInt(a.shownum)) + "px"}, 500)
                        }
                    } else {
                        b.$grid.animate({"margin-left": "-" + (a.i * b.itemWidth * a.shownum) + "px"}, 500)
                    }
                    if (a.i + 1 == b.num) {
                        b.$next.addClass("disabled")
                    }
                    break
            }
        })
    }
};
window.Swiper = function (aa, ab) {
    function ac(ae, af) {
        return document.querySelectorAll ? (af || document).querySelectorAll(ae) : jQuery(ae, af)
    }

    function ad(ae) {
        return "[object Array]" === Object.prototype.toString.apply(ae) ? !0 : !1
    }

    function y() {
        var ae = e - h;
        return ab.freeMode && (ae = e - h), ab.slidesPerView > b.slides.length && !ab.centeredSlides && (ae = 0), 0 > ae && (ae = 0), ae
    }

    function z() {
        function ae(am) {
            var aj, ak, al = function () {
                "undefined" != typeof b && null !== b && (void 0 !== b.imagesLoaded && b.imagesLoaded++, b.imagesLoaded === b.imagesToLoad.length && (b.reInit(), ab.onImagesReady && b.fireCallback(ab.onImagesReady, b)))
            };
            am.complete ? al() : (ak = am.currentSrc || am.getAttribute("src"), ak ? (aj = new Image, aj.onload = al, aj.onerror = al, aj.src = ak) : al())
        }

        var af = b.h.addEventListener, ag = "wrapper" === ab.eventTarget ? b.wrapper : b.container;
        if (b.browser.ie10 || b.browser.ie11 ? (af(ag, b.touchEvents.touchStart, J), af(document, b.touchEvents.touchMove, K), af(document, b.touchEvents.touchEnd, L)) : (b.support.touch && (af(ag, "touchstart", J), af(ag, "touchmove", K), af(ag, "touchend", L)), ab.simulateTouch && (af(ag, "mousedown", J), af(document, "mousemove", K), af(document, "mouseup", L))), ab.autoResize && af(window, "resize", b.resizeFix), A(), b._wheelEvent = !1, ab.mousewheelControl) {
            if (void 0 !== document.onmousewheel && (b._wheelEvent = "mousewheel"), !b._wheelEvent) {
                try {
                    new WheelEvent("wheel"), b._wheelEvent = "wheel"
                } catch (ah) {
                }
            }
            b._wheelEvent || (b._wheelEvent = "DOMMouseScroll"), b._wheelEvent && af(b.container, b._wheelEvent, D)
        }
        if (ab.keyboardControl && af(document, "keydown", C), ab.updateOnImagesReady) {
            b.imagesToLoad = ac("img", b.container);
            for (var ai = 0; ai < b.imagesToLoad.length; ai++) {
                ae(b.imagesToLoad[ai])
            }
        }
    }

    function A() {
        var ae, af = b.h.addEventListener;
        if (ab.preventLinks) {
            var ag = ac("a", b.container);
            for (ae = 0; ae < ag.length; ae++) {
                af(ag[ae], "click", H)
            }
        }
        if (ab.releaseFormElements) {
            var ah = ac("input, textarea, select", b.container);
            for (ae = 0; ae < ah.length; ae++) {
                af(ah[ae], b.touchEvents.touchStart, I, !0), b.support.touch && ab.simulateTouch && af(ah[ae], "mousedown", I, !0)
            }
        }
        if (ab.onSlideClick) {
            for (ae = 0; ae < b.slides.length; ae++) {
                af(b.slides[ae], "click", E)
            }
        }
        if (ab.onSlideTouch) {
            for (ae = 0; ae < b.slides.length; ae++) {
                af(b.slides[ae], b.touchEvents.touchStart, F)
            }
        }
    }

    function B() {
        var ae, af = b.h.removeEventListener;
        if (ab.onSlideClick) {
            for (ae = 0; ae < b.slides.length; ae++) {
                af(b.slides[ae], "click", E)
            }
        }
        if (ab.onSlideTouch) {
            for (ae = 0; ae < b.slides.length; ae++) {
                af(b.slides[ae], b.touchEvents.touchStart, F)
            }
        }
        if (ab.releaseFormElements) {
            var ag = ac("input, textarea, select", b.container);
            for (ae = 0; ae < ag.length; ae++) {
                af(ag[ae], b.touchEvents.touchStart, I, !0), b.support.touch && ab.simulateTouch && af(ag[ae], "mousedown", I, !0)
            }
        }
        if (ab.preventLinks) {
            var ah = ac("a", b.container);
            for (ae = 0; ae < ah.length; ae++) {
                af(ah[ae], "click", H)
            }
        }
    }

    function C(al) {
        var am = al.keyCode || al.charCode;
        if (!(al.shiftKey || al.altKey || al.ctrlKey || al.metaKey)) {
            if (37 === am || 39 === am || 38 === am || 40 === am) {
                for (var an = !1, ao = b.h.getOffset(b.container), ae = b.h.windowScroll().left, af = b.h.windowScroll().top, ag = b.h.windowWidth(), ah = b.h.windowHeight(), ai = [[ao.left, ao.top], [ao.left + b.width, ao.top], [ao.left, ao.top + b.height], [ao.left + b.width, ao.top + b.height]], aj = 0; aj < ai.length; aj++) {
                    var ak = ai[aj];
                    ak[0] >= ae && ak[0] <= ae + ag && ak[1] >= af && ak[1] <= af + ah && (an = !0)
                }
                if (!an) {
                    return
                }
            }
            l ? ((37 === am || 39 === am) && (al.preventDefault ? al.preventDefault() : al.returnValue = !1), 39 === am && b.swipeNext(), 37 === am && b.swipePrev()) : ((38 === am || 40 === am) && (al.preventDefault ? al.preventDefault() : al.returnValue = !1), 40 === am && b.swipeNext(), 38 === am && b.swipePrev())
        }
    }

    function D(ae) {
        var af = b._wheelEvent, ag = 0;
        if (ae.detail) {
            ag = -ae.detail
        } else {
            if ("mousewheel" === af) {
                if (ab.mousewheelControlForceToAxis) {
                    if (l) {
                        if (!(Math.abs(ae.wheelDeltaX) > Math.abs(ae.wheelDeltaY))) {
                            return
                        }
                        ag = ae.wheelDeltaX
                    } else {
                        if (!(Math.abs(ae.wheelDeltaY) > Math.abs(ae.wheelDeltaX))) {
                            return
                        }
                        ag = ae.wheelDeltaY
                    }
                } else {
                    ag = ae.wheelDelta
                }
            } else {
                if ("DOMMouseScroll" === af) {
                    ag = -ae.detail
                } else {
                    if ("wheel" === af) {
                        if (ab.mousewheelControlForceToAxis) {
                            if (l) {
                                if (!(Math.abs(ae.deltaX) > Math.abs(ae.deltaY))) {
                                    return
                                }
                                ag = -ae.deltaX
                            } else {
                                if (!(Math.abs(ae.deltaY) > Math.abs(ae.deltaX))) {
                                    return
                                }
                                ag = -ae.deltaY
                            }
                        } else {
                            ag = Math.abs(ae.deltaX) > Math.abs(ae.deltaY) ? -ae.deltaX : -ae.deltaY
                        }
                    }
                }
            }
        }
        if (ab.freeMode) {
            var ah = b.getWrapperTranslate() + ag;
            if (ah > 0 && (ah = 0), ah < -y() && (ah = -y()), b.setWrapperTransition(0), b.setWrapperTranslate(ah), b.updateActiveSlide(ah), 0 === ah || ah === -y()) {
                return
            }
        } else {
            (new Date).getTime() - t > 60 && (0 > ag ? b.swipeNext() : b.swipePrev()), t = (new Date).getTime()
        }
        return ab.autoplay && b.stopAutoplay(!0), ae.preventDefault ? ae.preventDefault() : ae.returnValue = !1, !1
    }

    function E(ae) {
        b.allowSlideClick && (G(ae), b.fireCallback(ab.onSlideClick, b, ae))
    }

    function F(ae) {
        G(ae), b.fireCallback(ab.onSlideTouch, b, ae)
    }

    function G(ae) {
        if (ae.currentTarget) {
            b.clickedSlide = ae.currentTarget
        } else {
            var af = ae.srcElement;
            do {
                if (af.className.indexOf(ab.slideClass) > -1) {
                    break
                }
                af = af.parentNode
            } while (af);
            b.clickedSlide = af
        }
        b.clickedSlideIndex = b.slides.indexOf(b.clickedSlide), b.clickedSlideLoopIndex = b.clickedSlideIndex - (b.loopedSlides || 0)
    }

    function H(ae) {
        return b.allowLinks ? void 0 : (ae.preventDefault ? ae.preventDefault() : ae.returnValue = !1, ab.preventLinksPropagation && "stopPropagation" in ae && ae.stopPropagation(), !1)
    }

    function I(ae) {
        return ae.stopPropagation ? ae.stopPropagation() : ae.returnValue = !1, !1
    }

    function J(ae) {
        if (ab.preventLinks && (b.allowLinks = !0), b.isTouched || ab.onlyExternal) {
            return !1
        }
        var af = ae.target || ae.srcElement;
        document.activeElement && document.activeElement !== document.body && document.activeElement !== af && document.activeElement.blur();
        var ag = "input select textarea".split(" ");
        if (ab.noSwiping && af && N(af)) {
            return !1
        }
        if (Y = !1, b.isTouched = !0, U = "touchstart" === ae.type, !U && "which" in ae && 3 === ae.which) {
            return b.isTouched = !1, !1
        }
        if (!U || 1 === ae.targetTouches.length) {
            b.callPlugins("onTouchStartBegin"), !U && !b.isAndroid && ag.indexOf(af.tagName.toLowerCase()) < 0 && (ae.preventDefault ? ae.preventDefault() : ae.returnValue = !1);
            var ah = U ? ae.targetTouches[0].pageX : ae.pageX || ae.clientX,
                ai = U ? ae.targetTouches[0].pageY : ae.pageY || ae.clientY;
            b.touches.startX = b.touches.currentX = ah, b.touches.startY = b.touches.currentY = ai, b.touches.start = b.touches.current = l ? ah : ai, b.setWrapperTransition(0), b.positions.start = b.positions.current = b.getWrapperTranslate(), b.setWrapperTranslate(b.positions.start), b.times.start = (new Date).getTime(), g = void 0, ab.moveStartThreshold > 0 && (v = !1), ab.onTouchStart && b.fireCallback(ab.onTouchStart, b, ae), b.callPlugins("onTouchStartEnd")
        }
    }

    function K(af) {
        if (b.isTouched && !ab.onlyExternal && (!U || "mousemove" !== af.type)) {
            var ak = U ? af.targetTouches[0].pageX : af.pageX || af.clientX,
                ae = U ? af.targetTouches[0].pageY : af.pageY || af.clientY;
            if ("undefined" == typeof g && l && (g = !!(g || Math.abs(ae - b.touches.startY) > Math.abs(ak - b.touches.startX))), "undefined" != typeof g || l || (g = !!(g || Math.abs(ae - b.touches.startY) < Math.abs(ak - b.touches.startX))), g) {
                return void (b.isTouched = !1)
            }
            if (l) {
                if (!ab.swipeToNext && ak < b.touches.startX || !ab.swipeToPrev && ak > b.touches.startX) {
                    return
                }
            } else {
                if (!ab.swipeToNext && ae < b.touches.startY || !ab.swipeToPrev && ae > b.touches.startY) {
                    return
                }
            }
            if (af.assignedToSwiper) {
                return void (b.isTouched = !1)
            }
            if (af.assignedToSwiper = !0, ab.preventLinks && (b.allowLinks = !1), ab.onSlideClick && (b.allowSlideClick = !1), ab.autoplay && b.stopAutoplay(!0), !U || 1 === af.touches.length) {
                if (b.isMoved || (b.callPlugins("onTouchMoveStart"), ab.loop && (b.fixLoop(), b.positions.start = b.getWrapperTranslate()), ab.onTouchMoveStart && b.fireCallback(ab.onTouchMoveStart, b)), b.isMoved = !0, af.preventDefault ? af.preventDefault() : af.returnValue = !1, b.touches.current = l ? ak : ae, b.positions.current = (b.touches.current - b.touches.start) * ab.touchRatio + b.positions.start, b.positions.current > 0 && ab.onResistanceBefore && b.fireCallback(ab.onResistanceBefore, b, b.positions.current), b.positions.current < -y() && ab.onResistanceAfter && b.fireCallback(ab.onResistanceAfter, b, Math.abs(b.positions.current + y())), ab.resistance && "100%" !== ab.resistance) {
                    var ag;
                    if (b.positions.current > 0 && (ag = 1 - b.positions.current / h / 2, b.positions.current = 0.5 > ag ? h / 2 : b.positions.current * ag), b.positions.current < -y()) {
                        var ah = (b.touches.current - b.touches.start) * ab.touchRatio + (y() + b.positions.start);
                        ag = (h + ah) / h;
                        var ai = b.positions.current - ah * (1 - ag) / 2, aj = -y() - h / 2;
                        b.positions.current = aj > ai || 0 >= ag ? aj : ai
                    }
                }
                if (ab.resistance && "100%" === ab.resistance && (b.positions.current > 0 && (!ab.freeMode || ab.freeModeFluid) && (b.positions.current = 0), b.positions.current < -y() && (!ab.freeMode || ab.freeModeFluid) && (b.positions.current = -y())), !ab.followFinger) {
                    return
                }
                if (ab.moveStartThreshold) {
                    if (Math.abs(b.touches.current - b.touches.start) > ab.moveStartThreshold || v) {
                        if (!v) {
                            return v = !0, void (b.touches.start = b.touches.current)
                        }
                        b.setWrapperTranslate(b.positions.current)
                    } else {
                        b.positions.current = b.positions.start
                    }
                } else {
                    b.setWrapperTranslate(b.positions.current)
                }
                return (ab.freeMode || ab.watchActiveIndex) && b.updateActiveSlide(b.positions.current), ab.grabCursor && (b.container.style.cursor = "move", b.container.style.cursor = "grabbing", b.container.style.cursor = "-moz-grabbin", b.container.style.cursor = "-webkit-grabbing"), w || (w = b.touches.current), x || (x = (new Date).getTime()), b.velocity = (b.touches.current - w) / ((new Date).getTime() - x) / 2, Math.abs(b.touches.current - w) < 2 && (b.velocity = 0), w = b.touches.current, x = (new Date).getTime(), b.callPlugins("onTouchMoveEnd"), ab.onTouchMove && b.fireCallback(ab.onTouchMove, b, af), !1
            }
        }
    }

    function L(ar) {
        if (g && b.swipeReset(), !ab.onlyExternal && b.isTouched) {
            b.isTouched = !1, ab.grabCursor && (b.container.style.cursor = "move", b.container.style.cursor = "grab", b.container.style.cursor = "-moz-grab", b.container.style.cursor = "-webkit-grab"), b.positions.current || 0 === b.positions.current || (b.positions.current = b.positions.start), ab.followFinger && b.setWrapperTranslate(b.positions.current), b.times.end = (new Date).getTime(), b.touches.diff = b.touches.current - b.touches.start, b.touches.abs = Math.abs(b.touches.diff), b.positions.diff = b.positions.current - b.positions.start, b.positions.abs = Math.abs(b.positions.diff);
            var au = b.positions.diff, ae = b.positions.abs, af = b.times.end - b.times.start;
            5 > ae && 300 > af && b.allowLinks === !1 && (ab.freeMode || 0 === ae || b.swipeReset(), ab.preventLinks && (b.allowLinks = !0), ab.onSlideClick && (b.allowSlideClick = !0)), setTimeout(function () {
                "undefined" != typeof b && null !== b && (ab.preventLinks && (b.allowLinks = !0), ab.onSlideClick && (b.allowSlideClick = !0))
            }, 100);
            var ag = y();
            if (!b.isMoved && ab.freeMode) {
                return b.isMoved = !1, ab.onTouchEnd && b.fireCallback(ab.onTouchEnd, b, ar), void b.callPlugins("onTouchEnd")
            }
            if (!b.isMoved || b.positions.current > 0 || b.positions.current < -ag) {
                return b.swipeReset(), ab.onTouchEnd && b.fireCallback(ab.onTouchEnd, b, ar), void b.callPlugins("onTouchEnd")
            }
            if (b.isMoved = !1, ab.freeMode) {
                if (ab.freeModeFluid) {
                    var ah, aj = 1000 * ab.momentumRatio, al = b.velocity * aj, am = b.positions.current + al, an = !1,
                        ao = 20 * Math.abs(b.velocity) * ab.momentumBounceRatio;
                    -ag > am && (ab.momentumBounce && b.support.transitions ? (-ao > am + ag && (am = -ag - ao), ah = -ag, an = !0, Y = !0) : am = -ag), am > 0 && (ab.momentumBounce && b.support.transitions ? (am > ao && (am = ao), ah = 0, an = !0, Y = !0) : am = 0), 0 !== b.velocity && (aj = Math.abs((am - b.positions.current) / b.velocity)), b.setWrapperTranslate(am), b.setWrapperTransition(aj), ab.momentumBounce && an && b.wrapperTransitionEnd(function () {
                        Y && (ab.onMomentumBounce && b.fireCallback(ab.onMomentumBounce, b), b.callPlugins("onMomentumBounce"), b.setWrapperTranslate(ah), b.setWrapperTransition(300))
                    }), b.updateActiveSlide(am)
                }
                return (!ab.freeModeFluid || af >= 300) && b.updateActiveSlide(b.positions.current), ab.onTouchEnd && b.fireCallback(ab.onTouchEnd, b, ar), void b.callPlugins("onTouchEnd")
            }
            f = 0 > au ? "toNext" : "toPrev", "toNext" === f && 300 >= af && (30 > ae || !ab.shortSwipes ? b.swipeReset() : b.swipeNext(!0, !0)), "toPrev" === f && 300 >= af && (30 > ae || !ab.shortSwipes ? b.swipeReset() : b.swipePrev(!0, !0));
            var ap = 0;
            if ("auto" === ab.slidesPerView) {
                for (var aq, at = Math.abs(b.getWrapperTranslate()), ai = 0, ak = 0; ak < b.slides.length; ak++) {
                    if (aq = l ? b.slides[ak].getWidth(!0, ab.roundLengths) : b.slides[ak].getHeight(!0, ab.roundLengths), ai += aq, ai > at) {
                        ap = aq;
                        break
                    }
                }
                ap > h && (ap = h)
            } else {
                ap = d * ab.slidesPerView
            }
            "toNext" === f && af > 300 && (ae >= ap * ab.longSwipesRatio ? b.swipeNext(!0, !0) : b.swipeReset()), "toPrev" === f && af > 300 && (ae >= ap * ab.longSwipesRatio ? b.swipePrev(!0, !0) : b.swipeReset()), ab.onTouchEnd && b.fireCallback(ab.onTouchEnd, b, ar), b.callPlugins("onTouchEnd")
        }
    }

    function M(ae, af) {
        return ae && ae.getAttribute("class") && ae.getAttribute("class").indexOf(af) > -1
    }

    function N(ae) {
        var af = !1;
        do {
            M(ae, ab.noSwipingClass) && (af = !0), ae = ae.parentElement
        } while (!af && ae.parentElement && !M(ae, ab.wrapperClass));
        return !af && M(ae, ab.wrapperClass) && M(ae, ab.noSwipingClass) && (af = !0), af
    }

    function O(ag, ah) {
        var ae, af = document.createElement("div");
        return af.innerHTML = ah, ae = af.firstChild, ae.className += " " + ag, ae.outerHTML
    }

    function P(am, an, ae) {
        function af() {
            var ap = +new Date, ao = ap - ah;
            ai += aj * ao / (1000 / 60), al = "toNext" === ak ? ai > am : am > ai, al ? (b.setWrapperTranslate(Math.ceil(ai)), b._DOMAnimating = !0, window.setTimeout(function () {
                af()
            }, 1000 / 60)) : (ab.onSlideChangeEnd && ("to" === an ? ae.runCallbacks === !0 && b.fireCallback(ab.onSlideChangeEnd, b, ak) : b.fireCallback(ab.onSlideChangeEnd, b, ak)), b.setWrapperTranslate(am), b._DOMAnimating = !1)
        }

        var ag = "to" === an && ae.speed >= 0 ? ae.speed : ab.speed, ah = +new Date;
        if (b.support.transitions || !ab.DOMAnimation) {
            b.setWrapperTranslate(am), b.setWrapperTransition(ag)
        } else {
            var ai = b.getWrapperTranslate(), aj = Math.ceil((am - ai) / ag * (1000 / 60)),
                ak = ai > am ? "toNext" : "toPrev", al = "toNext" === ak ? ai > am : am > ai;
            if (b._DOMAnimating) {
                return
            }
            af()
        }
        b.updateActiveSlide(am), ab.onSlideNext && "next" === an && ae.runCallbacks === !0 && b.fireCallback(ab.onSlideNext, b, am), ab.onSlidePrev && "prev" === an && ae.runCallbacks === !0 && b.fireCallback(ab.onSlidePrev, b, am), ab.onSlideReset && "reset" === an && ae.runCallbacks === !0 && b.fireCallback(ab.onSlideReset, b, am), "next" !== an && "prev" !== an && "to" !== an || ae.runCallbacks !== !0 || Q(an)
    }

    function Q(ae) {
        if (b.callPlugins("onSlideChangeStart"), ab.onSlideChangeStart) {
            if (ab.queueStartCallbacks && b.support.transitions) {
                if (b._queueStartCallbacks) {
                    return
                }
                b._queueStartCallbacks = !0, b.fireCallback(ab.onSlideChangeStart, b, ae), b.wrapperTransitionEnd(function () {
                    b._queueStartCallbacks = !1
                })
            } else {
                b.fireCallback(ab.onSlideChangeStart, b, ae)
            }
        }
        if (ab.onSlideChangeEnd) {
            if (b.support.transitions) {
                if (ab.queueEndCallbacks) {
                    if (b._queueEndCallbacks) {
                        return
                    }
                    b._queueEndCallbacks = !0, b.wrapperTransitionEnd(function (af) {
                        b.fireCallback(ab.onSlideChangeEnd, af, ae)
                    })
                } else {
                    b.wrapperTransitionEnd(function (af) {
                        b.fireCallback(ab.onSlideChangeEnd, af, ae)
                    })
                }
            } else {
                ab.DOMAnimation || setTimeout(function () {
                    b.fireCallback(ab.onSlideChangeEnd, b, ae)
                }, 10)
            }
        }
    }

    function R() {
        var ae = b.paginationButtons;
        if (ae) {
            for (var af = 0; af < ae.length; af++) {
                b.h.removeEventListener(ae[af], "click", T)
            }
        }
    }

    function S() {
        var ae = b.paginationButtons;
        if (ae) {
            for (var af = 0; af < ae.length; af++) {
                b.h.addEventListener(ae[af], "click", T)
            }
        }
    }

    function T(ae) {
        for (var af, ag = ae.target || ae.srcElement, ah = b.paginationButtons, ai = 0; ai < ah.length; ai++) {
            ag === ah[ai] && (af = ai)
        }
        ab.autoplay && b.stopAutoplay(!0), b.swipeTo(af)
    }

    function V() {
        W = setTimeout(function () {
            ab.loop ? (b.fixLoop(), b.swipeNext(!0, !0)) : b.swipeNext(!0, !0) || (ab.autoplayStopOnLast ? (clearTimeout(W), W = void 0) : b.swipeTo(0)), b.wrapperTransitionEnd(function () {
                "undefined" != typeof W && V()
            })
        }, ab.autoplay)
    }

    function X() {
        b.calcSlides(), ab.loader.slides.length > 0 && 0 === b.slides.length && b.loadSlides(), ab.loop && b.createLoop(), b.init(), z(), ab.pagination && b.createPagination(!0), ab.loop || ab.initialSlide > 0 ? b.swipeTo(ab.initialSlide, 0, !1) : b.updateActiveSlide(0), ab.autoplay && b.startAutoplay(), b.centerIndex = b.activeIndex, ab.onSwiperCreated && b.fireCallback(ab.onSwiperCreated, b), b.callPlugins("onSwiperCreated")
    }

    if (!document.body.outerHTML && document.body.__defineGetter__ && HTMLElement) {
        var a = HTMLElement.prototype;
        a.__defineGetter__ && a.__defineGetter__("outerHTML", function () {
            return (new XMLSerializer).serializeToString(this)
        })
    }
    if (window.getComputedStyle || (window.getComputedStyle = function (ae) {
        return this.el = ae, this.getPropertyValue = function (af) {
            var ag = /(\-([a-z]){1})/g;
            return "float" === af && (af = "styleFloat"), ag.test(af) && (af = af.replace(ag, function () {
                return arguments[2].toUpperCase()
            })), ae.currentStyle[af] ? ae.currentStyle[af] : null
        }, this
    }), Array.prototype.indexOf || (Array.prototype.indexOf = function (ag, ah) {
        for (var ae = ah || 0, af = this.length; af > ae; ae++) {
            if (this[ae] === ag) {
                return ae
            }
        }
        return -1
    }), (document.querySelectorAll || window.jQuery) && "undefined" != typeof aa && (aa.nodeType || 0 !== ac(aa).length)) {
        var b = this;
        b.touches = {
            start: 0,
            startX: 0,
            startY: 0,
            current: 0,
            currentX: 0,
            currentY: 0,
            diff: 0,
            abs: 0
        }, b.positions = {start: 0, abs: 0, diff: 0, current: 0}, b.times = {
            start: 0,
            end: 0
        }, b.id = (new Date).getTime(), b.container = aa.nodeType ? aa : ac(aa)[0], b.isTouched = !1, b.isMoved = !1, b.activeIndex = 0, b.centerIndex = 0, b.activeLoaderIndex = 0, b.activeLoopIndex = 0, b.previousIndex = null, b.velocity = 0, b.snapGrid = [], b.slidesGrid = [], b.imagesToLoad = [], b.imagesLoaded = 0, b.wrapperLeft = 0, b.wrapperRight = 0, b.wrapperTop = 0, b.wrapperBottom = 0, b.isAndroid = navigator.userAgent.toLowerCase().indexOf("android") >= 0;
        var c, d, e, f, g, h, i = {
            eventTarget: "wrapper",
            mode: "horizontal",
            touchRatio: 1,
            speed: 300,
            freeMode: !1,
            freeModeFluid: !1,
            momentumRatio: 1,
            momentumBounce: !0,
            momentumBounceRatio: 1,
            slidesPerView: 1,
            slidesPerGroup: 1,
            slidesPerViewFit: !0,
            simulateTouch: !0,
            followFinger: !0,
            shortSwipes: !0,
            longSwipesRatio: 0.5,
            moveStartThreshold: !1,
            onlyExternal: !1,
            createPagination: !0,
            pagination: !1,
            paginationElement: "span",
            paginationClickable: !1,
            paginationAsRange: !0,
            resistance: !0,
            scrollContainer: !1,
            preventLinks: !0,
            preventLinksPropagation: !1,
            noSwiping: !1,
            noSwipingClass: "swiper-no-swiping",
            initialSlide: 0,
            keyboardControl: !1,
            mousewheelControl: !1,
            mousewheelControlForceToAxis: !1,
            useCSS3Transforms: !0,
            autoplay: !1,
            autoplayDisableOnInteraction: !0,
            autoplayStopOnLast: !1,
            loop: !1,
            loopAdditionalSlides: 0,
            roundLengths: !1,
            calculateHeight: !1,
            cssWidthAndHeight: !1,
            updateOnImagesReady: !0,
            releaseFormElements: !0,
            watchActiveIndex: !1,
            visibilityFullFit: !1,
            offsetPxBefore: 0,
            offsetPxAfter: 0,
            offsetSlidesBefore: 0,
            offsetSlidesAfter: 0,
            centeredSlides: !1,
            queueStartCallbacks: !1,
            queueEndCallbacks: !1,
            autoResize: !0,
            resizeReInit: !1,
            DOMAnimation: !0,
            loader: {slides: [], slidesHTMLType: "inner", surroundGroups: 1, logic: "reload", loadAllSlides: !1},
            swipeToPrev: !0,
            swipeToNext: !0,
            slideElement: "div",
            slideClass: "swiper-slide",
            slideActiveClass: "swiper-slide-active",
            slideVisibleClass: "swiper-slide-visible",
            slideDuplicateClass: "swiper-slide-duplicate",
            wrapperClass: "swiper-wrapper",
            paginationElementClass: "swiper-pagination-switch",
            paginationActiveClass: "swiper-active-switch",
            paginationVisibleClass: "swiper-visible-switch"
        };
        ab = ab || {};
        for (var j in i) {
            if (j in ab && "object" == typeof ab[j]) {
                for (var k in i[j]) {
                    k in ab[j] || (ab[j][k] = i[j][k])
                }
            } else {
                j in ab || (ab[j] = i[j])
            }
        }
        b.params = ab, ab.scrollContainer && (ab.freeMode = !0, ab.freeModeFluid = !0), ab.loop && (ab.resistance = "100%");
        var l = "horizontal" === ab.mode, m = ["mousedown", "mousemove", "mouseup"];
        b.browser.ie10 && (m = ["MSPointerDown", "MSPointerMove", "MSPointerUp"]), b.browser.ie11 && (m = ["pointerdown", "pointermove", "pointerup"]), b.touchEvents = {
            touchStart: b.support.touch || !ab.simulateTouch ? "touchstart" : m[0],
            touchMove: b.support.touch || !ab.simulateTouch ? "touchmove" : m[1],
            touchEnd: b.support.touch || !ab.simulateTouch ? "touchend" : m[2]
        };
        for (var n = b.container.childNodes.length - 1; n >= 0; n--) {
            if (b.container.childNodes[n].className) {
                for (var o = b.container.childNodes[n].className.split(/\s+/), p = 0; p < o.length; p++) {
                    o[p] === ab.wrapperClass && (c = b.container.childNodes[n])
                }
            }
        }
        b.wrapper = c, b._extendSwiperSlide = function (ae) {
            return ae.append = function () {
                return ab.loop ? ae.insertAfter(b.slides.length - b.loopedSlides) : (b.wrapper.appendChild(ae), b.reInit()), ae
            }, ae.prepend = function () {
                return ab.loop ? (b.wrapper.insertBefore(ae, b.slides[b.loopedSlides]), b.removeLoopedSlides(), b.calcSlides(), b.createLoop()) : b.wrapper.insertBefore(ae, b.wrapper.firstChild), b.reInit(), ae
            }, ae.insertAfter = function (ag) {
                if ("undefined" == typeof ag) {
                    return !1
                }
                var af;
                return ab.loop ? (af = b.slides[ag + 1 + b.loopedSlides], af ? b.wrapper.insertBefore(ae, af) : b.wrapper.appendChild(ae), b.removeLoopedSlides(), b.calcSlides(), b.createLoop()) : (af = b.slides[ag + 1], b.wrapper.insertBefore(ae, af)), b.reInit(), ae
            }, ae.clone = function () {
                return b._extendSwiperSlide(ae.cloneNode(!0))
            }, ae.remove = function () {
                b.wrapper.removeChild(ae), b.reInit()
            }, ae.html = function (af) {
                return "undefined" == typeof af ? ae.innerHTML : (ae.innerHTML = af, ae)
            }, ae.index = function () {
                for (var af, ag = b.slides.length - 1; ag >= 0; ag--) {
                    ae === b.slides[ag] && (af = ag)
                }
                return af
            }, ae.isActive = function () {
                return ae.index() === b.activeIndex ? !0 : !1
            }, ae.swiperSlideDataStorage || (ae.swiperSlideDataStorage = {}), ae.getData = function (af) {
                return ae.swiperSlideDataStorage[af]
            }, ae.setData = function (af, ag) {
                return ae.swiperSlideDataStorage[af] = ag, ae
            }, ae.data = function (af, ag) {
                return "undefined" == typeof ag ? ae.getAttribute("data-" + af) : (ae.setAttribute("data-" + af, ag), ae)
            }, ae.getWidth = function (af, ag) {
                return b.h.getWidth(ae, af, ag)
            }, ae.getHeight = function (af, ag) {
                return b.h.getHeight(ae, af, ag)
            }, ae.getOffset = function () {
                return b.h.getOffset(ae)
            }, ae
        }, b.calcSlides = function (ae) {
            var af = b.slides ? b.slides.length : !1;
            b.slides = [], b.displaySlides = [];
            for (var ag = 0; ag < b.wrapper.childNodes.length; ag++) {
                if (b.wrapper.childNodes[ag].className) {
                    for (var ah = b.wrapper.childNodes[ag].className, ai = ah.split(/\s+/), aj = 0; aj < ai.length; aj++) {
                        ai[aj] === ab.slideClass && b.slides.push(b.wrapper.childNodes[ag])
                    }
                }
            }
            for (ag = b.slides.length - 1; ag >= 0; ag--) {
                b._extendSwiperSlide(b.slides[ag])
            }
            af !== !1 && (af !== b.slides.length || ae) && (B(), A(), b.updateActiveSlide(), b.params.pagination && b.createPagination(), b.callPlugins("numberOfSlidesChanged"))
        }, b.createSlide = function (ae, af, ag) {
            af = af || b.params.slideClass, ag = ag || ab.slideElement;
            var ah = document.createElement(ag);
            return ah.innerHTML = ae || "", ah.className = af, b._extendSwiperSlide(ah)
        }, b.appendSlide = function (af, ag, ae) {
            return af ? af.nodeType ? b._extendSwiperSlide(af).append() : b.createSlide(af, ag, ae).append() : void 0
        }, b.prependSlide = function (af, ag, ae) {
            return af ? af.nodeType ? b._extendSwiperSlide(af).prepend() : b.createSlide(af, ag, ae).prepend() : void 0
        }, b.insertSlideAfter = function (ag, ah, ae, af) {
            return "undefined" == typeof ag ? !1 : ah.nodeType ? b._extendSwiperSlide(ah).insertAfter(ag) : b.createSlide(ah, ae, af).insertAfter(ag)
        }, b.removeSlide = function (ae) {
            if (b.slides[ae]) {
                if (ab.loop) {
                    if (!b.slides[ae + b.loopedSlides]) {
                        return !1
                    }
                    b.slides[ae + b.loopedSlides].remove(), b.removeLoopedSlides(), b.calcSlides(), b.createLoop()
                } else {
                    b.slides[ae].remove()
                }
                return !0
            }
            return !1
        }, b.removeLastSlide = function () {
            return b.slides.length > 0 ? (ab.loop ? (b.slides[b.slides.length - 1 - b.loopedSlides].remove(), b.removeLoopedSlides(), b.calcSlides(), b.createLoop()) : b.slides[b.slides.length - 1].remove(), !0) : !1
        }, b.removeAllSlides = function () {
            for (var ae = b.slides.length, af = b.slides.length - 1; af >= 0; af--) {
                b.slides[af].remove(), af === ae - 1 && b.setWrapperTranslate(0)
            }
        }, b.getSlide = function (ae) {
            return b.slides[ae]
        }, b.getLastSlide = function () {
            return b.slides[b.slides.length - 1]
        }, b.getFirstSlide = function () {
            return b.slides[0]
        }, b.activeSlide = function () {
            return b.slides[b.activeIndex]
        }, b.fireCallback = function () {
            var ae = arguments[0];
            if ("[object Array]" === Object.prototype.toString.call(ae)) {
                for (var af = 0; af < ae.length; af++) {
                    "function" == typeof ae[af] && ae[af](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])
                }
            } else {
                "[object String]" === Object.prototype.toString.call(ae) ? ab["on" + ae] && b.fireCallback(ab["on" + ae], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]) : ae(arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])
            }
        }, b.addCallback = function (ag, ah) {
            var ae, af = this;
            return af.params["on" + ag] ? ad(this.params["on" + ag]) ? this.params["on" + ag].push(ah) : "function" == typeof this.params["on" + ag] ? (ae = this.params["on" + ag], this.params["on" + ag] = [], this.params["on" + ag].push(ae), this.params["on" + ag].push(ah)) : void 0 : (this.params["on" + ag] = [], this.params["on" + ag].push(ah))
        }, b.removeCallbacks = function (ae) {
            b.params["on" + ae] && (b.params["on" + ae] = null)
        };
        var q = [];
        for (var r in b.plugins) {
            if (ab[r]) {
                var s = b.plugins[r](b, ab[r]);
                s && q.push(s)
            }
        }
        b.callPlugins = function (af, ag) {
            ag || (ag = {});
            for (var ae = 0; ae < q.length; ae++) {
                af in q[ae] && q[ae][af](ag)
            }
        }, !b.browser.ie10 && !b.browser.ie11 || ab.onlyExternal || b.wrapper.classList.add("swiper-wp8-" + (l ? "horizontal" : "vertical")), ab.freeMode && (b.container.className += " swiper-free-mode"), b.initialized = !1, b.init = function (ae, af) {
            var ag = b.h.getWidth(b.container, !1, ab.roundLengths),
                ah = b.h.getHeight(b.container, !1, ab.roundLengths);
            if (ag !== b.width || ah !== b.height || ae) {
                b.width = ag, b.height = ah;
                var ai, aj, am, ao, aq, ar, at;
                h = l ? ag : ah;
                var au = b.wrapper;
                if (ae && b.calcSlides(af), "auto" === ab.slidesPerView) {
                    var av = 0, aw = 0;
                    ab.slidesOffset > 0 && (au.style.paddingLeft = "", au.style.paddingRight = "", au.style.paddingTop = "", au.style.paddingBottom = ""), au.style.width = "", au.style.height = "", ab.offsetPxBefore > 0 && (l ? b.wrapperLeft = ab.offsetPxBefore : b.wrapperTop = ab.offsetPxBefore), ab.offsetPxAfter > 0 && (l ? b.wrapperRight = ab.offsetPxAfter : b.wrapperBottom = ab.offsetPxAfter), ab.centeredSlides && (l ? (b.wrapperLeft = (h - this.slides[0].getWidth(!0, ab.roundLengths)) / 2, b.wrapperRight = (h - b.slides[b.slides.length - 1].getWidth(!0, ab.roundLengths)) / 2) : (b.wrapperTop = (h - b.slides[0].getHeight(!0, ab.roundLengths)) / 2, b.wrapperBottom = (h - b.slides[b.slides.length - 1].getHeight(!0, ab.roundLengths)) / 2)), l ? (b.wrapperLeft >= 0 && (au.style.paddingLeft = b.wrapperLeft + "px"), b.wrapperRight >= 0 && (au.style.paddingRight = b.wrapperRight + "px")) : (b.wrapperTop >= 0 && (au.style.paddingTop = b.wrapperTop + "px"), b.wrapperBottom >= 0 && (au.style.paddingBottom = b.wrapperBottom + "px")), ar = 0;
                    var ax = 0;
                    for (b.snapGrid = [], b.slidesGrid = [], am = 0, at = 0; at < b.slides.length; at++) {
                        ai = b.slides[at].getWidth(!0, ab.roundLengths), aj = b.slides[at].getHeight(!0, ab.roundLengths), ab.calculateHeight && (am = Math.max(am, aj));
                        var ay = l ? ai : aj;
                        if (ab.centeredSlides) {
                            var ak = at === b.slides.length - 1 ? 0 : b.slides[at + 1].getWidth(!0, ab.roundLengths),
                                al = at === b.slides.length - 1 ? 0 : b.slides[at + 1].getHeight(!0, ab.roundLengths),
                                an = l ? ak : al;
                            if (ay > h) {
                                if (ab.slidesPerViewFit) {
                                    b.snapGrid.push(ar + b.wrapperLeft), b.snapGrid.push(ar + ay - h + b.wrapperLeft)
                                } else {
                                    for (var ap = 0; ap <= Math.floor(ay / (h + b.wrapperLeft)); ap++) {
                                        b.snapGrid.push(0 === ap ? ar + b.wrapperLeft : ar + b.wrapperLeft + h * ap)
                                    }
                                }
                                b.slidesGrid.push(ar + b.wrapperLeft)
                            } else {
                                b.snapGrid.push(ax), b.slidesGrid.push(ax)
                            }
                            ax += ay / 2 + an / 2
                        } else {
                            if (ay > h) {
                                if (ab.slidesPerViewFit) {
                                    b.snapGrid.push(ar), b.snapGrid.push(ar + ay - h)
                                } else {
                                    if (0 !== h) {
                                        for (var az = 0; az <= Math.floor(ay / h); az++) {
                                            b.snapGrid.push(ar + h * az)
                                        }
                                    } else {
                                        b.snapGrid.push(ar)
                                    }
                                }
                            } else {
                                b.snapGrid.push(ar)
                            }
                            b.slidesGrid.push(ar)
                        }
                        ar += ay, av += ai, aw += aj
                    }
                    ab.calculateHeight && (b.height = am), l ? (e = av + b.wrapperRight + b.wrapperLeft, ab.cssWidthAndHeight && "height" !== ab.cssWidthAndHeight || (au.style.width = av + "px"), ab.cssWidthAndHeight && "width" !== ab.cssWidthAndHeight || (au.style.height = b.height + "px")) : (ab.cssWidthAndHeight && "height" !== ab.cssWidthAndHeight || (au.style.width = b.width + "px"), ab.cssWidthAndHeight && "width" !== ab.cssWidthAndHeight || (au.style.height = aw + "px"), e = aw + b.wrapperTop + b.wrapperBottom)
                } else {
                    if (ab.scrollContainer) {
                        au.style.width = "", au.style.height = "", ao = b.slides[0].getWidth(!0, ab.roundLengths), aq = b.slides[0].getHeight(!0, ab.roundLengths), e = l ? ao : aq, au.style.width = ao + "px", au.style.height = aq + "px", d = l ? ao : aq
                    } else {
                        if (ab.calculateHeight) {
                            for (am = 0, aq = 0, l || (b.container.style.height = ""), au.style.height = "", at = 0; at < b.slides.length; at++) {
                                b.slides[at].style.height = "", am = Math.max(b.slides[at].getHeight(!0), am), l || (aq += b.slides[at].getHeight(!0))
                            }
                            aj = am, b.height = aj, l ? aq = aj : (h = aj, b.container.style.height = h + "px")
                        } else {
                            aj = l ? b.height : b.height / ab.slidesPerView, ab.roundLengths && (aj = Math.ceil(aj)), aq = l ? b.height : b.slides.length * aj
                        }
                        for (ai = l ? b.width / ab.slidesPerView : b.width, ab.roundLengths && (ai = Math.ceil(ai)), ao = l ? b.slides.length * ai : b.width, d = l ? ai : aj, ab.offsetSlidesBefore > 0 && (l ? b.wrapperLeft = d * ab.offsetSlidesBefore : b.wrapperTop = d * ab.offsetSlidesBefore), ab.offsetSlidesAfter > 0 && (l ? b.wrapperRight = d * ab.offsetSlidesAfter : b.wrapperBottom = d * ab.offsetSlidesAfter), ab.offsetPxBefore > 0 && (l ? b.wrapperLeft = ab.offsetPxBefore : b.wrapperTop = ab.offsetPxBefore), ab.offsetPxAfter > 0 && (l ? b.wrapperRight = ab.offsetPxAfter : b.wrapperBottom = ab.offsetPxAfter), ab.centeredSlides && (l ? (b.wrapperLeft = (h - d) / 2, b.wrapperRight = (h - d) / 2) : (b.wrapperTop = (h - d) / 2, b.wrapperBottom = (h - d) / 2)), l ? (b.wrapperLeft > 0 && (au.style.paddingLeft = b.wrapperLeft + "px"), b.wrapperRight > 0 && (au.style.paddingRight = b.wrapperRight + "px")) : (b.wrapperTop > 0 && (au.style.paddingTop = b.wrapperTop + "px"), b.wrapperBottom > 0 && (au.style.paddingBottom = b.wrapperBottom + "px")), e = l ? ao + b.wrapperRight + b.wrapperLeft : aq + b.wrapperTop + b.wrapperBottom, parseFloat(ao) > 0 && (!ab.cssWidthAndHeight || "height" === ab.cssWidthAndHeight) && (au.style.width = ao + "px"), parseFloat(aq) > 0 && (!ab.cssWidthAndHeight || "width" === ab.cssWidthAndHeight) && (au.style.height = aq + "px"), ar = 0, b.snapGrid = [], b.slidesGrid = [], at = 0; at < b.slides.length; at++) {
                            b.snapGrid.push(ar), b.slidesGrid.push(ar), ar += d, parseFloat(ai) > 0 && (!ab.cssWidthAndHeight || "height" === ab.cssWidthAndHeight), parseFloat(aj) > 0 && (!ab.cssWidthAndHeight || "width" === ab.cssWidthAndHeight)
                        }
                    }
                }
                b.initialized ? (b.callPlugins("onInit"), ab.onInit && b.fireCallback(ab.onInit, b)) : (b.callPlugins("onFirstInit"), ab.onFirstInit && b.fireCallback(ab.onFirstInit, b)), b.initialized = !0
            }
        }, b.reInit = function (ae) {
            b.init(!0, ae)
        }, b.resizeFix = function (ae) {
            b.callPlugins("beforeResizeFix"), b.init(ab.resizeReInit || ae), ab.freeMode ? b.getWrapperTranslate() < -y() && (b.setWrapperTransition(0), b.setWrapperTranslate(-y())) : (b.swipeTo(ab.loop ? b.activeLoopIndex : b.activeIndex, 0, !1), ab.autoplay && (b.support.transitions && "undefined" != typeof W ? "undefined" != typeof W && (clearTimeout(W), W = void 0, b.startAutoplay()) : "undefined" != typeof Z && (clearInterval(Z), Z = void 0, b.startAutoplay()))), b.callPlugins("afterResizeFix")
        }, b.destroy = function (ae) {
            var af = b.h.removeEventListener, ag = "wrapper" === ab.eventTarget ? b.wrapper : b.container;
            if (b.browser.ie10 || b.browser.ie11 ? (af(ag, b.touchEvents.touchStart, J), af(document, b.touchEvents.touchMove, K), af(document, b.touchEvents.touchEnd, L)) : (b.support.touch && (af(ag, "touchstart", J), af(ag, "touchmove", K), af(ag, "touchend", L)), ab.simulateTouch && (af(ag, "mousedown", J), af(document, "mousemove", K), af(document, "mouseup", L))), ab.autoResize && af(window, "resize", b.resizeFix), B(), ab.paginationClickable && R(), ab.mousewheelControl && b._wheelEvent && af(b.container, b._wheelEvent, D), ab.keyboardControl && af(document, "keydown", C), ab.autoplay && b.stopAutoplay(), ae) {
                b.wrapper.removeAttribute("style");
                for (var ah = 0; ah < b.slides.length; ah++) {
                    b.slides[ah].removeAttribute("style")
                }
            }
            b.callPlugins("onDestroy"), window.jQuery && window.jQuery(b.container).data("swiper") && window.jQuery(b.container).removeData("swiper"), window.Zepto && window.Zepto(b.container).data("swiper") && window.Zepto(b.container).removeData("swiper"), b = null
        }, b.disableKeyboardControl = function () {
            ab.keyboardControl = !1, b.h.removeEventListener(document, "keydown", C)
        }, b.enableKeyboardControl = function () {
            ab.keyboardControl = !0, b.h.addEventListener(document, "keydown", C)
        };
        var t = (new Date).getTime();
        if (b.disableMousewheelControl = function () {
            return b._wheelEvent ? (ab.mousewheelControl = !1, b.h.removeEventListener(b.container, b._wheelEvent, D), !0) : !1
        }, b.enableMousewheelControl = function () {
            return b._wheelEvent ? (ab.mousewheelControl = !0, b.h.addEventListener(b.container, b._wheelEvent, D), !0) : !1
        }, ab.grabCursor) {
            var u = b.container.style;
            u.cursor = "move", u.cursor = "grab", u.cursor = "-moz-grab", u.cursor = "-webkit-grab"
        }
        b.allowSlideClick = !0, b.allowLinks = !0;
        var v, w, x, U = !1, Y = !0;
        b.swipeNext = function (ae, af) {
            "undefined" == typeof ae && (ae = !0), !af && ab.loop && b.fixLoop(), !af && ab.autoplay && b.stopAutoplay(!0), b.callPlugins("onSwipeNext");
            var ag = b.getWrapperTranslate().toFixed(2), ah = ag;
            if ("auto" === ab.slidesPerView) {
                for (var ai = 0; ai < b.snapGrid.length; ai++) {
                    if (-ag >= b.snapGrid[ai].toFixed(2) && -ag < b.snapGrid[ai + 1].toFixed(2)) {
                        ah = -b.snapGrid[ai + 1];
                        break
                    }
                }
            } else {
                var aj = d * ab.slidesPerGroup;
                ah = -(Math.floor(Math.abs(ag) / Math.floor(aj)) * aj + aj)
            }
            return ah < -y() && (ah = -y()), ah === ag ? !1 : (P(ah, "next", {runCallbacks: ae}), !0)
        }, b.swipePrev = function (ae, af) {
            "undefined" == typeof ae && (ae = !0), !af && ab.loop && b.fixLoop(), !af && ab.autoplay && b.stopAutoplay(!0), b.callPlugins("onSwipePrev");
            var ag, ah = Math.ceil(b.getWrapperTranslate());
            if ("auto" === ab.slidesPerView) {
                ag = 0;
                for (var ai = 1; ai < b.snapGrid.length; ai++) {
                    if (-ah === b.snapGrid[ai]) {
                        ag = -b.snapGrid[ai - 1];
                        break
                    }
                    if (-ah > b.snapGrid[ai] && -ah < b.snapGrid[ai + 1]) {
                        ag = -b.snapGrid[ai];
                        break
                    }
                }
            } else {
                var aj = d * ab.slidesPerGroup;
                ag = -(Math.ceil(-ah / aj) - 1) * aj
            }
            return ag > 0 && (ag = 0), ag === ah ? !1 : (P(ag, "prev", {runCallbacks: ae}), !0)
        }, b.swipeReset = function (ae) {
            "undefined" == typeof ae && (ae = !0), b.callPlugins("onSwipeReset");
            var af, ag = b.getWrapperTranslate(), ah = d * ab.slidesPerGroup;
            -y();
            if ("auto" === ab.slidesPerView) {
                af = 0;
                for (var ai = 0; ai < b.snapGrid.length; ai++) {
                    if (-ag === b.snapGrid[ai]) {
                        return
                    }
                    if (-ag >= b.snapGrid[ai] && -ag < b.snapGrid[ai + 1]) {
                        af = b.positions.diff > 0 ? -b.snapGrid[ai + 1] : -b.snapGrid[ai];
                        break
                    }
                }
                -ag >= b.snapGrid[b.snapGrid.length - 1] && (af = -b.snapGrid[b.snapGrid.length - 1]), ag <= -y() && (af = -y())
            } else {
                af = 0 > ag ? Math.round(ag / ah) * ah : 0, ag <= -y() && (af = -y())
            }
            return ab.scrollContainer && (af = 0 > ag ? ag : 0), af < -y() && (af = -y()), ab.scrollContainer && h > d && (af = 0), af === ag ? !1 : (P(af, "reset", {runCallbacks: ae}), !0)
        }, b.swipeTo = function (ae, af, ag) {
            ae = parseInt(ae, 10), b.callPlugins("onSwipeTo", {
                index: ae,
                speed: af
            }), ab.loop && (ae += b.loopedSlides);
            var ah = b.getWrapperTranslate();
            if (!(!isFinite(ae) || ae > b.slides.length - 1 || 0 > ae)) {
                var ai;
                return ai = "auto" === ab.slidesPerView ? -b.slidesGrid[ae] : -ae * d, ai < -y() && (ai = -y()), ai === ah ? !1 : ("undefined" == typeof ag && (ag = !0), P(ai, "to", {
                    index: ae,
                    speed: af,
                    runCallbacks: ag
                }), !0)
            }
        }, b._queueStartCallbacks = !1, b._queueEndCallbacks = !1, b.updateActiveSlide = function (af) {
            if (b.initialized && 0 !== b.slides.length) {
                b.previousIndex = b.activeIndex, "undefined" == typeof af && (af = b.getWrapperTranslate()), af > 0 && (af = 0);
                var aj;
                if ("auto" === ab.slidesPerView) {
                    if (b.activeIndex = b.slidesGrid.indexOf(-af), b.activeIndex < 0) {
                        for (aj = 0; aj < b.slidesGrid.length - 1 && !(-af > b.slidesGrid[aj] && -af < b.slidesGrid[aj + 1]); aj++) {
                        }
                        var ak = Math.abs(b.slidesGrid[aj] + af), al = Math.abs(b.slidesGrid[aj + 1] + af);
                        b.activeIndex = al >= ak ? aj : aj + 1
                    }
                } else {
                    b.activeIndex = Math[ab.visibilityFullFit ? "ceil" : "round"](-af / d)
                }
                if (b.activeIndex === b.slides.length && (b.activeIndex = b.slides.length - 1), b.activeIndex < 0 && (b.activeIndex = 0), b.slides[b.activeIndex]) {
                    if (b.calcVisibleSlides(af), b.support.classList) {
                        var ae;
                        for (aj = 0; aj < b.slides.length; aj++) {
                            ae = b.slides[aj], ae.classList.remove(ab.slideActiveClass), b.visibleSlides.indexOf(ae) >= 0 ? ae.classList.add(ab.slideVisibleClass) : ae.classList.remove(ab.slideVisibleClass)
                        }
                        b.slides[b.activeIndex].classList.add(ab.slideActiveClass)
                    } else {
                        var ag = new RegExp("\\s*" + ab.slideActiveClass),
                            ah = new RegExp("\\s*" + ab.slideVisibleClass);
                        for (aj = 0; aj < b.slides.length; aj++) {
                            b.slides[aj].className = b.slides[aj].className.replace(ag, "").replace(ah, ""), b.visibleSlides.indexOf(b.slides[aj]) >= 0 && (b.slides[aj].className += " " + ab.slideVisibleClass)
                        }
                        b.slides[b.activeIndex].className += " " + ab.slideActiveClass
                    }
                    if (ab.loop) {
                        var ai = b.loopedSlides;
                        b.activeLoopIndex = b.activeIndex - ai, b.activeLoopIndex >= b.slides.length - 2 * ai && (b.activeLoopIndex = b.slides.length - 2 * ai - b.activeLoopIndex), b.activeLoopIndex < 0 && (b.activeLoopIndex = b.slides.length - 2 * ai + b.activeLoopIndex), b.activeLoopIndex < 0 && (b.activeLoopIndex = 0)
                    } else {
                        b.activeLoopIndex = b.activeIndex
                    }
                    ab.pagination && b.updatePagination(af)
                }
            }
        }, b.createPagination = function (ae) {
            if (ab.paginationClickable && b.paginationButtons && R(), b.paginationContainer = ab.pagination.nodeType ? ab.pagination : ac(ab.pagination)[0], ab.createPagination) {
                var af = "", ag = b.slides.length, ah = ag;
                ab.loop && (ah -= 2 * b.loopedSlides);
                for (var ai = 0; ah > ai; ai++) {
                    af += "<" + ab.paginationElement + ' class="' + ab.paginationElementClass + '"></' + ab.paginationElement + ">"
                }
                b.paginationContainer.innerHTML = af
            }
            b.paginationButtons = ac("." + ab.paginationElementClass, b.paginationContainer), ae || b.updatePagination(), b.callPlugins("onCreatePagination"), ab.paginationClickable && S()
        }, b.updatePagination = function (af) {
            if (ab.pagination && !(b.slides.length < 1)) {
                var ai = ac("." + ab.paginationActiveClass, b.paginationContainer);
                if (ai) {
                    var aj = b.paginationButtons;
                    if (0 !== aj.length) {
                        for (var al = 0; al < aj.length; al++) {
                            aj[al].className = ab.paginationElementClass
                        }
                        var ae = ab.loop ? b.loopedSlides : 0;
                        if (ab.paginationAsRange) {
                            b.visibleSlides || b.calcVisibleSlides(af);
                            var ag, ah = [];
                            for (ag = 0; ag < b.visibleSlides.length; ag++) {
                                var ak = b.slides.indexOf(b.visibleSlides[ag]) - ae;
                                ab.loop && 0 > ak && (ak = b.slides.length - 2 * b.loopedSlides + ak), ab.loop && ak >= b.slides.length - 2 * b.loopedSlides && (ak = b.slides.length - 2 * b.loopedSlides - ak, ak = Math.abs(ak)), ah.push(ak)
                            }
                            for (ag = 0; ag < ah.length; ag++) {
                                aj[ah[ag]] && (aj[ah[ag]].className += " " + ab.paginationVisibleClass)
                            }
                            ab.loop ? void 0 !== aj[b.activeLoopIndex] && (aj[b.activeLoopIndex].className += " " + ab.paginationActiveClass) : aj[b.activeIndex] && (aj[b.activeIndex].className += " " + ab.paginationActiveClass)
                        } else {
                            ab.loop ? aj[b.activeLoopIndex] && (aj[b.activeLoopIndex].className += " " + ab.paginationActiveClass + " " + ab.paginationVisibleClass) : aj[b.activeIndex] && (aj[b.activeIndex].className += " " + ab.paginationActiveClass + " " + ab.paginationVisibleClass)
                        }
                    }
                }
            }
        }, b.calcVisibleSlides = function (af) {
            var ak = [], ae = 0, ag = 0, ah = 0;
            l && b.wrapperLeft > 0 && (af += b.wrapperLeft), !l && b.wrapperTop > 0 && (af += b.wrapperTop);
            for (var ai = 0; ai < b.slides.length; ai++) {
                ae += ag, ag = "auto" === ab.slidesPerView ? l ? b.h.getWidth(b.slides[ai], !0, ab.roundLengths) : b.h.getHeight(b.slides[ai], !0, ab.roundLengths) : d, ah = ae + ag;
                var aj = !1;
                ab.visibilityFullFit ? (ae >= -af && -af + h >= ah && (aj = !0), -af >= ae && ah >= -af + h && (aj = !0)) : (ah > -af && -af + h >= ah && (aj = !0), ae >= -af && -af + h > ae && (aj = !0), -af > ae && ah > -af + h && (aj = !0)), aj && ak.push(b.slides[ai])
            }
            0 === ak.length && (ak = [b.slides[b.activeIndex]]), b.visibleSlides = ak
        };
        var W, Z;
        b.startAutoplay = function () {
            if (b.support.transitions) {
                if ("undefined" != typeof W) {
                    return !1
                }
                if (!ab.autoplay) {
                    return
                }
                b.callPlugins("onAutoplayStart"), ab.onAutoplayStart && b.fireCallback(ab.onAutoplayStart, b), V()
            } else {
                if ("undefined" != typeof Z) {
                    return !1
                }
                if (!ab.autoplay) {
                    return
                }
                b.callPlugins("onAutoplayStart"), ab.onAutoplayStart && b.fireCallback(ab.onAutoplayStart, b), Z = setInterval(function () {
                    ab.loop ? (b.fixLoop(), b.swipeNext(!0, !0)) : b.swipeNext(!0, !0) || (ab.autoplayStopOnLast ? (clearInterval(Z), Z = void 0) : b.swipeTo(0))
                }, ab.autoplay)
            }
        }, b.stopAutoplay = function (ae) {
            if (b.support.transitions) {
                if (!W) {
                    return
                }
                W && clearTimeout(W), W = void 0, ae && !ab.autoplayDisableOnInteraction && b.wrapperTransitionEnd(function () {
                    V()
                }), b.callPlugins("onAutoplayStop"), ab.onAutoplayStop && b.fireCallback(ab.onAutoplayStop, b)
            } else {
                Z && clearInterval(Z), Z = void 0, b.callPlugins("onAutoplayStop"), ab.onAutoplayStop && b.fireCallback(ab.onAutoplayStop, b)
            }
        }, b.loopCreated = !1, b.removeLoopedSlides = function () {
            if (b.loopCreated) {
                for (var ae = 0; ae < b.slides.length; ae++) {
                    b.slides[ae].getData("looped") === !0 && b.wrapper.removeChild(b.slides[ae])
                }
            }
        }, b.createLoop = function () {
            if (0 !== b.slides.length) {
                b.loopedSlides = "auto" === ab.slidesPerView ? ab.loopedSlides || 1 : Math.floor(ab.slidesPerView) + ab.loopAdditionalSlides, b.loopedSlides > b.slides.length && (b.loopedSlides = b.slides.length);
                var am, an = "", ae = "", af = "", ag = b.slides.length, ah = Math.floor(b.loopedSlides / ag),
                    ai = b.loopedSlides % ag;
                for (am = 0; ah * ag > am; am++) {
                    var aj = am;
                    if (am >= ag) {
                        var ak = Math.floor(am / ag);
                        aj = am - ag * ak
                    }
                    af += b.slides[aj].outerHTML
                }
                for (am = 0; ai > am; am++) {
                    ae += O(ab.slideDuplicateClass, b.slides[am].outerHTML)
                }
                for (am = ag - ai; ag > am; am++) {
                    an += O(ab.slideDuplicateClass, b.slides[am].outerHTML)
                }
                var al = an + af + c.innerHTML + af + ae;
                for (c.innerHTML = al, b.loopCreated = !0, b.calcSlides(), am = 0; am < b.slides.length; am++) {
                    (am < b.loopedSlides || am >= b.slides.length - b.loopedSlides) && b.slides[am].setData("looped", !0)
                }
                b.callPlugins("onCreateLoop")
            }
        }, b.fixLoop = function () {
            var ae;
            b.activeIndex < b.loopedSlides ? (ae = b.slides.length - 3 * b.loopedSlides + b.activeIndex, b.swipeTo(ae, 0, !1)) : ("auto" === ab.slidesPerView && b.activeIndex >= 2 * b.loopedSlides || b.activeIndex > b.slides.length - 2 * ab.slidesPerView) && (ae = -b.slides.length + b.activeIndex + b.loopedSlides, b.swipeTo(ae, 0, !1))
        }, b.loadSlides = function () {
            var ae = "";
            b.activeLoaderIndex = 0;
            for (var af = ab.loader.slides, ag = ab.loader.loadAllSlides ? af.length : ab.slidesPerView * (1 + ab.loader.surroundGroups), ah = 0; ag > ah; ah++) {
                ae += "outer" === ab.loader.slidesHTMLType ? af[ah] : "<" + ab.slideElement + ' class="' + ab.slideClass + '" data-swiperindex="' + ah + '">' + af[ah] + "</" + ab.slideElement + ">"
            }
            b.wrapper.innerHTML = ae, b.calcSlides(!0), ab.loader.loadAllSlides || b.wrapperTransitionEnd(b.reloadSlides, !0)
        }, b.reloadSlides = function () {
            var al = ab.loader.slides, am = parseInt(b.activeSlide().data("swiperindex"), 10);
            if (!(0 > am || am > al.length - 1)) {
                b.activeLoaderIndex = am;
                var an = Math.max(0, am - ab.slidesPerView * ab.loader.surroundGroups),
                    ao = Math.min(am + ab.slidesPerView * (1 + ab.loader.surroundGroups) - 1, al.length - 1);
                if (am > 0) {
                    var ae = -d * (am - an);
                    b.setWrapperTranslate(ae), b.setWrapperTransition(0)
                }
                var af;
                if ("reload" === ab.loader.logic) {
                    b.wrapper.innerHTML = "";
                    var ag = "";
                    for (af = an; ao >= af; af++) {
                        ag += "outer" === ab.loader.slidesHTMLType ? al[af] : "<" + ab.slideElement + ' class="' + ab.slideClass + '" data-swiperindex="' + af + '">' + al[af] + "</" + ab.slideElement + ">"
                    }
                    b.wrapper.innerHTML = ag
                } else {
                    var ah = 1000, ai = 0;
                    for (af = 0; af < b.slides.length; af++) {
                        var aj = b.slides[af].data("swiperindex");
                        an > aj || aj > ao ? b.wrapper.removeChild(b.slides[af]) : (ah = Math.min(aj, ah), ai = Math.max(aj, ai))
                    }
                    for (af = an; ao >= af; af++) {
                        var ak;
                        ah > af && (ak = document.createElement(ab.slideElement), ak.className = ab.slideClass, ak.setAttribute("data-swiperindex", af), ak.innerHTML = al[af], b.wrapper.insertBefore(ak, b.wrapper.firstChild)), af > ai && (ak = document.createElement(ab.slideElement), ak.className = ab.slideClass, ak.setAttribute("data-swiperindex", af), ak.innerHTML = al[af], b.wrapper.appendChild(ak))
                    }
                }
                b.reInit(!0)
            }
        }, X()
    }
};
Swiper.prototype = {
    plugins: {}, wrapperTransitionEnd: function (e, f) {
        function g(h) {
            if (h.target === c && (e(b), b.params.queueEndCallbacks && (b._queueEndCallbacks = !1), !f)) {
                for (a = 0; a < d.length; a++) {
                    b.h.removeEventListener(c, d[a], g)
                }
            }
        }

        var a, b = this, c = b.wrapper,
            d = ["webkitTransitionEnd", "transitionend", "oTransitionEnd", "MSTransitionEnd", "msTransitionEnd"];
        if (e) {
            for (a = 0; a < d.length; a++) {
                b.h.addEventListener(c, d[a], g)
            }
        }
    }, getWrapperTranslate: function (e) {
        var f, a, b, c, d = this.wrapper;
        return "undefined" == typeof e && (e = "horizontal" === this.params.mode ? "x" : "y"), this.support.transforms && this.params.useCSS3Transforms ? (b = window.getComputedStyle(d, null), window.WebKitCSSMatrix ? c = new WebKitCSSMatrix("none" === b.webkitTransform ? "" : b.webkitTransform) : (c = b.MozTransform || b.OTransform || b.MsTransform || b.msTransform || b.transform || b.getPropertyValue("transform").replace("translate(", "matrix(1, 0, 0, 1,"), f = c.toString().split(",")), "x" === e && (a = window.WebKitCSSMatrix ? c.m41 : parseFloat(16 === f.length ? f[12] : f[4])), "y" === e && (a = window.WebKitCSSMatrix ? c.m42 : parseFloat(16 === f.length ? f[13] : f[5]))) : ("x" === e && (a = parseFloat(d.style.left, 10) || 0), "y" === e && (a = parseFloat(d.style.top, 10) || 0)), a || 0
    }, setWrapperTranslate: function (f, n, a) {
        var o = $("#" + this.container.id).find(".swiper-wrapper").width(), e = $("#" + this.container.id).width();
        var b, c = this.wrapper.style, d = {x: 0, y: 0, z: 0};
        3 === arguments.length ? (d.x = f, d.y = n, d.z = a) : ("undefined" == typeof n && (n = "horizontal" === this.params.mode ? "x" : "y"), d[n] = f), this.support.transforms && this.params.useCSS3Transforms ? (b = this.support.transforms3d ? "translate3d(" + d.x + "px, " + d.y + "px, " + d.z + "px)" : "translate(" + d.x + "px, " + d.y + "px)", c.webkitTransform = c.MsTransform = c.msTransform = c.MozTransform = c.OTransform = c.transform = b) : (c.left = d.x + "px", c.top = d.y + "px"), this.callPlugins("onSetWrapperTransform", d), this.params.onSetWrapperTransform && this.fireCallback(this.params.onSetWrapperTransform, this, d);
        if (Math.abs(f) == 0) {
            $("#" + this.container.id).parent().find(".swiper-button-prev").addClass("disabled")
        } else {
            $("#" + this.container.id).parent().find(".swiper-button-prev").removeClass("disabled")
        }
        if ((o - Math.ceil(-f)) <= e) {
            $("#" + this.container.id).parent().find(".swiper-button-next").addClass("disabled")
        } else {
            $("#" + this.container.id).parent().find(".swiper-button-next").removeClass("disabled")
        }
    }, setWrapperTransition: function (a) {
        var b = this.wrapper.style;
        b.webkitTransitionDuration = b.MsTransitionDuration = b.msTransitionDuration = b.MozTransitionDuration = b.OTransitionDuration = b.transitionDuration = a / 1000 + "s", this.callPlugins("onSetWrapperTransition", {duration: a}), this.params.onSetWrapperTransition && this.fireCallback(this.params.onSetWrapperTransition, this, a)
    }, h: {
        getWidth: function (d, e, a) {
            var b = window.getComputedStyle(d, null).getPropertyValue("width"), c = parseFloat(b);
            return (isNaN(c) || b.indexOf("%") > 0 || 0 > c) && (c = d.offsetWidth - parseFloat(window.getComputedStyle(d, null).getPropertyValue("padding-left")) - parseFloat(window.getComputedStyle(d, null).getPropertyValue("padding-right"))), e && (c += parseFloat(window.getComputedStyle(d, null).getPropertyValue("padding-left")) + parseFloat(window.getComputedStyle(d, null).getPropertyValue("padding-right"))), a ? Math.ceil(c) : c
        }, getHeight: function (d, e, a) {
            if (e) {
                return d.offsetHeight
            }
            var b = window.getComputedStyle(d, null).getPropertyValue("height"), c = parseFloat(b);
            return (isNaN(c) || b.indexOf("%") > 0 || 0 > c) && (c = d.offsetHeight - parseFloat(window.getComputedStyle(d, null).getPropertyValue("padding-top")) - parseFloat(window.getComputedStyle(d, null).getPropertyValue("padding-bottom"))), e && (c += parseFloat(window.getComputedStyle(d, null).getPropertyValue("padding-top")) + parseFloat(window.getComputedStyle(d, null).getPropertyValue("padding-bottom"))), a ? Math.ceil(c) : c
        }, getOffset: function (e) {
            var f = e.getBoundingClientRect(), g = document.body, a = e.clientTop || g.clientTop || 0,
                b = e.clientLeft || g.clientLeft || 0, c = window.pageYOffset || e.scrollTop,
                d = window.pageXOffset || e.scrollLeft;
            return document.documentElement && !window.pageYOffset && (c = document.documentElement.scrollTop, d = document.documentElement.scrollLeft), {
                top: f.top + c - a,
                left: f.left + d - b
            }
        }, windowWidth: function () {
            return window.innerWidth ? window.innerWidth : document.documentElement && document.documentElement.clientWidth ? document.documentElement.clientWidth : void 0
        }, windowHeight: function () {
            return window.innerHeight ? window.innerHeight : document.documentElement && document.documentElement.clientHeight ? document.documentElement.clientHeight : void 0
        }, windowScroll: function () {
            return "undefined" != typeof pageYOffset ? {
                left: window.pageXOffset,
                top: window.pageYOffset
            } : document.documentElement ? {
                left: document.documentElement.scrollLeft,
                top: document.documentElement.scrollTop
            } : void 0
        }, addEventListener: function (c, d, a, b) {
            "undefined" == typeof b && (b = !1), c.addEventListener ? c.addEventListener(d, a, b) : c.attachEvent && c.attachEvent("on" + d, a)
        }, removeEventListener: function (c, d, a, b) {
            "undefined" == typeof b && (b = !1), c.removeEventListener ? c.removeEventListener(d, a, b) : c.detachEvent && c.detachEvent("on" + d, a)
        }
    }, setTransform: function (b, c) {
        var a = b.style;
        a.webkitTransform = a.MsTransform = a.msTransform = a.MozTransform = a.OTransform = a.transform = c
    }, setTranslate: function (d, e) {
        var a = d.style, b = {x: e.x || 0, y: e.y || 0, z: e.z || 0},
            c = this.support.transforms3d ? "translate3d(" + b.x + "px," + b.y + "px," + b.z + "px)" : "translate(" + b.x + "px," + b.y + "px)";
        a.webkitTransform = a.MsTransform = a.msTransform = a.MozTransform = a.OTransform = a.transform = c, this.support.transforms || (a.left = b.x + "px", a.top = b.y + "px")
    }, setTransition: function (b, c) {
        var a = b.style;
        a.webkitTransitionDuration = a.MsTransitionDuration = a.msTransitionDuration = a.MozTransitionDuration = a.OTransitionDuration = a.transitionDuration = c + "ms"
    }, support: {
        touch: window.Modernizr && Modernizr.touch === !0 || function () {
            return !!("ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch)
        }(), transforms3d: window.Modernizr && Modernizr.csstransforms3d === !0 || function () {
            var a = document.createElement("div").style;
            return "webkitPerspective" in a || "MozPerspective" in a || "OPerspective" in a || "MsPerspective" in a || "perspective" in a
        }(), transforms: window.Modernizr && Modernizr.csstransforms === !0 || function () {
            var a = document.createElement("div").style;
            return "transform" in a || "WebkitTransform" in a || "MozTransform" in a || "msTransform" in a || "MsTransform" in a || "OTransform" in a
        }(), transitions: window.Modernizr && Modernizr.csstransitions === !0 || function () {
            var a = document.createElement("div").style;
            return "transition" in a || "WebkitTransition" in a || "MozTransition" in a || "msTransition" in a || "MsTransition" in a || "OTransition" in a
        }(), classList: function () {
            var a = document.createElement("div");
            return "classList" in a
        }()
    }, browser: {
        ie8: function () {
            var b = -1;
            if ("Microsoft Internet Explorer" === navigator.appName) {
                var c = navigator.userAgent, a = new RegExp(/MSIE ([0-9]{1,}[\.0-9]{0,})/);
                null !== a.exec(c) && (b = parseFloat(RegExp.$1))
            }
            return -1 !== b && 9 > b
        }(), ie10: window.navigator.msPointerEnabled, ie11: window.navigator.pointerEnabled
    }
}, (window.jQuery || window.Zepto) && !function (a) {
    a.fn.swiper = function (b) {
        var c;
        return this.each(function (d) {
            var e = a(this), f = new Swiper(e[0], b);
            d || (c = f), e.data("swiper", f)
        }), c
    }
}(window.jQuery || window.Zepto), "undefined" != typeof module ? module.exports = Swiper : "function" == typeof define && define.amd && define([], function () {
    return Swiper
});